{"version":3,"sources":["webpack://mbg/webpack/universalModuleDefinition","webpack://mbg/webpack/bootstrap","webpack://mbg/./src/grid-view/grid-view.scss","webpack://mbg/./node_modules/css-loader/lib/css-base.js","webpack://mbg/./node_modules/style-loader/lib/addStyles.js","webpack://mbg/./node_modules/style-loader/lib/urls.js","webpack://mbg/./src/core/cache.js","webpack://mbg/./src/core/drag.js","webpack://mbg/./src/core/easing.js","webpack://mbg/./src/core/event-base.js","webpack://mbg/./src/core/event-type.js","webpack://mbg/./src/core/extend.js","webpack://mbg/./src/core/icon.js","webpack://mbg/./src/core/is-object.js","webpack://mbg/./src/core/merge.js","webpack://mbg/./src/core/motion.js","webpack://mbg/./src/core/option-base.js","webpack://mbg/./src/core/query.js","webpack://mbg/./src/core/rhythm.js","webpack://mbg/./src/core/svg.js","webpack://mbg/./src/core/touch.js","webpack://mbg/./src/core/util.js","webpack://mbg/./src/grid-view/grid-view.html","webpack://mbg/./src/grid-view/grid-view.js","webpack://mbg/./src/grid-view/grid-view.scss?fb28","webpack://mbg/./src/grid-view/ui/scroll-bar/scroll-bar-h.js","webpack://mbg/./src/grid-view/ui/scroll-bar/scroll-bar-v.js","webpack://mbg/./src/grid-view/ui/scroll-bar/scroll-bar.html","webpack://mbg/./src/grid-view/ui/scroll-bar/scroll-bar.js","webpack://mbg/./src/grid-view/ui/scroll-pane/scroll-pane.js","webpack://mbg/./src/grid-view/view/view-base.js","webpack://mbg/./src/grid-view/view/view-cells.js","webpack://mbg/./src/grid-view/view/view-column-line.js","webpack://mbg/./src/grid-view/view/view-columns.js","webpack://mbg/./src/grid-view/view/view-css.js","webpack://mbg/./src/grid-view/view/view-editor.js","webpack://mbg/./src/grid-view/view/view-events.js","webpack://mbg/./src/grid-view/view/view-header-table.js","webpack://mbg/./src/grid-view/view/view-headers.js","webpack://mbg/./src/grid-view/view/view-invalidate.js","webpack://mbg/./src/grid-view/view/view-navigate.js","webpack://mbg/./src/grid-view/view/view-node.js","webpack://mbg/./src/grid-view/view/view-resize.js","webpack://mbg/./src/grid-view/view/view-row-cache.js","webpack://mbg/./src/grid-view/view/view-rows.js","webpack://mbg/./src/grid-view/view/view-scroll.js","webpack://mbg/./src/grid-view/view/view-scrollpane-status.js","webpack://mbg/./src/grid-view/view/view-scrollpane.js","webpack://mbg/./src/grid-view/view/view-visible-range.js","webpack://mbg/./src/grid/config/default-editor.js","webpack://mbg/./src/grid/config/default-formatter.js","webpack://mbg/./src/grid/config/default-option.js","webpack://mbg/./src/grid/config/default-sort-comparers.js","webpack://mbg/./src/grid/config/editor/editor-base.js","webpack://mbg/./src/grid/config/editor/list.js","webpack://mbg/./src/grid/config/editor/text.js","webpack://mbg/./src/grid/grid.js","webpack://mbg/./src/grid/model/model-base.js","webpack://mbg/./src/grid/model/model-column-header.js","webpack://mbg/./src/grid/model/model-column-private.js","webpack://mbg/./src/grid/model/model-column-resizing.js","webpack://mbg/./src/grid/model/model-column.js","webpack://mbg/./src/grid/model/model-common.js","webpack://mbg/./src/grid/model/model-copy.js","webpack://mbg/./src/grid/model/model-formatter.js","webpack://mbg/./src/grid/model/model-proxy.js","webpack://mbg/./src/grid/model/model-row-collapse.js","webpack://mbg/./src/grid/model/model-row-dragdrop.js","webpack://mbg/./src/grid/model/model-row-focus.js","webpack://mbg/./src/grid/model/model-row-number.js","webpack://mbg/./src/grid/model/model-row-select.js","webpack://mbg/./src/grid/model/model-row.js","webpack://mbg/./src/grid/model/model-scroll.js","webpack://mbg/./src/grid/model/model-sort.js","webpack://mbg/./src/grid/service/service-export.js","webpack://mbg/./src/grid/service/service-sort.js","webpack://mbg/./src/index.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;AClFA,2BAA2B,mBAAO,CAAC,gGAA+C;AAClF;;;AAGA;AACA,cAAc,QAAS,YAAY,uBAAuB,qBAAqB,gBAAgB,iBAAiB,eAAe,eAAe,cAAc,eAAe,oBAAoB,+gDAA+gD,wDAAwD,qCAAqC,kCAAkC,6BAA6B,EAAE,iBAAiB,2BAA2B,EAAE,yBAAyB,oBAAoB,2BAA2B,yBAAyB,kBAAkB,mBAAmB,gBAAgB,eAAe,yBAAyB,wBAAwB,qBAAqB,mBAAmB,EAAE,8BAA8B,mBAAmB,gBAAgB,yBAAyB,aAAa,iBAAiB,iBAAiB,EAAE,qCAAqC,QAAQ,kBAAkB,iBAAiB,EAAE,SAAS,kBAAkB,iBAAiB,EAAE,SAAS,kBAAkB,gBAAgB,EAAE,SAAS,kBAAkB,gBAAgB,EAAE,UAAU,kBAAkB,gBAAgB,EAAE,EAAE,oCAAoC,0CAA0C,2CAA2C,0CAA0C,0BAA0B,yBAAyB,kBAAkB,gBAAgB,yBAAyB,iCAAiC,iBAAiB,EAAE,uDAAuD,sBAAsB,kBAAkB,gBAAgB,EAAE,gCAAgC,2BAA2B,EAAE,sCAAsC,4BAA4B,gCAAgC,EAAE,gCAAgC,+BAA+B,EAAE,sCAAsC,0BAA0B,gCAAgC,EAAE,gCAAgC,+BAA+B,EAAE,sCAAsC,2BAA2B,gCAAgC,EAAE,gCAAgC,gCAAgC,EAAE,sCAAsC,2BAA2B,gCAAgC,EAAE,gCAAgC,gCAAgC,EAAE,sCAAsC,2BAA2B,gCAAgC,EAAE,gCAAgC,gCAAgC,EAAE,sCAAsC,2BAA2B,gCAAgC,EAAE,gCAAgC,gCAAgC,EAAE,sCAAsC,2BAA2B,gCAAgC,EAAE,gCAAgC,gCAAgC,EAAE,sCAAsC,2BAA2B,gCAAgC,EAAE,gCAAgC,gCAAgC,EAAE,sCAAsC,2BAA2B,gCAAgC,EAAE,0BAA0B,uBAAuB,sBAAsB,EAAE,qCAAqC,8BAA8B,EAAE,0CAA0C,sBAAsB,sBAAsB,EAAE,4CAA4C,uBAAuB,EAAE,0DAA0D,oBAAoB,qBAAqB,EAAE,oDAAoD,oBAAoB,qBAAqB,EAAE,8CAA8C,oBAAoB,EAAE,8BAA8B,mBAAmB,EAAE,2BAA2B,yBAAyB,uBAAuB,mBAAmB,EAAE,6BAA6B,iBAAiB,eAAe,EAAE,6BAA6B,gBAAgB,kBAAkB,EAAE,iCAAiC,yBAAyB,uBAAuB,0BAA0B,kBAAkB,mBAAmB,EAAE,iCAAiC,wBAAwB,4BAA4B,6BAA6B,gCAAgC,yBAAyB,uBAAuB,aAAa,cAAc,0BAA0B,yBAAyB,EAAE,uCAAuC,0BAA0B,EAAE,sCAAsC,0BAA0B,EAAE,4CAA4C,0BAA0B,EAAE,4BAA4B,yBAAyB,uBAAuB,oBAAoB,sBAAsB,uBAAuB,mBAAmB,EAAE,4BAA4B,yBAAyB,uBAAuB,kBAAkB,mBAAmB,sBAAsB,uBAAuB,mBAAmB,EAAE,4BAA4B,yBAAyB,EAAE,uBAAuB,sBAAsB,eAAe,gBAAgB,aAAa,cAAc,iBAAiB,EAAE,wBAAwB,uBAAuB,uBAAuB,yBAAyB,sBAAsB,qBAAqB,EAAE,yBAAyB,sCAAsC,EAAE,8BAA8B,gCAAgC,0BAA0B,EAAE,mCAAmC,+BAA+B,yBAAyB,wBAAwB,0BAA0B,0BAA0B,oBAAoB,EAAE,6BAA6B,yBAAyB,uBAAuB,EAAE,+BAA+B,yBAAyB,uBAAuB,EAAE,6BAA6B,uBAAuB,8BAA8B,gCAAgC,sCAAsC,EAAE,wBAAwB,0BAA0B,EAAE,4BAA4B,uBAAuB,EAAE,8BAA8B,yBAAyB,EAAE,6BAA6B,wBAAwB,EAAE,uDAAuD,sBAAsB,oBAAoB,EAAE,mCAAmC,uBAAuB,EAAE,mCAAmC,8BAA8B,oCAAoC,uBAAuB,sBAAsB,wBAAwB,EAAE,uDAAuD,2BAA2B,EAAE,6DAA6D,0BAA0B,EAAE,wCAAwC,sBAAsB,EAAE,sCAAsC,qBAAqB,EAAE,2DAA2D,uBAAuB,EAAE,wEAAwE,sBAAsB,EAAE,kCAAkC,yBAAyB,mBAAmB,uBAAuB,uBAAuB,gBAAgB,iBAAiB,kBAAkB,EAAE,gCAAgC,yBAAyB,oBAAoB,kBAAkB,uCAAuC,EAAE,qCAAqC,yBAAyB,sBAAsB,iBAAiB,kBAAkB,gBAAgB,qBAAqB,eAAe,EAAE,yCAAyC,qBAAqB,EAAE,mDAAmD,oBAAoB,oBAAoB,EAAE,kDAAkD,eAAe,EAAE,kCAAkC,qBAAqB,EAAE,oCAAoC,qBAAqB,EAAE,6BAA6B,yBAAyB,kBAAkB,aAAa,cAAc,mBAAmB,oBAAoB,EAAE,oCAAoC,yBAAyB,qBAAqB,wBAAwB,kBAAkB,iBAAiB,EAAE,kCAAkC,yBAAyB,qBAAqB,iBAAiB,eAAe,kBAAkB,mBAAmB,iBAAiB,EAAE,6CAA6C,kCAAkC,mBAAmB,EAAE,8CAA8C,kCAAkC,mBAAmB,EAAE,2BAA2B,wBAAwB,EAAE,+BAA+B,0BAA0B,EAAE,sBAAsB,yBAAyB,kBAAkB,EAAE,uCAAuC,2BAA2B,EAAE,iCAAiC,yBAAyB,gBAAgB,eAAe,wBAAwB,EAAE,4BAA4B,kBAAkB,EAAE,4CAA4C,0BAA0B,EAAE,2BAA2B,kBAAkB,uBAAuB,8BAA8B,yBAAyB,yBAAyB,EAAE,4BAA4B,yBAAyB,EAAE,2BAA2B,uBAAuB,sBAAsB,4BAA4B,kBAAkB,mBAAmB,wBAAwB,uBAAuB,EAAE,yCAAyC,oBAAoB,oBAAoB,EAAE,+BAA+B,kBAAkB,EAAE,6CAA6C,iBAAiB,EAAE,mDAAmD,qBAAqB,EAAE,iDAAiD,qBAAqB,EAAE,6BAA6B,yBAAyB,eAAe,gBAAgB,wBAAwB,wBAAwB,uBAAuB,EAAE,sBAAsB,yBAAyB,iBAAiB,uBAAuB,kBAAkB,EAAE,6BAA6B,yBAAyB,iBAAiB,uBAAuB,qBAAqB,EAAE,sCAAsC,mBAAmB,EAAE,6BAA6B,yBAAyB,iBAAiB,kBAAkB,EAAE,wBAAwB,yBAAyB,iBAAiB,EAAE,0BAA0B,uBAAuB,EAAE,6CAA6C,+CAA+C,2iBAA2iB,yBAAyB,0BAA0B,uBAAuB,EAAE,iDAAiD,yBAAyB,uBAAuB,EAAE,4CAA4C,yBAAyB,0BAA0B,uBAAuB,EAAE,0BAA0B,uBAAuB,EAAE,qBAAqB,yBAAyB,kBAAkB,kBAAkB,uBAAuB,EAAE,gCAAgC,yBAAyB,0BAA0B,sCAAsC,EAAE,gDAAgD,4BAA4B,EAAE,0EAA0E,4BAA4B,EAAE,2EAA2E,6BAA6B,EAAE,gCAAgC,4BAA4B,EAAE,+DAA+D,2BAA2B,EAAE,6CAA6C,qBAAqB,EAAE,iCAAiC,sBAAsB,EAAE,mCAAmC,oBAAoB,4BAA4B,EAAE,8CAA8C,8BAA8B,EAAE,kCAAkC,yCAAyC,EAAE,4CAA4C,sCAAsC,EAAE,oCAAoC,uBAAuB,4BAA4B,6BAA6B,EAAE,kCAAkC,qBAAqB,EAAE,mCAAmC,qBAAqB,EAAE,mCAAmC,4BAA4B,EAAE,gCAAgC,mCAAmC,0BAA0B,2BAA2B,4BAA4B,sBAAsB,qBAAqB,EAAE,qCAAqC,yBAAyB,EAAE,qCAAqC,yBAAyB,EAAE,iCAAiC,yBAAyB,kBAAkB,oCAAoC,oBAAoB,EAAE,sBAAsB,yBAAyB,uBAAuB,8BAA8B,6BAA6B,iBAAiB,gBAAgB,0BAA0B,sBAAsB,qBAAqB,sCAAsC,mBAAmB,EAAE,8BAA8B,sBAAsB,EAAE,qCAAqC,iCAAiC,6BAA6B,EAAE,oCAAoC,yCAAyC,EAAE,oCAAoC,gCAAgC,EAAE,kCAAkC,sBAAsB,EAAE,uDAAuD,0BAA0B,EAAE,wDAAwD,2BAA2B,EAAE,iCAAiC,oBAAoB,EAAE,0BAA0B,kCAAkC,sDAAsD,oBAAoB,0BAA0B,qBAAqB,EAAE,4CAA4C,iBAAiB,kBAAkB,oBAAoB,qBAAqB,yBAAyB,kBAAkB,mBAAmB,yCAAyC,yBAAyB,sBAAsB,4BAA4B,wBAAwB,uBAAuB,uBAAuB,EAAE,yDAAyD,wBAAwB,EAAE,0DAA0D,wBAAwB,EAAE,kDAAkD,8BAA8B,mBAAmB,EAAE,sDAAsD,oBAAoB,0BAA0B,oBAAoB,qBAAqB,EAAE,2EAA2E,oBAAoB,2BAA2B,qBAAqB,8BAA8B,uBAAuB,EAAE,0GAA0G,yBAAyB,iCAAiC,EAAE,uGAAuG,yBAAyB,sBAAsB,EAAE,4CAA4C,mBAAmB,EAAE,oCAAoC,uBAAuB,8BAA8B,0BAA0B,qBAAqB,EAAE,kCAAkC,0BAA0B,qBAAqB,uBAAuB,qBAAqB,EAAE,qDAAqD,gBAAgB,uBAAuB,iBAAiB,0BAA0B,mBAAmB,EAAE,oFAAoF,qBAAqB,6BAA6B,EAAE,iFAAiF,qBAAqB,kBAAkB,EAAE;;AAExuiB;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAmC,gBAAgB;AACnD,IAAI;AACJ;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,YAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,oDAAoD,cAAc;;AAElE;AACA;;;;;;;;;;;;AC3EA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA,cAAc,mBAAO,CAAC,uDAAQ;;AAE9B;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA,mBAAmB,2BAA2B;;AAE9C;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAmB;AACnC;AACA;;AAEA;AACA;;AAEA,iBAAiB,2BAA2B;AAC5C;AACA;;AAEA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd,kDAAkD,sBAAsB;AACxE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA,KAAK,KAAwC,EAAE,EAE7C;;AAEF,QAAQ,sBAAiB;AACzB;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;;;;;;;;;;;;;AC5YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,WAAW,EAAE;AACrD,wCAAwC,WAAW,EAAE;;AAErD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,sCAAsC;AACtC,GAAG;AACH;AACA,8DAA8D;AAC9D;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;;;;;;;;;;;ACxFA,WAAW,mBAAO,CAAC,qCAAW;AAC9B,iBAAiB,mBAAO,CAAC,mDAAkB;;AAE3C;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,wCAAwC,OAAO;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA,wCAAwC,OAAO;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB,UAAU;AACjC;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;;AAET;;AAEA,wCAAwC,OAAO;AAC/C;AACA;;AAEA;;AAEA,KAAK;;AAEL;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,CAAC;;AAED,uB;;;;;;;;;;;ACxMA,QAAQ,mBAAO,CAAC,uCAAY;;AAE5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,mBAAO,CAAC,qCAAW;;AAE9B,gBAAgB,mBAAO,CAAC,iDAAiB;;AAEzC;AACA;AACA;AACA,aAAa;AACb;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,CAAC;;;AAGD,sB;;;;;;;;;;;AC3MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wB;;;;;;;;;;;ACjFA,aAAa,mBAAO,CAAC,yCAAa;;AAElC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA,mBAAmB,mBAAmB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;;AAEA,CAAC;;AAED,2B;;;;;;;;;;;AC1VA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,2B;;;;;;;;;;;AClGA;AACA,oCAAoC,OAAO;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA,kCAAkC;AAClC;AACA;;AAEA,wB;;;;;;;;;;;AC1DA,UAAU,mBAAO,CAAC,mCAAU;;AAE5B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,sB;;;;;;;;;;;ACnGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,0B;;;;;;;;;;;AC7BA,eAAe,mBAAO,CAAC,+CAAgB;;AAEvC;;AAEA;AACA;AACA;AACA,mBAAmB,UAAU;AAC7B;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,uB;;;;;;;;;;;AC7EA,iBAAiB,mBAAO,CAAC,mDAAkB;AAC3C,WAAW,mBAAO,CAAC,qCAAW;AAC9B,aAAa,mBAAO,CAAC,yCAAa;;AAElC;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,wCAAwC,OAAO;AAC/C;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,CAAC;;AAED,wB;;;;;;;;;;;ACjPA,YAAY,mBAAO,CAAC,uCAAY;AAChC,gBAAgB,mBAAO,CAAC,iDAAiB;;AAEzC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,4B;;;;;;;;;;;AC9BA;;AAEA;AACA;AACA;AACA;;AAEA,uB;;;;;;;;;;;ACPA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wB;;;;;;;;;;;AC1GA,QAAQ,mBAAO,CAAC,uCAAY;;AAE5B,WAAW,mBAAO,CAAC,qCAAW;;AAE9B,gBAAgB,mBAAO,CAAC,iDAAiB;;AAEzC;AACA;AACA;;AAEA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;;AAEA,KAAK;;AAEL;;AAEA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA,CAAC;;AAED,qB;;;;;;;;;;;AC/RA,QAAQ,mBAAO,CAAC,uCAAY;;AAE5B,WAAW,mBAAO,CAAC,qCAAW;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa,mBAAO,CAAC,yCAAa;;AAElC,gBAAgB,mBAAO,CAAC,iDAAiB;AACzC;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;;AAEA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,CAAC;;;AAGD,uB;;;;;;;;;;;ACzPA,eAAe,mBAAO,CAAC,+CAAgB;AACvC,YAAY,mBAAO,CAAC,uCAAY;AAChC,aAAa,mBAAO,CAAC,yCAAa;;AAElC;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA,6BAA6B,IAAI,KAAK;AACtC;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA,wCAAwC,OAAO;AAC/C;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,gBAAgB,GAAG,KAAK;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;;AAEA,sB;;;;;;;;;;;AC5PA,0xF;;;;;;;;;;;ACAA;AACA,mBAAO,CAAC,wDAAkB;;AAE1B;AACA,QAAQ,mBAAO,CAAC,6CAAkB;AAClC,QAAQ,mBAAO,CAAC,uDAAuB;AACvC,WAAW,mBAAO,CAAC,2CAAiB;;AAEpC,mBAAmB,mBAAO,CAAC,wDAAkB;;AAE7C,eAAe,mBAAO,CAAC,8DAAqB;;AAE5C;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA,CAAC;;AAED,0B;;;;;;;;;;;;AC5QA,cAAc,mBAAO,CAAC,gNAAwG;;AAE9H,4CAA4C,QAAS;;AAErD;AACA;;;;AAIA,eAAe;;AAEf;AACA;;AAEA,aAAa,mBAAO,CAAC,sGAAmD;;AAExE;;AAEA,GAAG,KAAU,EAAE,E;;;;;;;;;;;ACnBf,gBAAgB,mBAAO,CAAC,oEAAiB;;AAEzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,4B;;;;;;;;;;;ACdA,gBAAgB,mBAAO,CAAC,oEAAiB;;AAEzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,4B;;;;;;;;;;;ACdA,0J;;;;;;;;;;;ACAA,QAAQ,mBAAO,CAAC,mDAAwB;AACxC,WAAW,mBAAO,CAAC,iDAAuB;;AAE1C,iBAAiB,mBAAO,CAAC,+DAA8B;;AAEvD,WAAW,mBAAO,CAAC,iDAAuB;;AAE1C,aAAa,mBAAO,CAAC,qDAAyB;;AAE9C,eAAe,mBAAO,CAAC,wEAAmB;;AAE1C;AACA;AACA;AACA,cAAc;;AAEd;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;;AAET;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;;AAET;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA,CAAC;;;AAGD,2B;;;;;;;;;;;ACheA,QAAQ,mBAAO,CAAC,mDAAwB;AACxC,WAAW,mBAAO,CAAC,iDAAuB;;AAE1C,iBAAiB,mBAAO,CAAC,+DAA8B;;AAEvD,iBAAiB,mBAAO,CAAC,oFAA+B;AACxD,iBAAiB,mBAAO,CAAC,oFAA+B;;AAExD;;AAEA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;;AAET;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,KAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA,CAAC;;AAED,4B;;;;;;;;;;;ACjgBA,gBAAgB,mBAAO,CAAC,0DAA0B;;AAElD,gBAAgB,mBAAO,CAAC,2DAAiB;AACzC,qBAAqB,mBAAO,CAAC,uEAAuB;AACpD,kBAAkB,mBAAO,CAAC,+DAAmB;;AAE7C,cAAc,mBAAO,CAAC,uDAAe;AACrC,iBAAiB,mBAAO,CAAC,6DAAkB;AAC3C,iBAAiB,mBAAO,CAAC,6DAAkB;;AAE3C,sBAAsB,mBAAO,CAAC,yEAAwB;AACtD,kBAAkB,mBAAO,CAAC,+DAAmB;;AAE7C,qBAAqB,mBAAO,CAAC,qEAAsB;AACnD,mBAAmB,mBAAO,CAAC,iEAAoB;AAC/C,eAAe,mBAAO,CAAC,yDAAgB;AACvC,iBAAiB,mBAAO,CAAC,6DAAkB;;AAE3C,mBAAmB,mBAAO,CAAC,mEAAqB;AAChD,eAAe,mBAAO,CAAC,yDAAgB;;AAEvC,iBAAiB,mBAAO,CAAC,6DAAkB;AAC3C,2BAA2B,mBAAO,CAAC,mFAA6B;AAChE,qBAAqB,mBAAO,CAAC,qEAAsB;;AAEnD,uBAAuB,mBAAO,CAAC,2EAAyB;;AAExD;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,0B;;;;;;;;;;;ACxDA,QAAQ,mBAAO,CAAC,gDAAqB;AACrC,QAAQ,mBAAO,CAAC,0DAA0B;AAC1C,WAAW,mBAAO,CAAC,8CAAoB;;AAEvC;;AAEA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,8CAA8C,OAAO;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;;AAEA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA,KAAK;;AAEL;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,uB;;;;;;;;;;;AC7bA;AACA,WAAW,mBAAO,CAAC,8CAAoB;;AAEvC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,SAAS;;AAET,KAAK;;AAEL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4B;;;;;;;;;;;ACzJA,QAAQ,mBAAO,CAAC,0DAA0B;AAC1C,WAAW,mBAAO,CAAC,8CAAoB;;AAEvC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,OAAO;AACrD;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;;AAEA,yB;;;;;;;;;;;AClLA,QAAQ,mBAAO,CAAC,gDAAqB;;AAErC;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kCAAkC,sBAAsB,2BAA2B,EAAE;;AAErF;AACA;AACA,uBAAuB,oBAAoB;AAC3C,8CAA8C,EAAE;AAChD;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,2CAA2C,OAAO;AAClD;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,0B;;;;;;;;;;;ACzGA,QAAQ,mBAAO,CAAC,gDAAqB;AACrC,QAAQ,mBAAO,CAAC,0DAA0B;AAC1C;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,OAAO;AACpD;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,aAAa;;AAEb;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;;AAEA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;;AAET;;AAEA;;AAEA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,wB;;;;;;;;;;;AC/SA,QAAQ,mBAAO,CAAC,gDAAqB;AACrC,WAAW,mBAAO,CAAC,8CAAoB;AACvC,QAAQ,mBAAO,CAAC,0DAA0B;AAC1C,WAAW,mBAAO,CAAC,8CAAoB;AACvC,YAAY,mBAAO,CAAC,gDAAqB;AACzC;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;;AAET;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;;AAET;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;;AAET;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;;AAET;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,wB;;;;;;;;;;;ACxoBA;AACA;AACA,WAAW,mBAAO,CAAC,8CAAoB;AACvC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;;AAEA,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,iDAAiD;AACjD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;;AAEA;;AAEA,6B;;;;;;;;;;;ACrPA,QAAQ,mBAAO,CAAC,0DAA0B;AAC1C,WAAW,mBAAO,CAAC,8CAAoB;AACvC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,2CAA2C,OAAO;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;;AAEA,yB;;;;;;;;;;;AC5FA,WAAW,mBAAO,CAAC,8CAAoB;AACvC;;AAEA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT,KAAK;;AAEL;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,4B;;;;;;;;;;;ACvIA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;;AAGL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,0B;;;;;;;;;;;ACvTA,QAAQ,mBAAO,CAAC,gDAAqB;;AAErC;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,0B;;;;;;;;;;;ACpCA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb;;AAEA;;AAEA;AACA;;AAEA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;;AAET;;AAEA,KAAK;;AAEL;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;;AAET,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA,8DAA8D,OAAO;AACrE;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;;AAET,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA,4B;;;;;;;;;;;AClVA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yDAAyD,OAAO;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;;AAEA,0B;;;;;;;;;;;ACpGA,QAAQ,mBAAO,CAAC,gDAAqB;AACrC,WAAW,mBAAO,CAAC,8CAAoB;AACvC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA,2CAA2C,OAAO;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;;AAEA,sB;;;;;;;;;;;AClQA,QAAQ,mBAAO,CAAC,0DAA0B;AAC1C,WAAW,mBAAO,CAAC,8CAAoB;AACvC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;;AAET,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;;AAEA,wB;;;;;;;;;;;ACvTA,QAAQ,mBAAO,CAAC,0DAA0B;AAC1C,WAAW,mBAAO,CAAC,8CAAoB;AACvC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa;;AAEb;;AAEA;;AAEA;AACA;;AAEA,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;;AAEA,KAAK;;AAEL;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,SAAS;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA,aAAa;AACb;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA,4B;;;;;;;;;;;AC9NA,WAAW,mBAAO,CAAC,8CAAoB;AACvC,iBAAiB,mBAAO,CAAC,uFAAkC;;AAE3D;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;;AAEA,gC;;;;;;;;;;;AC/cA,WAAW,mBAAO,CAAC,8CAAoB;AACvC;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,8BAA8B,UAAU;AACxC;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;;AAEA;AACA,+CAA+C,OAAO;AACtD;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;AAGA;;AAEA,kC;;;;;;;;;;;ACpJA;AACA,UAAU,mBAAO,CAAC,0DAAkB;AACpC,UAAU,mBAAO,CAAC,0DAAkB;AACpC;;AAEA,wB;;;;;;;;;;;ACLA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;;AAEA,2B;;;;;;;;;;;ACnHA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,gBAAgB;;AAEhB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;;;AAGA,wB;;;;;;;;;;;AC/MA,WAAW,mBAAO,CAAC,8CAAoB;;AAEvC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,sC;;;;;;;;;;;AC9MA;;AAEA,gBAAgB,mBAAO,CAAC,6DAA6B;;AAErD;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA,KAAK;;AAEL;;AAEA,KAAK;;AAEL;;AAEA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA,CAAC;;AAED,4B;;;;;;;;;;;ACzFA,QAAQ,mBAAO,CAAC,mDAAwB;AACxC,iBAAiB,mBAAO,CAAC,iEAAkB;;AAE3C;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;;AAEA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;;AAET;;AAEA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;AAED,4B;;;;;;;;;;;ACzGA,QAAQ,mBAAO,CAAC,mDAAwB;AACxC,iBAAiB,mBAAO,CAAC,iEAAkB;;AAE3C;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;;AAET;AACA;AACA;;AAEA;;AAEA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA,CAAC;;AAED,4B;;;;;;;;;;;AClFA,QAAQ,mBAAO,CAAC,uDAAuB;AACvC,WAAW,mBAAO,CAAC,2CAAiB;AACpC,YAAY,mBAAO,CAAC,6CAAkB;;AAEtC,eAAe,mBAAO,CAAC,+DAA2B;;AAElD;AACA;AACA,oBAAoB,mBAAO,CAAC,uEAA4B;AACxD,oBAAoB,mBAAO,CAAC,uEAA4B;AACxD,uBAAuB,mBAAO,CAAC,6EAA+B;;AAE9D;AACA;AACA,oBAAoB,mBAAO,CAAC,yEAA6B;;AAEzD;AACA;AACA,gBAAgB,mBAAO,CAAC,6DAAuB;;AAE/C;;AAEA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;;AAET;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;;AAET;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;;AAET;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;;AAET;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,KAAK;;AAEL;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,CAAC;AACD;AACA,CAAC;;AAED,sB;;;;;;;;;;;ACplBA,gBAAgB,mBAAO,CAAC,0DAA0B;;;AAGlD,wBAAwB,mBAAO,CAAC,yEAA0B;AAC1D,yBAAyB,mBAAO,CAAC,2EAA2B;AAC5D,0BAA0B,mBAAO,CAAC,6EAA4B;AAC9D,kBAAkB,mBAAO,CAAC,2DAAmB;;;AAG7C,kBAAkB,mBAAO,CAAC,2DAAmB;AAC7C,gBAAgB,mBAAO,CAAC,uDAAiB;AACzC,qBAAqB,mBAAO,CAAC,iEAAsB;AACnD,iBAAiB,mBAAO,CAAC,yDAAkB;;;AAG3C,uBAAuB,mBAAO,CAAC,uEAAyB;AACxD,uBAAuB,mBAAO,CAAC,uEAAyB;AACxD,oBAAoB,mBAAO,CAAC,iEAAsB;AAClD,qBAAqB,mBAAO,CAAC,mEAAuB;AACpD,qBAAqB,mBAAO,CAAC,mEAAuB;AACpD,eAAe,mBAAO,CAAC,qDAAgB;;;AAGvC,kBAAkB,mBAAO,CAAC,2DAAmB;AAC7C,gBAAgB,mBAAO,CAAC,uDAAiB;;;AAGzC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,2B;;;;;;;;;;;AClDA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA,yCAAyC,QAAQ;AACjD;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,KAAK;;AAEL;;AAEA;;AAEA;;AAEA,KAAK;;AAEL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS;;AAET,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;;AAEA,mC;;;;;;;;;;;AChIA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA,oC;;;;;;;;;;;AC1CA,QAAQ,mBAAO,CAAC,0DAA0B;;AAE1C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,qC;;;;;;;;;;;ACxFA,WAAW,mBAAO,CAAC,8CAAoB;;AAEvC;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA,aAAa;AACb;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA,8CAA8C,OAAO;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,8CAA8C,OAAO;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,6B;;;;;;;;;;;ACzUA,WAAW,mBAAO,CAAC,8CAAoB;;AAEvC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA,6B;;;;;;;;;;;ACnTA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,2B;;;;;;;;;;;AC/DA,WAAW,mBAAO,CAAC,8CAAoB;AACvC,WAAW,mBAAO,CAAC,8CAAoB;;AAEvC;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;;AAEA;;AAEA;AACA;AACA,2FAA2F;AAC3F;AACA;AACA;AACA,gCAAgC,MAAM;AACtC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,6FAA6F;AAC7F;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2FAA2F;AAC3F,+BAA+B,UAAU;AACzC;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA,gC;;;;;;;;;;;AC9MA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;;;AAGL;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;;AAGL;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;;AAEA,4B;;;;;;;;;;;ACvGA,QAAQ,mBAAO,CAAC,gDAAqB;AACrC,QAAQ,mBAAO,CAAC,0DAA0B;AAC1C,WAAW,mBAAO,CAAC,8CAAoB;AACvC,WAAW,mBAAO,CAAC,8CAAoB;;AAEvC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA,kC;;;;;;;;;;;ACxSA,QAAQ,mBAAO,CAAC,gDAAqB;AACrC,QAAQ,mBAAO,CAAC,0DAA0B;AAC1C,WAAW,mBAAO,CAAC,8CAAoB;;AAEvC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,KAAK;;AAEL;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,KAAK;;AAEL;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,KAAK;;AAEL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,mBAAmB,YAAY;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;;AAEA;;;AAGA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,OAAO;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,OAAO;AAC7D;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,kC;;;;;;;;;;;ACzWA,WAAW,mBAAO,CAAC,8CAAoB;AACvC,QAAQ,mBAAO,CAAC,0DAA0B;;AAE1C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,+B;;;;;;;;;;;AChJA,WAAW,mBAAO,CAAC,8CAAoB;;AAEvC;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,iBAAiB;;AAEjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,aAAa;AACb;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,gC;;;;;;;;;;;ACvGA,QAAQ,mBAAO,CAAC,gDAAqB;AACrC,QAAQ,mBAAO,CAAC,0DAA0B;AAC1C,WAAW,mBAAO,CAAC,8CAAoB;AACvC,WAAW,mBAAO,CAAC,8CAAoB;;AAEvC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,aAAa;AAC7C;AACA;AACA,SAAS;AACT,gCAAgC,aAAa;AAC7C;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;;AAEA,gC;;;;;;;;;;;AChiBA,QAAQ,mBAAO,CAAC,0DAA0B;AAC1C,WAAW,mBAAO,CAAC,8CAAoB;AACvC,oBAAoB,mBAAO,CAAC,0EAA8B;;AAE1D;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb,SAAS;;AAET,KAAK;;AAEL;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,aAAa;AACb;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,OAAO;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;;AAEA,0B;;;;;;;;;;;ACppBA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,6B;;;;;;;;;;;AChDA,2BAA2B,mBAAO,CAAC,wFAAqC;AACxE,kBAAkB,mBAAO,CAAC,sEAA4B;AACtD,WAAW,mBAAO,CAAC,8CAAoB;;AAEvC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA,2B;;;;;;;;;;;ACzOA,WAAW,mBAAO,CAAC,8CAAoB;;AAEvC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,wB;;;;;;;;;;;ACjEA,aAAa,mBAAO,CAAC,kDAAsB;AAC3C,WAAW,mBAAO,CAAC,8CAAoB;;AAEvC;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;;AAEA;AACA,6CAA6C,OAAO;AACpD;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,OAAO;AACpD;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;;AAEA,CAAC;;AAED,sB;;;;;;;;;;;ACzKA,WAAW,mBAAO,CAAC,0CAAgB;;AAEnC,WAAW,mBAAO,CAAC,0CAAgB;AACnC,WAAW,mBAAO,CAAC,0CAAgB;AACnC,iBAAiB,mBAAO,CAAC,oFAAqC;;AAE9D;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,6B","file":"mbg.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"mbg\"] = factory();\n\telse\n\t\troot[\"mbg\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".tg-mbg {\\n  position: relative;\\n  overflow: hidden;\\n  width: 100%;\\n  height: 100%;\\n  outline: 0;\\n  padding: 0;\\n  margin: 0;\\n  z-index: 0;\\n  font-size: 14px;\\n  /*\\r\\n    ================================================\\r\\n    global box-sizing\\r\\n    */\\n  /*\\r\\n    ================================================\\r\\n    loading\\r\\n    */\\n  /*\\r\\n    ================================================\\r\\n    checkbox\\r\\n    */\\n  /*\\r\\n    ================================================\\r\\n    scrollbar\\r\\n    */\\n  /*\\r\\n    ================================================\\r\\n    scrollpane\\r\\n    */\\n  /*\\r\\n    ================================================\\r\\n    common css\\r\\n    */\\n  /*\\r\\n    ================================================\\r\\n    column table\\r\\n    */\\n  /*\\r\\n    ================================================\\r\\n    column\\r\\n    */\\n  /*\\r\\n    ================================================\\r\\n    column group\\r\\n    */\\n  /*\\r\\n    ================================================\\r\\n    column sort\\r\\n    */\\n  /* \\r\\n    ================================================\\r\\n    column line, column resize\\r\\n    */\\n  /*\\r\\n    ================================================\\r\\n    tree\\r\\n    */\\n  /*\\r\\n    ================================================\\r\\n    pane\\r\\n    */\\n  /*\\r\\n    ================================================\\r\\n    canvas\\r\\n    */\\n  /*\\r\\n    ================================================\\r\\n    row\\r\\n    */\\n  /*\\r\\n    ================================================\\r\\n    cell\\r\\n    */\\n  /*\\r\\n    ================================================\\r\\n    editor\\r\\n    */\\n  /* normal style for editor */ }\\n  .tg-mbg *,\\n  .tg-mbg *:before,\\n  .tg-mbg *:after {\\n    -webkit-box-sizing: border-box;\\n    -moz-box-sizing: border-box;\\n    box-sizing: border-box; }\\n  .tg-mbg svg {\\n    pointer-events: none; }\\n  .tg-mbg .tg-loading {\\n    display: none;\\n    pointer-events: none;\\n    position: absolute;\\n    width: 30px;\\n    height: 30px;\\n    left: 50%;\\n    top: 50%;\\n    margin-left: -15px;\\n    margin-top: -15px;\\n    font-size: 2px;\\n    z-index: 100; }\\n  .tg-mbg .tg-loading-item {\\n    height: 15em;\\n    left: 50%;\\n    position: absolute;\\n    top: 0;\\n    width: 2em;\\n    z-index: 0; }\\n\\n@keyframes tg-loading-animation {\\n  0% {\\n    height: 2em;\\n    top: 6.5em; }\\n  10% {\\n    height: 7em;\\n    top: 6.5em; }\\n  25% {\\n    height: 7em;\\n    top: 15em; }\\n  75% {\\n    height: 2em;\\n    top: 20em; }\\n  100% {\\n    height: 2em;\\n    top: 20em; } }\\n  .tg-mbg .tg-loading-item:after {\\n    animation-iteration-count: infinite;\\n    animation-name: tg-loading-animation;\\n    animation-timing-function: ease-out;\\n    background: #0077cf;\\n    border-radius: 2em;\\n    content: '';\\n    height: 0;\\n    position: absolute;\\n    transform-origin: 50% 100%;\\n    width: 2em; }\\n  .tg-mbg .tg-loading-static .tg-loading-item:after {\\n    animation: none;\\n    height: 7em;\\n    top: 20em; }\\n  .tg-mbg .tg-loading-item-0 {\\n    transform: rotate(0); }\\n  .tg-mbg .tg-loading-item-0:after {\\n    animation-delay: -.1s;\\n    animation-duration: 1.44s; }\\n  .tg-mbg .tg-loading-item-1 {\\n    transform: rotate(45deg); }\\n  .tg-mbg .tg-loading-item-1:after {\\n    animation-delay: 0s;\\n    animation-duration: 1.44s; }\\n  .tg-mbg .tg-loading-item-2 {\\n    transform: rotate(90deg); }\\n  .tg-mbg .tg-loading-item-2:after {\\n    animation-delay: .1s;\\n    animation-duration: 1.44s; }\\n  .tg-mbg .tg-loading-item-3 {\\n    transform: rotate(135deg); }\\n  .tg-mbg .tg-loading-item-3:after {\\n    animation-delay: .2s;\\n    animation-duration: 1.44s; }\\n  .tg-mbg .tg-loading-item-4 {\\n    transform: rotate(180deg); }\\n  .tg-mbg .tg-loading-item-4:after {\\n    animation-delay: .3s;\\n    animation-duration: 1.44s; }\\n  .tg-mbg .tg-loading-item-5 {\\n    transform: rotate(225deg); }\\n  .tg-mbg .tg-loading-item-5:after {\\n    animation-delay: .4s;\\n    animation-duration: 1.44s; }\\n  .tg-mbg .tg-loading-item-6 {\\n    transform: rotate(270deg); }\\n  .tg-mbg .tg-loading-item-6:after {\\n    animation-delay: .5s;\\n    animation-duration: 1.44s; }\\n  .tg-mbg .tg-loading-item-7 {\\n    transform: rotate(315deg); }\\n  .tg-mbg .tg-loading-item-7:after {\\n    animation-delay: .6s;\\n    animation-duration: 1.44s; }\\n  .tg-mbg .tg-loading-item-8 {\\n    transform: rotate(360deg); }\\n  .tg-mbg .tg-loading-item-8:after {\\n    animation-delay: .7s;\\n    animation-duration: 1.44s; }\\n  .tg-mbg .tg-checkbox {\\n    overflow: hidden;\\n    cursor: pointer; }\\n    .tg-mbg .tg-checkbox .tg-icon {\\n      transform: scale(0.8); }\\n    .tg-mbg .tg-checkbox .tg-icon-item {\\n      fill: #808080;\\n      display: none; }\\n    .tg-mbg .tg-checkbox .tg-select-none {\\n      display: block; }\\n  .tg-mbg .tg-checkbox.tg-selected .tg-select-checkbox {\\n    fill: #0077cf;\\n    display: block; }\\n  .tg-mbg .tg-checkbox.tg-mixed .tg-select-mixed {\\n    fill: #0077cf;\\n    display: block; }\\n  .tg-mbg .tg-checkbox:hover .tg-icon-item {\\n    fill: #005ba1; }\\n  .tg-mbg .tg-checkbox-all {\\n    height: 18px; }\\n  .tg-mbg .tg-scrollbar {\\n    position: absolute;\\n    overflow: hidden;\\n    z-index: 100; }\\n  .tg-mbg .tg-scrollbar-v {\\n    right: 0px;\\n    top: 0px; }\\n  .tg-mbg .tg-scrollbar-h {\\n    left: 0px;\\n    bottom: 0px; }\\n  .tg-mbg .tg-scrollbar-track {\\n    position: relative;\\n    overflow: hidden;\\n    background: #F9F9F9;\\n    width: 100%;\\n    height: 100%; }\\n  .tg-mbg .tg-scrollbar-thumb {\\n    user-select: none;\\n    -ms-user-select: none;\\n    -moz-user-select: none;\\n    -webkit-user-select: none;\\n    position: absolute;\\n    overflow: hidden;\\n    top: 0;\\n    left: 0;\\n    background: #999999;\\n    border-radius: 1px; }\\n  .tg-mbg .tg-scrollbar-thumb:hover {\\n    background: #888888; }\\n  .tg-mbg .tg-scrollbar-thumb-hold {\\n    background: #666666; }\\n  .tg-mbg .tg-scrollbar-thumb-hold:hover {\\n    background: #666666; }\\n  .tg-mbg .tg-scrollpane {\\n    position: relative;\\n    overflow: hidden;\\n    outline: none;\\n    margin: 0px 0px;\\n    padding: 0px 0px;\\n    border: none; }\\n  .tg-mbg .tg-scrollview {\\n    position: relative;\\n    overflow: hidden;\\n    width: 100%;\\n    height: 100%;\\n    margin: 0px 0px;\\n    padding: 0px 0px;\\n    border: none; }\\n  .tg-mbg .tg-scrollbody {\\n    position: absolute; }\\n  .tg-mbg .tg-focus {\\n    position: fixed;\\n    width: 0;\\n    height: 0;\\n    top: 0;\\n    left: 0;\\n    outline: 0; }\\n  .tg-mbg .tg-header {\\n    border-left: 0px;\\n    overflow: hidden;\\n    position: relative;\\n    cursor: default;\\n    width: 10000px; }\\n  .tg-mbg .tg-symbols {\\n    font-family: MorningstarSymbols; }\\n  .tg-mbg .tg-header-table {\\n    border-collapse: collapse;\\n    table-layout: fixed; }\\n    .tg-mbg .tg-header-table td {\\n      vertical-align: bottom;\\n      overflow: hidden;\\n      font-size: 12px;\\n      font-weight: bold;\\n      line-height: 16px;\\n      color: #555; }\\n  .tg-mbg .tg-column-item {\\n    position: relative;\\n    overflow: hidden; }\\n  .tg-mbg .tg-header-column {\\n    position: relative;\\n    overflow: hidden; }\\n  .tg-mbg .tg-column-name {\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    padding: 10px 5px 5px 5px;\\n    border-right: 1px solid #ffffff; }\\n  .tg-mbg .tg-nowrap {\\n    white-space: nowrap; }\\n  .tg-mbg .tg-align-left {\\n    text-align: left; }\\n  .tg-mbg .tg-align-center {\\n    text-align: center; }\\n  .tg-mbg .tg-align-right {\\n    text-align: right; }\\n    .tg-mbg .tg-align-right .tg-sort-indicator-icon {\\n      left: inherit;\\n      right: -1px; }\\n  .tg-mbg .tg-column-group-item {\\n    overflow: hidden; }\\n  .tg-mbg .tg-column-group-name {\\n    text-overflow: ellipsis;\\n    border-bottom: 1px solid #ccc;\\n    padding: 5px 0px;\\n    margin: 0px 5px;\\n    font-weight: bold; }\\n  .tg-mbg .tg-header-table-sortable .tg-column-name {\\n    padding-bottom: 20px; }\\n  .tg-mbg .tg-header-table-sortable .tg-column-group-name {\\n    padding-bottom: 5px; }\\n  .tg-mbg .tg-header-column-sortable {\\n    cursor: pointer; }\\n  .tg-mbg .tg-header-column-sorted {\\n    color: #000000; }\\n    .tg-mbg .tg-header-column-sorted .tg-sort-indicator {\\n      display: block; }\\n    .tg-mbg .tg-header-column-sorted .tg-tree-icon-all .tg-icon-item {\\n      fill: #000000; }\\n  .tg-mbg .tg-sort-placeholder {\\n    position: absolute;\\n    height: 17px;\\n    padding: 0px 5px;\\n    overflow: hidden;\\n    left: 0px;\\n    right: 0px;\\n    bottom: 0px; }\\n  .tg-mbg .tg-sort-indicator {\\n    position: relative;\\n    display: none;\\n    height: 7px;\\n    border-bottom: 1px solid #000000; }\\n  .tg-mbg .tg-sort-indicator-icon {\\n    position: absolute;\\n    cursor: pointer;\\n    width: 7px;\\n    height: 7px;\\n    left: 0px;\\n    right: inherit;\\n    top: 0px; }\\n  .tg-mbg .tg-sort-indicator-icon svg {\\n    display: block; }\\n  .tg-mbg .tg-sort-indicator-icon .tg-icon-item {\\n    fill: #000000;\\n    display: none; }\\n  .tg-mbg .tg-sort-asc .tg-sort-indicator-icon {\\n    top: 7px; }\\n  .tg-mbg .tg-sort-asc .tg-asc {\\n    display: block; }\\n  .tg-mbg .tg-sort-desc .tg-desc {\\n    display: block; }\\n  .tg-mbg .tg-column-line {\\n    position: absolute;\\n    z-index: 10;\\n    top: 0;\\n    left: 0;\\n    height: 100%;\\n    display: none; }\\n  .tg-mbg .tg-column-line-header {\\n    position: absolute;\\n    display: block;\\n    cursor: ew-resize;\\n    width: 11px;\\n    opacity: 0; }\\n  .tg-mbg .tg-column-line-item {\\n    position: absolute;\\n    display: block;\\n    width: 1px;\\n    top: 0px;\\n    bottom: 0px;\\n    height: 100%;\\n    opacity: 0; }\\n    .tg-mbg .tg-column-line-item.tg-hover {\\n      background-color: #e5e5e5;\\n      opacity: 1; }\\n    .tg-mbg .tg-column-line-item.tg-active {\\n      background-color: #0077cf;\\n      opacity: 1; }\\n  .tg-mbg .tg-ew-resize {\\n    cursor: ew-resize; }\\n    .tg-mbg .tg-ew-resize * {\\n      cursor: ew-resize; }\\n  .tg-mbg .tg-tree {\\n    position: relative;\\n    width: 100%; }\\n    .tg-mbg .tg-tree .tg-tree-level {\\n      padding-left: 15px; }\\n  .tg-mbg .tg-tree-row-number {\\n    position: absolute;\\n    left: 5px;\\n    top: 0px;\\n    text-align: right; }\\n  .tg-mbg .tg-tree-level {\\n    width: 100%; }\\n    .tg-mbg .tg-tree-level .tg-tree-item {\\n      padding-left: 0px; }\\n  .tg-mbg .tg-tree-item {\\n    width: 100%;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    position: relative;\\n    padding-left: 15px; }\\n  .tg-mbg .tg-tree-group {\\n    padding-left: 15px; }\\n  .tg-mbg .tg-tree-icon {\\n    overflow: hidden;\\n    cursor: pointer;\\n    display: inline-table;\\n    width: 15px;\\n    height: 25px;\\n    padding-left: 1px;\\n    text-align: left; }\\n  .tg-mbg .tg-tree-icon .tg-icon-item {\\n    fill: #000000;\\n    display: none; }\\n  .tg-mbg .tg-tree-icon-all {\\n    width: 10px; }\\n  .tg-mbg .tg-tree-icon-all .tg-icon-item {\\n    fill: #666; }\\n  .tg-mbg .tg-tree-icon-collapsed .tg-collapsed {\\n    display: block; }\\n  .tg-mbg .tg-tree-icon-expanded .tg-expanded {\\n    display: block; }\\n  .tg-mbg .tg-tree-header {\\n    position: absolute;\\n    top: 0px;\\n    left: 0px;\\n    padding-top: 10px;\\n    text-align: right;\\n    overflow: hidden; }\\n  .tg-mbg .tg-pane {\\n    position: absolute;\\n    outline: 0;\\n    overflow: hidden;\\n    width: 100%; }\\n  .tg-mbg .tg-pane-header {\\n    position: relative;\\n    outline: 0;\\n    overflow: hidden;\\n    display: block; }\\n  .tg-mbg .tg-pane-header .tg-pane {\\n    height: 100%; }\\n  .tg-mbg .tg-pane-bodyer {\\n    position: relative;\\n    outline: 0;\\n    width: 100%; }\\n  .tg-mbg .tg-canvas {\\n    position: absolute;\\n    outline: 0; }\\n  .tg-mbg .tg-frozen-h {\\n    overflow: hidden; }\\n    .tg-mbg .tg-frozen-h .tg-row.tg-total {\\n      background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAASRJREFUeNrEl8ENwjAMRc0GXMqZEToCI7AB6SaMwAaEDRiBEToCV9pLNwjfxZbSCKpKpA7Sp3WI/bBcYkNd97qEEAjXGhqgFtqKWlmrZY+HAuTEdmJ7sdVnjBH5xDFGnw0bfd/VRPSAntCBPi+292xX1a7FHo/7E9TA9rAd7q/QDbaDvRUfEp9BfI5RDPVpzDPVGFQCyuv8dreG8ueUBDCB8r4iUK2xOZT9yBA6eYCpBJTX9ADJejhIjNlDaUmmk2/9b6bqQyWg+nMyh8ZNIq3ppD45apo2GvNM4yZhDuUrlYD+HATWqGl6PphnGjcJc6gOAkug55zQcRBYAPW5oWN3KgHVfmwOjR+uNaFf+ziVgMaDwGyTWOOfhXmm6SBgCmW9BRgAXCcoCCvD8VgAAAAASUVORK5CYII=\\\");\\n      border-top: none;\\n      font-weight: bold;\\n      color: #151515; }\\n    .tg-mbg .tg-frozen-h .tg-row.tg-benchmark {\\n      border-top: none;\\n      color: #666666; }\\n    .tg-mbg .tg-frozen-h .tg-row.tg-cash {\\n      border-top: none;\\n      font-weight: bold;\\n      color: #151515; }\\n  .tg-mbg .tg-frozen-v {\\n    overflow: hidden; }\\n  .tg-mbg .tg-row {\\n    position: absolute;\\n    border: 0px;\\n    width: 100%;\\n    border-top: #666; }\\n    .tg-mbg .tg-row.tg-group {\\n      overflow: hidden;\\n      font-weight: bold;\\n      border-top: 1px solid #1e1e1e; }\\n      .tg-mbg .tg-row.tg-group .tg-tree-item {\\n        padding-left: 0px; }\\n      .tg-mbg .tg-row.tg-group .tg-cell.tg-align-left.tg-cell-negative {\\n        padding-left: 0px; }\\n      .tg-mbg .tg-row.tg-group .tg-cell.tg-align-right.tg-cell-negative {\\n        padding-right: 0px; }\\n    .tg-mbg .tg-row.tg-hover {\\n      background: #eaeaea; }\\n      .tg-mbg .tg-row.tg-hover .tg-cell .tg-cell-hover-icon {\\n        display: inherit; }\\n    .tg-mbg .tg-row.tg-draggable .tg-cell {\\n      cursor: move; }\\n    .tg-mbg .tg-row.tg-active {\\n      outline: none; }\\n    .tg-mbg .tg-row.tg-selected {\\n      z-index: 10;\\n      background: #dddddd; }\\n      .tg-mbg .tg-row.tg-selected.tg-hover {\\n        background: #cccccc; }\\n    .tg-mbg .tg-row.tg-focused {\\n      border-bottom: 1px solid #00a8e0; }\\n    .tg-mbg .tg-row.tg-focused + .tg-row {\\n      border-top-color: transparent; }\\n    .tg-mbg .tg-row.tg-highlight {\\n      color: initial;\\n      background: #87cefa;\\n      transition: all 0.2s; }\\n    .tg-mbg .tg-row.tg-waiting {\\n      opacity: 0.5; }\\n    .tg-mbg .tg-row.tg-dragging {\\n      opacity: 0.1; }\\n    .tg-mbg .tg-row.tg-dropping {\\n      background: #eaeaea; }\\n    .tg-mbg .tg-row.tg-clone {\\n      border: 1px dashed #cccccc;\\n      border-left: none;\\n      border-right: none;\\n      background: #ffffff;\\n      z-index: 9998;\\n      opacity: 0.5; }\\n    .tg-mbg .tg-row.tg-pane-first {\\n      border-top: none; }\\n    .tg-mbg .tg-row.tg-list-first {\\n      border-top: none; }\\n  .tg-mbg .tg-row-placeholder {\\n    position: absolute;\\n    width: 100%;\\n    border-top: 2px solid #00A8E1;\\n    z-index: 9999; }\\n  .tg-mbg .tg-cell {\\n    position: absolute;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    vertical-align: middle;\\n    z-index: 1;\\n    margin: 0;\\n    white-space: nowrap;\\n    cursor: default;\\n    padding: 0 5px;\\n    border-right: 1px solid #ffffff;\\n    height: 100%; }\\n    .tg-mbg .tg-cell:focus {\\n      outline: none; }\\n    .tg-mbg .tg-cell.tg-highlight {\\n      background: lightskyblue;\\n      transition: all 0.2s; }\\n    .tg-mbg .tg-cell.tg-flashing {\\n      border: 1px solid red !important; }\\n    .tg-mbg .tg-cell.tg-selected {\\n      background-color: beige; }\\n    .tg-mbg .tg-cell.tg-active {\\n      outline: none; }\\n    .tg-mbg .tg-cell.tg-align-left.tg-cell-negative {\\n      padding-left: 1px; }\\n    .tg-mbg .tg-cell.tg-align-right.tg-cell-negative {\\n      padding-right: 1px; }\\n  .tg-mbg .tg-cell-hover-icon {\\n    display: none; }\\n  .tg-mbg .tg-editable {\\n    /* text */\\n    /* list */ }\\n    .tg-mbg .tg-editable .tg-editor-text-container {\\n      z-index: 11;\\n      overflow: visible;\\n      height: 100%; }\\n    .tg-mbg .tg-editable .tg-editor-text {\\n      top: 0px;\\n      left: 0px;\\n      width: 100%;\\n      height: 100%;\\n      border-radius: 0;\\n      border: 0;\\n      outline: 0;\\n      border-bottom: 1px solid #999999;\\n      box-shadow: none;\\n      outline: none;\\n      background: #dddddd;\\n      font-size: 14px;\\n      color: #151515;\\n      padding: 0 3px; }\\n      .tg-mbg .tg-editable .tg-editor-text::-ms-clear {\\n        display: none; }\\n      .tg-mbg .tg-editable .tg-editor-text::-ms-reveal {\\n        display: none; }\\n    .tg-mbg .tg-editable .tg-editor-text:focus {\\n      border-color: #66afe9;\\n      outline: 0; }\\n    .tg-mbg .tg-editable .tg-editor-list-container {\\n      z-index: 11;\\n      overflow: visible;\\n      width: 100%;\\n      height: 100%; }\\n      .tg-mbg .tg-editable .tg-editor-list-container .select2-selection {\\n        border: 0;\\n        border-radius: 0;\\n        padding: 0;\\n        background: #eaeaea;\\n        height: 100%; }\\n        .tg-mbg .tg-editable .tg-editor-list-container .select2-selection .select2-selection__rendered {\\n          height: 100%;\\n          line-height: inherit; }\\n        .tg-mbg .tg-editable .tg-editor-list-container .select2-selection .select2-selection__arrow {\\n          height: 100%;\\n          top: -1px; }\\n    .tg-mbg .tg-editable .tg-editor-list {\\n      outline: 0; }\\n  .tg-mbg .tg-editor-cell-normal {\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    white-space: nowrap;\\n    padding: 0 3px; }\\n  .tg-mbg .tg-editor-cell-text {\\n    background: #dddddd;\\n    color: #151515;\\n    overflow: hidden;\\n    padding: 0 3px; }\\n  .tg-mbg .tg-editor-cell-list .select2-selection {\\n    border: 0;\\n    border-radius: 0;\\n    padding: 0;\\n    background: #eaeaea;\\n    height: 100%; }\\n    .tg-mbg .tg-editor-cell-list .select2-selection .select2-selection__rendered {\\n      height: 100%;\\n      line-height: inherit; }\\n    .tg-mbg .tg-editor-cell-list .select2-selection .select2-selection__arrow {\\n      height: 100%;\\n      top: -1px; }\\n\", \"\"]);\n\n// exports\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","var Util = require(\"./util.js\");\r\nvar OptionBase = require(\"./option-base.js\");\r\n\r\nvar Cache = OptionBase.extend({\r\n\r\n    previousTimestamp: 0,\r\n\r\n    defaultOption: function() {\r\n        return {\r\n            //default expires time 1d / 24 hours\r\n            expiresTime: 24 * 60 * 60 * 1000,\r\n            //default max size\r\n            maxSize: 1000\r\n        };\r\n    },\r\n\r\n    constructor: function(option) {\r\n        this.setOption(option);\r\n        this.init();\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    init: function() {\r\n        this.initExpiresTime();\r\n        this.initMaxSize();\r\n        this.empty();\r\n        return this;\r\n    },\r\n\r\n    initExpiresTime: function() {\r\n        var expiresTime = Util.tonum(this.option.expiresTime, true);\r\n        this.expiresTime = this.getExpiresTime(expiresTime);\r\n        return this;\r\n    },\r\n\r\n    getExpiresTime: function(expiresTime) {\r\n        //20 ms < expiresTime < 24 hours * 60 * 60 * 1000\r\n        expiresTime = Math.max(20, Math.min(24 * 60 * 60 * 1000, expiresTime));\r\n        return expiresTime;\r\n    },\r\n\r\n    initMaxSize: function() {\r\n        var maxSize = Util.tonum(this.option.maxSize, true);\r\n        //2 < maxSize < 10000\r\n        this.maxSize = Math.max(2, Math.min(10000, maxSize));\r\n        return this;\r\n    },\r\n\r\n    empty: function() {\r\n        this.data = {};\r\n        return this;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    key: function(arr) {\r\n        return arr.join(\"_\");\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    get: function(key) {\r\n        var item = this.data[key];\r\n        if (!item) {\r\n            return null;\r\n        }\r\n        //check item expires\r\n        var now = new Date().getTime();\r\n        if (now > item.expires) {\r\n            this.remove(key);\r\n            return null;\r\n        }\r\n\r\n        item.count += 1;\r\n        return item.data;\r\n    },\r\n\r\n    set: function(key, data, expiresTime) {\r\n        if (!key) {\r\n            return this;\r\n        }\r\n\r\n        if (Util.isnum(expiresTime)) {\r\n            expiresTime = this.getExpiresTime(expiresTime);\r\n        } else {\r\n            expiresTime = this.expiresTime;\r\n        }\r\n        var now = new Date().getTime();\r\n        var expires = now + expiresTime;\r\n\r\n        var item = {\r\n            expires: expires,\r\n            count: 0,\r\n            data: data\r\n        };\r\n\r\n        //previous\r\n        if (this.data[key]) {\r\n            this.remove(key);\r\n        }\r\n\r\n        //add\r\n        this.data[key] = item;\r\n\r\n        this.clean(now);\r\n\r\n        return this;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    remove: function(key) {\r\n        delete this.data[key];\r\n        return this;\r\n    },\r\n\r\n    removeByPrefix: function(prefix) {\r\n        if (!prefix) {\r\n            return this;\r\n        }\r\n        var keys = Object.keys(this.data);\r\n        for (var i = 0, l = keys.length; i < l; i++) {\r\n            var key = keys[i];\r\n            if (key.indexOf(prefix) === 0) {\r\n                this.remove(key);\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    clean: function(now) {\r\n        if (now - this.previousTimestamp < 1000) {\r\n            return this;\r\n        }\r\n        this.previousTimestamp = now;\r\n\r\n        this.cleanByExpires();\r\n        this.cleanBySize();\r\n\r\n        return this;\r\n    },\r\n\r\n    cleanByExpires: function() {\r\n        var now = new Date().getTime();\r\n        var keys = Object.keys(this.data);\r\n        for (var i = 0, l = keys.length; i < l; i++) {\r\n            var key = keys[i];\r\n            var item = this.data[key];\r\n            if (now > item.expires) {\r\n                this.remove(key);\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n\r\n    cleanBySize: function() {\r\n        var keys = Object.keys(this.data);\r\n        var size = keys.length;\r\n        if (size < this.maxSize) {\r\n            return this;\r\n        }\r\n\r\n        //sort by count\r\n        var list = [];\r\n        for (var i = 0; i < size; i++) {\r\n            var key = keys[i];\r\n            var item = this.data[key];\r\n            list.push({\r\n                key: key,\r\n                count: item.count\r\n            });\r\n        }\r\n        list.sort(function(a, b) {\r\n            return a.count - b.count;\r\n        });\r\n\r\n        list.length -= this.maxSize;\r\n\r\n        for (var j = 0, l = list.length; j < l; j++) {\r\n            this.remove(list[j].key);\r\n        }\r\n\r\n        return this;\r\n\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    destroy: function() {\r\n        this.empty();\r\n    },\r\n\r\n    toString: function() {\r\n        return \"[object Cache]\";\r\n    }\r\n});\r\n\r\nmodule.exports = Cache;","var $ = require(\"./query.js\");\r\n\r\nvar E = {\r\n    MOUSEDOWN: \"mousedown\",\r\n    MOUSEMOVE: \"mousemove\",\r\n    MOUSEUP: \"mouseup\",\r\n    //drag\r\n    DRAG_INIT: \"drag_init\",\r\n    DRAG_START: \"drag_start\",\r\n    DRAG_UPDATE: \"drag_update\",\r\n    DRAG_COMPLETE: \"drag_complete\"\r\n};\r\nvar Util = require(\"./util.js\");\r\n\r\nvar EventBase = require(\"./event-base.js\");\r\n\r\n//====================================================================================================\r\n/**\r\n * @constructor\r\n * @returns {Drag}\r\n */\r\n\r\nvar Drag = EventBase.extend({\r\n\r\n    E: E,\r\n    dragging: false,\r\n\r\n    constructor: function() {\r\n        this.init();\r\n    },\r\n\r\n    init: function() {\r\n        this.ns = \".drag_\" + Util.token(8);\r\n        this.MOUSEMOVE = E.MOUSEMOVE + this.ns;\r\n        this.MOUSEUP = E.MOUSEUP + this.ns;\r\n        this.initOption();\r\n        return this;\r\n    },\r\n\r\n    initOption: function() {\r\n        this.option = {\r\n            mouseStartX: 0,\r\n            mouseStartY: 0,\r\n            mousePreviousX: 0,\r\n            mousePreviousY: 0,\r\n            mouseCurrentX: 0,\r\n            mouseCurrentY: 0,\r\n            mouseOffsetX: 0,\r\n            mouseOffsetY: 0,\r\n            mouseMoveX: 0,\r\n            mouseMoveY: 0,\r\n            valid: false,\r\n            state: null\r\n        };\r\n    },\r\n\r\n    setOption: function(option) {\r\n        var o = this.option;\r\n        Object.keys(option).forEach(function(k) {\r\n            o[k] = option[k];\r\n        });\r\n        return this;\r\n    },\r\n\r\n    updateOption: function(e) {\r\n        //sometimes no event for example force complete previous\r\n        if (!e) {\r\n            return;\r\n        }\r\n        var o = this.option;\r\n        //keep previous position\r\n        o.mousePreviousX = o.mouseCurrentX;\r\n        o.mousePreviousY = o.mouseCurrentY;\r\n        //current position\r\n        o.mouseCurrentX = e.pageX;\r\n        o.mouseCurrentY = e.pageY;\r\n        //current offset from start\r\n        o.mouseOffsetX = o.mouseCurrentX - o.mouseStartX;\r\n        o.mouseOffsetY = o.mouseCurrentY - o.mouseStartY;\r\n        //position nothing change\r\n        o.valid = (o.mouseOffsetX === 0 && o.mouseOffsetY === 0) ? false : true;\r\n        //current move offset from previous\r\n        o.mouseMoveX = o.mouseCurrentX - o.mousePreviousX;\r\n        o.mouseMoveY = o.mouseCurrentY - o.mousePreviousY;\r\n    },\r\n\r\n    //============================================================================\r\n\r\n    start: function(option) {\r\n\r\n        this.previousHandler();\r\n\r\n        this.initOption();\r\n        this.setOption(option);\r\n\r\n        var o = this.option;\r\n        if (!o.e) {\r\n            return this;\r\n        }\r\n\r\n        //init target to event current target\r\n        if (!o.target) {\r\n            o.target = $(o.e.currentTarget);\r\n        }\r\n\r\n        //namespace event type for mouse move\r\n        var holder = $(window);\r\n        holder.unbind(this.ns);\r\n\r\n        var self = this;\r\n        //only one so no need ns events\r\n        holder.one(this.MOUSEUP, function(e) {\r\n            holder.unbind(self.ns);\r\n            self.dragCompleteHandler(e);\r\n        });\r\n\r\n        //namespaces events\r\n        holder.bind(this.MOUSEMOVE, function(e) {\r\n            self.dragUpdateHandler(e);\r\n        });\r\n\r\n        this.dragInitHandler(o.e);\r\n\r\n        return this;\r\n    },\r\n\r\n    //previous state clean\r\n    previousHandler: function() {\r\n        //if previous valid and do NOT complete then force to complete\r\n        var o = this.option;\r\n        if (o.valid && o.state !== E.DRAG_COMPLETE) {\r\n            this.dragCompleteHandler();\r\n        }\r\n    },\r\n\r\n    preventDefault: function(e) {\r\n        if (e && e.preventDefault) {\r\n            e.preventDefault();\r\n        }\r\n    },\r\n\r\n    //============================================================================\r\n\r\n    dragInitHandler: function(e) {\r\n        var o = this.option;\r\n        //start position\r\n        o.mouseStartX = e.pageX;\r\n        o.mouseStartY = e.pageY;\r\n        o.mouseCurrentX = o.mouseStartX;\r\n        o.mouseCurrentY = o.mouseStartY;\r\n        o.valid = false;\r\n        //mouse down but not drag start because the positon do not change\r\n        this.dragging = false;\r\n        //stop select\r\n        this.preventDefault(e);\r\n        o.state = E.DRAG_INIT;\r\n        this.trigger(E.DRAG_INIT, o);\r\n        return this;\r\n    },\r\n\r\n    dragUpdateHandler: function(e) {\r\n        this.updateOption(e);\r\n        var o = this.option;\r\n        //already start or update\r\n        if (o.state === E.DRAG_START || o.state === E.DRAG_UPDATE) {\r\n            //drag when mouse move after drag start\r\n            this.preventDefault(e);\r\n            o.state = E.DRAG_UPDATE;\r\n            this.trigger(E.DRAG_UPDATE, o);\r\n            return this;\r\n        }\r\n\r\n        if (!o.valid) {\r\n            return this;\r\n        }\r\n\r\n        //drag start when mouse move first time \r\n        this.dragging = true;\r\n        this.preventDefault(e);\r\n        o.state = E.DRAG_START;\r\n        this.trigger(E.DRAG_START, o);\r\n        return this;\r\n    },\r\n\r\n    dragCompleteHandler: function(e) {\r\n        this.updateOption(e);\r\n        var o = this.option;\r\n        //always complete, but valid could be true or false\r\n        this.dragging = false;\r\n        this.preventDefault(e);\r\n        o.state = E.DRAG_COMPLETE;\r\n        this.trigger(E.DRAG_COMPLETE, o);\r\n        return this;\r\n    },\r\n\r\n    //class print\r\n    toString: function() {\r\n        return \"[object Drag]\";\r\n    }\r\n\r\n});\r\n\r\n\r\nmodule.exports = Drag;","var Easing = {\r\n    Linear: {\r\n        None: function(k) {\r\n            return k;\r\n        }\r\n    }\r\n    /*\r\n    ,\r\n    Quadratic: {\r\n        In: function(k) {\r\n            return k * k;\r\n        },\r\n        Out: function(k) {\r\n            return k * (2 - k);\r\n        },\r\n        InOut: function(k) {\r\n            if ((k *= 2) < 1) {\r\n                return 0.5 * k * k;\r\n            }\r\n            return -0.5 * (--k * (k - 2) - 1);\r\n        }\r\n    },\r\n    Cubic: {\r\n        In: function(k) {\r\n            return k * k * k;\r\n        },\r\n        Out: function(k) {\r\n            return --k * k * k + 1;\r\n        },\r\n        InOut: function(k) {\r\n            if ((k *= 2) < 1) {\r\n                return 0.5 * k * k * k;\r\n            }\r\n            return 0.5 * ((k -= 2) * k * k + 2);\r\n        }\r\n    },\r\n    Quartic: {\r\n        In: function(k) {\r\n            return k * k * k * k;\r\n        },\r\n        Out: function(k) {\r\n            return 1 - (--k * k * k * k);\r\n        },\r\n        InOut: function(k) {\r\n            if ((k *= 2) < 1) {\r\n                return 0.5 * k * k * k * k;\r\n            }\r\n            return -0.5 * ((k -= 2) * k * k * k - 2);\r\n        }\r\n    },\r\n    Quintic: {\r\n        In: function(k) {\r\n            return k * k * k * k * k;\r\n        },\r\n        Out: function(k) {\r\n            return --k * k * k * k * k + 1;\r\n        },\r\n        InOut: function(k) {\r\n            if ((k *= 2) < 1) {\r\n                return 0.5 * k * k * k * k * k;\r\n            }\r\n            return 0.5 * ((k -= 2) * k * k * k * k + 2);\r\n        }\r\n    },\r\n    Circular: {\r\n        In: function(k) {\r\n            return 1 - Math.sqrt(1 - k * k);\r\n        },\r\n        Out: function(k) {\r\n            return Math.sqrt(1 - (--k * k));\r\n        },\r\n        InOut: function(k) {\r\n            if ((k *= 2) < 1) {\r\n                return -0.5 * (Math.sqrt(1 - k * k) - 1);\r\n            }\r\n            return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\r\n        }\r\n    }\r\n    */\r\n};\r\n\r\nmodule.exports = Easing;","var Extend = require(\"./extend.js\");\r\n\r\n//=====================================================================================\r\nvar Event = function(o) {\r\n    this.type = o.type;\r\n    this.data = o.data;\r\n    this.target = o.target;\r\n    this.currentTarget = o.target;\r\n    this.delegateTarget = o.target;\r\n    this.timeStamp = new Date().getTime();\r\n};\r\n\r\nEvent.prototype = {\r\n    constructor: Event,\r\n    isDefaultPrevented: false,\r\n    isPropagationStopped: false,\r\n    isImmediatePropagationStopped: false,\r\n    preventDefault: function() {\r\n        this.isDefaultPrevented = true;\r\n    },\r\n    stopPropagation: function() {\r\n        this.isPropagationStopped = true;\r\n    },\r\n    stopImmediatePropagation: function() {\r\n        this.isImmediatePropagationStopped = true;\r\n        this.stopPropagation();\r\n    }\r\n};\r\n\r\n//=====================================================================================\r\nfunction getEventItem(context, handler, option) {\r\n    context += \"\";\r\n    if (!context) {\r\n        return null;\r\n    }\r\n    option = option || {};\r\n    var arr = context.split(\".\");\r\n    var type = arr.shift();\r\n    var namespace = \"\";\r\n    if (arr.length) {\r\n        namespace = arr.join(\".\");\r\n    }\r\n    var eventItem = {\r\n        context: context,\r\n        type: type,\r\n        namespace: namespace,\r\n        handler: handler,\r\n        one: option.one,\r\n        prepend: option.prepend,\r\n        defaultEvent: option.defaultEvent\r\n    };\r\n    return eventItem;\r\n}\r\n/* eslint-disable complexity*/\r\nfunction getEventList(types, handler, option) {\r\n    if (!types) {\r\n        return [];\r\n    }\r\n\r\n    if (handler && typeof(handler) === \"object\") {\r\n        option = handler;\r\n    }\r\n    var list = [];\r\n\r\n    if (typeof(types) === \"object\") {\r\n        var keys = Object.keys(types);\r\n        keys.forEach(function(type) {\r\n            var eventItem = getEventItem(type, types[type], option);\r\n            if (eventItem) {\r\n                list.push(eventItem);\r\n            }\r\n        });\r\n        return list;\r\n    }\r\n\r\n    if (typeof(types) === \"string\") {\r\n        var arr = types.split(\" \");\r\n        arr.forEach(function(type) {\r\n            var eventItem = getEventItem(type, handler, option);\r\n            if (eventItem) {\r\n                list.push(eventItem);\r\n            }\r\n        });\r\n    }\r\n    return list;\r\n}\r\n/* eslint-enable*/\r\n//=====================================================================================\r\nfunction addEvent(eventListener, event, maxListeners) {\r\n    if (event.defaultEvent) {\r\n        eventListener.defaultEvent = event;\r\n        return;\r\n    }\r\n    if (eventListener.events.length >= maxListeners) {\r\n        var msg = \"Possible Event memory leak detected. \";\r\n        msg += \"More than \" + maxListeners + \" (max limit) listeners added. \";\r\n        msg += \"Use setMaxListeners(n) to increase limit.\";\r\n        console.warn(msg);\r\n        return;\r\n    }\r\n    if (event.prepend) {\r\n        eventListener.events.unshift(event);\r\n    } else {\r\n        eventListener.events.push(event);\r\n    }\r\n}\r\n\r\nfunction addEvents(eventListeners, eventList, maxListeners) {\r\n    eventList.forEach(function(event) {\r\n        var type = event.type;\r\n        if (typeof(eventListeners[type]) === \"undefined\") {\r\n            eventListeners[type] = {\r\n                events: [],\r\n                defaultEvent: null\r\n            };\r\n        }\r\n        var handler = event.handler;\r\n        if (typeof(handler) !== \"function\") {\r\n            return;\r\n        }\r\n        var eventListener = eventListeners[type];\r\n        addEvent(eventListener, event, maxListeners);\r\n    });\r\n}\r\n\r\n//=====================================================================================\r\n\r\nfunction removeEventByDefault(eventListeners, type) {\r\n    var eventListener = eventListeners[type];\r\n    if (!eventListener) {\r\n        return;\r\n    }\r\n    if (eventListener.defaultEvent) {\r\n        eventListener.defaultEvent = null;\r\n    }\r\n}\r\n\r\nfunction removeEventByNamespace(eventListeners, namespace) {\r\n    var types = Object.keys(eventListeners);\r\n    types.forEach(function(type) {\r\n        var eventListener = eventListeners[type];\r\n        var newEvents = [];\r\n        eventListener.events.forEach(function(item) {\r\n            if (item && item.namespace !== namespace) {\r\n                newEvents.push(item);\r\n            }\r\n        });\r\n        eventListener.events = newEvents;\r\n    });\r\n}\r\n\r\nfunction removeEventByHandler(eventListeners, type, handler) {\r\n    var eventListener = eventListeners[type];\r\n    if (!eventListener) {\r\n        return;\r\n    }\r\n    var newEvents = [];\r\n    eventListener.events.forEach(function(item) {\r\n        if (item && item.handler !== handler) {\r\n            newEvents.push(item);\r\n        }\r\n    });\r\n    eventListener.events = newEvents;\r\n}\r\n\r\nfunction removeEventByType(eventListeners, type) {\r\n    var eventListener = eventListeners[type];\r\n    if (!eventListener) {\r\n        return;\r\n    }\r\n    if (eventListener.defaultEvent) {\r\n        eventListener.events = [];\r\n    } else {\r\n        delete eventListeners[type];\r\n    }\r\n}\r\n\r\nfunction removeEvent(eventListeners, event) {\r\n    var type = event.type;\r\n    if (event.defaultEvent) {\r\n        removeEventByDefault(eventListeners, type);\r\n        return;\r\n    }\r\n    var namespace = event.namespace;\r\n    if (!type && namespace) {\r\n        removeEventByNamespace(eventListeners, namespace);\r\n        return;\r\n    }\r\n    var handler = event.handler;\r\n    if (typeof(handler) === \"function\") {\r\n        removeEventByHandler(eventListeners, type, handler);\r\n        return;\r\n    }\r\n    removeEventByType(eventListeners, type);\r\n}\r\n\r\nfunction removeEvents(eventListeners, eventList) {\r\n    eventList.forEach(function(event) {\r\n        removeEvent(eventListeners, event);\r\n    });\r\n}\r\n\r\nfunction removeAllEvents(eventListeners) {\r\n    var types = Object.keys(eventListeners);\r\n    types.forEach(function(type) {\r\n        removeEventByType(eventListeners, type);\r\n    });\r\n}\r\n\r\n//=====================================================================================\r\nfunction sendEventList(eventListener, event, target, data) {\r\n\r\n    //call each handler if not stopped\r\n    var events = eventListener.events;\r\n    for (var i = 0; i < events.length; i++) {\r\n        var item = events[i];\r\n        event.handleObj = item;\r\n        event.namespace = item.namespace;\r\n        item.handler.call(target, event, data);\r\n        if (event.isPropagationStopped) {\r\n            break;\r\n        }\r\n    }\r\n\r\n    //remove \"one\" event\r\n    var newEvents = [];\r\n    events.forEach(function(item) {\r\n        if (item && !item.one) {\r\n            newEvents.push(item);\r\n        }\r\n    });\r\n    eventListener.events = newEvents;\r\n\r\n}\r\n\r\nfunction sendEventDefault(eventListener, event, target, data) {\r\n    var defaultEvent = eventListener.defaultEvent;\r\n    if (!defaultEvent || event.isDefaultPrevented) {\r\n        return;\r\n    }\r\n    defaultEvent.handler.call(target, event, data);\r\n}\r\n\r\nfunction sendEvent(eventListeners, type, data, target) {\r\n    var eventListener = eventListeners[type];\r\n    if (!eventListener) {\r\n        return;\r\n    }\r\n    var event = new Event({\r\n        type: type,\r\n        target: target,\r\n        data: data\r\n    });\r\n    sendEventList(eventListener, event, target, data);\r\n    sendEventDefault(eventListener, event, target, data);\r\n}\r\n\r\n//=====================================================================================\r\nvar EventBase = Extend.extend({\r\n\r\n    maxListeners: 10,\r\n\r\n    setMaxListeners: function(n) {\r\n        this.maxListeners = Number(n) || 10;\r\n    },\r\n\r\n    getMaxListeners: function() {\r\n        return this.maxListeners;\r\n    },\r\n\r\n    getEventListeners: function() {\r\n        if (!this.eventListeners) {\r\n            this.eventListeners = {};\r\n        }\r\n        return this.eventListeners;\r\n    },\r\n\r\n    //=======================================================\r\n\r\n    bind: function(types, handler, option) {\r\n        var eventList = getEventList(types, handler, option);\r\n        if (!eventList.length) {\r\n            return this;\r\n        }\r\n        var eventListeners = this.getEventListeners();\r\n        addEvents(eventListeners, eventList, this.maxListeners);\r\n        return this;\r\n    },\r\n\r\n    on: function() {\r\n        return this.bind.apply(this, arguments);\r\n    },\r\n\r\n    //=======================================================\r\n\r\n    one: function(types, handler) {\r\n        this.bind(types, handler, {\r\n            one: true\r\n        });\r\n        return this;\r\n    },\r\n\r\n    once: function() {\r\n        return this.one.apply(this, arguments);\r\n    },\r\n\r\n    //=======================================================\r\n\r\n    unbind: function(types, handler, option) {\r\n        var eventListeners = this.getEventListeners();\r\n        if (!arguments.length) {\r\n            removeAllEvents(eventListeners);\r\n            return this;\r\n        }\r\n        var eventList = getEventList(types, handler, option);\r\n        if (!eventList.length) {\r\n            return this;\r\n        }\r\n        removeEvents(eventListeners, eventList);\r\n        return this;\r\n    },\r\n\r\n    off: function() {\r\n        return this.unbind.apply(this, arguments);\r\n    },\r\n\r\n    //=======================================================\r\n\r\n    trigger: function(type, data) {\r\n        var eventListeners = this.getEventListeners();\r\n        sendEvent(eventListeners, type, data, this);\r\n        return this;\r\n    },\r\n\r\n    emit: function() {\r\n        return this.trigger.apply(this, arguments);\r\n    },\r\n\r\n    //=======================================================\r\n\r\n    toString: function() {\r\n        return \"[object EventBase]\";\r\n    }\r\n\r\n});\r\n\r\nmodule.exports = EventBase;","//All Events\r\nvar EventType = {\r\n\r\n    //header\r\n    onHeaderRendered: \"onHeaderRendered\",\r\n\r\n    onHeaderMouseOver: \"onHeaderMouseOver\",\r\n    onHeaderMouseOut: \"onHeaderMouseOut\",\r\n    onHeaderMouseEnter: \"onHeaderMouseEnter\",\r\n    onHeaderMouseLeave: \"onHeaderMouseLeave\",\r\n\r\n    onHeaderClick: \"onHeaderClick\",\r\n    onHeaderDblClick: \"onHeaderDblClick\",\r\n    onHeaderContextMenu: \"onHeaderContextMenu\",\r\n\r\n    onHeadersMouseMove: \"onHeadersMouseMove\",\r\n    onHeadersMouseEnter: \"onHeadersMouseEnter\",\r\n    onHeadersMouseLeave: \"onHeadersMouseLeave\",\r\n\r\n    onHeadersTouchStart: \"onHeadersTouchStart\",\r\n\r\n    onSort: \"onSort\",\r\n\r\n    //column\r\n    onColumnWidthChanged: \"onColumnWidthChanged\",\r\n\r\n    onColumnWidthDragStart: \"onColumnWidthDragStart\",\r\n    onColumnWidthDragUpdate: \"onColumnWidthDragUpdate\",\r\n    onColumnWidthDragComplete: \"onColumnWidthDragComplete\",\r\n    onColumnWidthDropped: \"onColumnWidthDropped\",\r\n\r\n    //row\r\n    onRowMouseEnter: \"onRowMouseEnter\",\r\n    onRowMouseLeave: \"onRowMouseLeave\",\r\n\r\n    onRowRequestSubs: \"onRowRequestSubs\",\r\n\r\n    onRowDragStart: \"onRowDragStart\",\r\n    onRowDragUpdate: \"onRowDragUpdate\",\r\n    onRowDragComplete: \"onRowDragComplete\",\r\n    onRowDropped: \"onRowDropped\",\r\n\r\n    onRowAdded: \"onRowAdded\",\r\n    onRowRemoved: \"onRowRemoved\",\r\n\r\n    onRowExpand: \"onRowExpand\",\r\n    onRowCollapse: \"onRowCollapse\",\r\n\r\n    //cell\r\n\r\n    onCellRendered: \"onCellRendered\",\r\n\r\n    onCellMouseOver: \"onCellMouseOver\",\r\n    onCellMouseOut: \"onCellMouseOut\",\r\n    onCellMouseEnter: \"onCellMouseEnter\",\r\n    onCellMouseLeave: \"onCellMouseLeave\",\r\n\r\n    onClick: \"onClick\",\r\n    onDblClick: \"onDblClick\",\r\n    onContextMenu: \"onContextMenu\",\r\n\r\n    //scroll\r\n    onMouseWheel: \"onMouseWheel\",\r\n    onScroll: \"onScroll\",\r\n    onScrollStatusChanged: \"onScrollStatusChanged\",\r\n\r\n    onKeyDown: \"onKeyDown\",\r\n\r\n    //cell tree\r\n    onTreeIconClick: \"onTreeIconClick\",\r\n    onTreeIconAllClick: \"onTreeIconAllClick\",\r\n\r\n    onCheckboxClick: \"onCheckboxClick\",\r\n    onCheckboxAllClick: \"onCheckboxAllClick\",\r\n    onSelectedChanged: \"onSelectedChanged\",\r\n\r\n    onFocusedChanged: \"onFocusedChanged\",\r\n\r\n    //active\r\n    onActiveCellChanged: \"onActiveCellChanged\",\r\n\r\n    //editor\r\n    onCellEditStart: \"onCellEditStart\",\r\n    onCellEditRendered: \"onCellEditRendered\",\r\n    onCellEditValueChanging: \"onCellEditValueChanging\",\r\n    onCellEditValueChanged: \"onCellEditValueChanged\",\r\n    onCellEditComplete: \"onCellEditComplete\",\r\n    onCellEditError: \"onCellEditError\",\r\n    onCellEditDestroy: \"onCellEditDestroy\",\r\n\r\n    //other\r\n    onRenderStart: \"onRenderStart\",\r\n    onRenderUpdate: \"onRenderUpdate\",\r\n    onRenderComplete: \"onRenderComplete\",\r\n    onDestroy: \"onDestroy\"\r\n\r\n};\r\n\r\nmodule.exports = EventType;","function mergeProps(target, list) {\r\n    for (var i = 0, l = list.length; i < l; i++) {\r\n        var item = list[i];\r\n        if (!item) {\r\n            continue;\r\n        }\r\n        for (var k in item) {\r\n            if (target[k] !== item[k]) {\r\n                target[k] = item[k];\r\n            }\r\n        }\r\n    }\r\n    return target;\r\n}\r\n\r\nvar Extend = function() {\r\n\r\n};\r\n\r\nExtend.extend = function(protoProps, staticProps) {\r\n\r\n    var Super = this;\r\n\r\n    //============================================================\r\n    //constructor\r\n    var Sub = function() {\r\n        return Super.apply(this, arguments);\r\n    };\r\n\r\n    //if custom constructor\r\n    if (protoProps && protoProps.hasOwnProperty(\"constructor\") && typeof(protoProps.constructor) === 'function') {\r\n        Sub = protoProps.constructor;\r\n    }\r\n\r\n    //============================================================\r\n\r\n    //add static properties to the constructor\r\n    mergeProps(Sub, [Super, staticProps]);\r\n\r\n    //============================================================\r\n    //prototype handler\r\n\r\n    var parentProps = Object.create(Super.prototype);\r\n    parentProps.constructor = Sub;\r\n\r\n    mergeProps(Sub.prototype, [parentProps, protoProps]);\r\n\r\n    //============================================================\r\n\r\n    return Sub;\r\n\r\n};\r\n\r\nExtend.mixin = function() {\r\n    var protoProps = mergeProps({}, arguments);\r\n    return Extend.extend.call(this, protoProps);\r\n};\r\n\r\nmodule.exports = Extend;","var SVG = require('./svg.js');\r\n\r\n//========================================================================\r\n\r\nvar checkbox_border = \"M150,450 q0,-300 300,-300 h1100 q300,0 300,300 v1100 q0,300 -300,300 h-1100 q-300,0 -300,-300 v-1100 z\";\r\nvar checkbox = {\r\n    width: 2000,\r\n    height: 2000,\r\n    data: [{\r\n        \"class\": \"tg-icon-item tg-select-none\",\r\n        d: checkbox_border + \" M450,250 q-200,0 -200,200 v1100 q0,200 200,200 h1100 q200,0 200,-200 v-1100 q0,-200 -200,-200 h-1100 z\"\r\n    }, {\r\n        \"class\": \"tg-icon-item tg-select-checkbox\",\r\n        d: checkbox_border + \" M1550 450 l-660 950-370-360-70 70 450 440 730-1050 z\"\r\n    }, {\r\n        \"class\": \"tg-icon-item tg-select-mixed\",\r\n        d: checkbox_border + \" M400 950 v100 h1200 v-100 z\"\r\n    }]\r\n};\r\n\r\n//========================================================================\r\n\r\nvar tree_icon = {\r\n    width: 2000,\r\n    height: 2000,\r\n    data: [{\r\n        \"class\": \"tg-icon-item tg-collapsed\",\r\n        d: \"M0,0 l2000,1000 l-2000,1000 z\"\r\n    }, {\r\n        \"class\": \"tg-icon-item tg-expanded\",\r\n        d: \"M0,0 l1000,2000 l1000,-2000 z\"\r\n    }]\r\n};\r\n\r\n//========================================================================\r\n\r\nvar sort_icon = {\r\n    width: 2000,\r\n    height: 2000,\r\n    data: [{\r\n        \"class\": \"tg-icon-item tg-asc\",\r\n        d: \"M0,0 l1000,2000 l1000,-2000 z\"\r\n    }, {\r\n        \"class\": \"tg-icon-item tg-desc\",\r\n        d: \"M1000,0 l-1000,2000 l2000,0 z\"\r\n    }]\r\n};\r\n\r\n//========================================================================\r\n\r\nvar icons = {\r\n    checkbox: checkbox,\r\n    tree_icon: tree_icon,\r\n    sort_icon: sort_icon\r\n};\r\n\r\nvar cache = {};\r\n\r\nvar Icon = {\r\n\r\n    icons: icons,\r\n\r\n    createIcon: function(data, option) {\r\n        if (!data) {\r\n            return null;\r\n        }\r\n        var svg = new SVG();\r\n        if (typeof(data) !== \"object\") {\r\n            data = icons[data];\r\n        }\r\n        svg.draw(data, option);\r\n        return svg;\r\n    },\r\n\r\n    getIcon: function(type, option) {\r\n        var icon = Icon.createIcon(type, option);\r\n        if (icon) {\r\n            return icon.svg_root;\r\n        }\r\n        return \"\";\r\n    },\r\n\r\n    getIconString: function(type, option, cacheId) {\r\n        if (cacheId && cache[cacheId]) {\r\n            return cache[cacheId];\r\n        }\r\n        var icon = Icon.createIcon(type, option);\r\n        if (icon) {\r\n            var str = icon.toXMLString();\r\n            if (cacheId) {\r\n                cache[cacheId] = str;\r\n            }\r\n            return str;\r\n        }\r\n        return \"\";\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = Icon;","/* eslint-disable complexity*/\r\n//if is plain object or array\r\nvar isObject = function(obj) {\r\n    if (!obj || typeof(obj) !== \"object\" || typeof(obj.constructor) !== \"function\") {\r\n        return false;\r\n    }\r\n    var isAO = function(o) {\r\n        //remove d3 object\r\n        if (o.attr) {\r\n            return false;\r\n        }\r\n        //does not need toString in Array\r\n        if (o.constructor === Array) {\r\n            return true;\r\n        }\r\n        if (o.constructor === Object && typeof(o.toString) === \"function\" && o.toString() === \"[object Object]\") {\r\n            //remove like Math Window ...\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    if (isAO(obj)) {\r\n        return true;\r\n    }\r\n\r\n    return false;\r\n};\r\n/* eslint-enable*/\r\nmodule.exports = isObject;","var isObject = require('./is-object.js');\r\n\r\nvar merge;\r\n\r\nvar mergeArray = function(item, base, deep) {\r\n    //merge array to base\r\n    var size = item.length;\r\n    for (var k = 0; k < size; k++) {\r\n        var vk = item[k];\r\n        if (deep && isObject(vk)) {\r\n            base[k] = merge(base[k], vk);\r\n        } else {\r\n            base[k] = vk;\r\n        }\r\n    }\r\n    //length fixing for array\r\n    base.length = size;\r\n};\r\n\r\nvar mergeObject = function(item, base, deep) {\r\n    //merge object to base\r\n    Object.keys(item).forEach(function(n) {\r\n        var v = item[n];\r\n        if (base.hasOwnProperty(n) && deep && isObject(v)) {\r\n            base[n] = merge(base[n], v);\r\n        } else {\r\n            base[n] = v;\r\n        }\r\n    });\r\n};\r\n\r\nvar mergeAO = function(item, base, deep) {\r\n    //merge to base\r\n    if (item instanceof Array) {\r\n        mergeArray(item, base, deep);\r\n    } else {\r\n        mergeObject(item, base, deep);\r\n    }\r\n};\r\n\r\nvar mergeList = function(len, arg, deep) {\r\n    //base merge result\r\n    var base = null;\r\n    for (var i = 0; i < len; i++) {\r\n        var item = arg[i];\r\n        //only for valid object or array\r\n        if (!isObject(item)) {\r\n            continue;\r\n        }\r\n        //base type depend on first parameter\r\n        if (base === null) {\r\n            base = (item instanceof Array) ? [] : {};\r\n        }\r\n        mergeAO(item, base, deep);\r\n    }\r\n    return base;\r\n};\r\n\r\n//merge JSON\r\nmerge = function() {\r\n    var arg = arguments;\r\n    var len = arg.length;\r\n    //no parameters\r\n    if (!len) {\r\n        return {};\r\n    }\r\n    //deep merge depend on last parameter \r\n    var deep = true;\r\n    if (arg[len - 1] === false) {\r\n        deep = false;\r\n    }\r\n\r\n    var base = mergeList(len, arg, deep);\r\n\r\n    return base;\r\n};\r\n\r\nmodule.exports = merge;","var OptionBase = require(\"./option-base.js\");\r\nvar Util = require('./util.js');\r\nvar Easing = require('./easing.js');\r\n\r\nvar E = {\r\n    MOTION_BEFORE: \"motion_before\",\r\n    MOTION_START: \"motion_start\",\r\n    MOTION_UPDATE: \"motion_update\",\r\n    MOTION_COMPLETE: \"motion_complete\",\r\n    MOTION_STOP: \"motion_stop\"\r\n};\r\n\r\n\r\nvar Motion = OptionBase.extend({\r\n\r\n    //if stopped then stop everything\r\n    stopped: true,\r\n\r\n    constructor: function() {\r\n        this.initRequestAnimationFrame();\r\n        if (arguments.length) {\r\n            this.setOption.apply(this, arguments);\r\n        }\r\n    },\r\n\r\n    defaultOption: function() {\r\n        return {\r\n            //default is Easing.linear\r\n            easing: null,\r\n            //delay time before run\r\n            delay: 0,\r\n            //total time\r\n            duration: 100,\r\n\r\n            //from data\r\n            from: 0,\r\n            //till data\r\n            till: 1,\r\n            //current data(private)\r\n            data: 0\r\n        };\r\n    },\r\n\r\n    //init requestAnimationFrame\r\n    initRequestAnimationFrame: function() {\r\n        if (window.requestAnimationFrame) {\r\n            this.requestAnimationFrame = function(callback) {\r\n                return window.requestAnimationFrame(callback);\r\n            };\r\n            this.cancelAnimationFrame = function(id) {\r\n                window.cancelAnimationFrame(id);\r\n            };\r\n            return;\r\n        }\r\n\r\n        this.requestAnimationFrame = function(callback) {\r\n            return setTimeout(callback, 16);\r\n        };\r\n        this.cancelAnimationFrame = function(id) {\r\n            clearTimeout(id);\r\n        };\r\n\r\n    },\r\n\r\n    stop: function() {\r\n        if (this.stopped) {\r\n            return this;\r\n        }\r\n        //force to till info, but not call complete function\r\n        if (arguments[0]) {\r\n            this.update(this.option.till);\r\n        }\r\n        //stop everything now\r\n        this.stopped = true;\r\n        clearTimeout(this.timeout);\r\n        this.cancelAnimationFrame(this.time_loop);\r\n        this.trigger(E.MOTION_STOP);\r\n        return this;\r\n    },\r\n\r\n    start: function() {\r\n        if (arguments.length) {\r\n            this.setOption.apply(this, arguments);\r\n        }\r\n\r\n        this.option = this.getOption();\r\n\r\n        this.stopped = false;\r\n        this.trigger(E.MOTION_BEFORE);\r\n        if (this.stopped) {\r\n            return this;\r\n        }\r\n\r\n        var delay = Util.tonum(this.option.delay, true);\r\n\r\n        if (delay > 0) {\r\n            var self = this;\r\n            this.timeout = setTimeout(function() {\r\n                self.startNow();\r\n            }, delay);\r\n        } else {\r\n            this.startNow();\r\n        }\r\n    },\r\n\r\n    getEasing: function(easing) {\r\n        if (typeof(easing) !== \"function\") {\r\n            easing = Util.getValue(Easing, easing, Easing.Linear.None);\r\n        }\r\n        return easing;\r\n    },\r\n\r\n    startNow: function() {\r\n        //if call stop before delay time\r\n        if (this.stopped) {\r\n            return this;\r\n        }\r\n        //ready\r\n        var o = this.option;\r\n        this.duration = Util.tonum(o.duration, true) || 100;\r\n        this.easing = this.getEasing(o.easing);\r\n        //console.log(this.easing);\r\n        //start callback, maybe cost musch time outside\r\n        this.trigger(E.MOTION_START);\r\n        //if call stop in start callback\r\n        if (this.stopped) {\r\n            return this;\r\n        }\r\n\r\n        //init start time\r\n        this.time = null;\r\n\r\n        this.runAnimation();\r\n\r\n        return this;\r\n    },\r\n\r\n    runAnimation: function() {\r\n        var self = this;\r\n        this.time_loop = this.requestAnimationFrame(function() {\r\n            self.loop();\r\n        });\r\n        return this;\r\n    },\r\n\r\n    loop: function() {\r\n        //if call stop in running\r\n        if (this.stopped) {\r\n            this.cancelAnimationFrame(this.time_loop);\r\n            return this;\r\n        }\r\n        //====================================\r\n        //update\r\n        if (!this.time) {\r\n            this.time = new Date().getTime();\r\n        }\r\n        var o = this.option;\r\n        var now = new Date().getTime();\r\n        var t = now - this.time;\r\n        var d = this.duration;\r\n        if (t < d) {\r\n            var k = t / d;\r\n            var p = this.easing.call(this, k);\r\n            var data = this.calculate(p, o.from, o.till, o.from);\r\n            //update callback\r\n            this.update(data);\r\n            this.runAnimation();\r\n            return this;\r\n        }\r\n        //====================================\r\n        //finish\r\n        this.cancelAnimationFrame(this.time_loop);\r\n        //last time update callback\r\n        this.update(o.till);\r\n        //complete callback\r\n        this.complete();\r\n        return this;\r\n    },\r\n\r\n    calculate_array: function(p, from, till, self) {\r\n        //if array\r\n        var v = [];\r\n        for (var i = 0, l = from.length; i < l; i++) {\r\n            if (till[i] === undefined || from[i] === self) {\r\n                v[i] = from[i];\r\n            } else {\r\n                v[i] = this.calculate(p, from[i], till[i], self);\r\n            }\r\n        }\r\n        return v;\r\n    },\r\n\r\n    calculate_object: function(p, from, till, self) {\r\n        //if object\r\n        var v = {};\r\n        for (var k in from) {\r\n            if (till[k] === undefined || from[k] === self) {\r\n                v[k] = from[k];\r\n            } else {\r\n                v[k] = this.calculate(p, from[k], till[k], self);\r\n            }\r\n        }\r\n        return v;\r\n    },\r\n\r\n    /* eslint-disable max-statements,complexity */\r\n    //stop loop calculate if back to self\r\n    calculate: function(p, from, till, self) {\r\n        if (typeof(from) === \"object\" && typeof(till) === \"object\") {\r\n            if (from instanceof Array && till instanceof Array) {\r\n                return this.calculate_array(p, from, till, self);\r\n            } else {\r\n                return this.calculate_object(p, from, till, self);\r\n            }\r\n        } else if (Util.isnum(from) && Util.isnum(till)) {\r\n            //must be number\r\n            var v = (till - from) * p + from;\r\n            return v;\r\n        } else {\r\n            //just return from value if NOT number\r\n            return from;\r\n        }\r\n    },\r\n    /* eslint-enable */\r\n\r\n    update: function(data) {\r\n        this.data = data;\r\n        this.trigger(E.MOTION_UPDATE, data);\r\n        return this;\r\n    },\r\n\r\n    complete: function() {\r\n        this.trigger(E.MOTION_COMPLETE);\r\n        return this;\r\n    },\r\n\r\n    toString: function() {\r\n        return \"[object Motion]\";\r\n    }\r\n});\r\n\r\nmodule.exports = Motion;","var merge = require(\"./merge.js\");\r\nvar EventBase = require(\"./event-base.js\");\r\n\r\nvar OptionBase = EventBase.extend({\r\n    option: null,\r\n    defaultOption: function() {\r\n        return {};\r\n    },\r\n    setOption: function() {\r\n        this.option = this.getOption.apply(this, arguments);\r\n        return this;\r\n    },\r\n    getOption: function() {\r\n        var option = this.option;\r\n        //default option from class self\r\n        var def_option = this.defaultOption();\r\n        //merge option\r\n        if (arguments.length && arguments[0]) {\r\n            //new option form custom\r\n            var new_option = arguments[0];\r\n            //if append the option to current option\r\n            if (arguments[1]) {\r\n                def_option = this.option;\r\n            }\r\n            option = merge(def_option, new_option);\r\n        }\r\n        return option || def_option;\r\n    }\r\n});\r\n\r\nmodule.exports = OptionBase;","var query = window.jQuery || window.$;\r\n\r\n// make sure required JavaScript modules are loaded\r\nif (typeof(query) === \"undefined\") {\r\n    throw \"Requires jQuery module to be loaded\";\r\n}\r\n\r\nmodule.exports = query;","//http://demo.nimius.net/debounce_throttle/\r\n\r\nvar Rhythm = function(context) {\r\n    this.context = context;\r\n    this.delay = 100;\r\n    this.callback = function() {};\r\n    this.arguments = [];\r\n};\r\n\r\nRhythm.prototype = {\r\n\r\n    constructor: Rhythm,\r\n\r\n    destroy: function() {\r\n        clearTimeout(this.timeout);\r\n        this.context = null;\r\n        this.delay = null;\r\n        this.callback = null;\r\n        this.arguments = null;\r\n    },\r\n\r\n    changeHandler: function() {\r\n        this.callback.apply(this.context, this.arguments);\r\n    },\r\n\r\n    initOption: function(option) {\r\n        if (typeof(option.delay) === \"number\" && option.delay > 0) {\r\n            this.delay = option.delay;\r\n        }\r\n        if (typeof(option.callback) === \"function\") {\r\n            this.callback = option.callback;\r\n        }\r\n        if (option.arguments) {\r\n            this.arguments = option.arguments;\r\n        }\r\n    },\r\n\r\n    throttle: function(option) {\r\n        this.initOption(option);\r\n        clearTimeout(this.timeout);\r\n        var now = new Date().getTime();\r\n        if (this.last && now < this.last + this.delay) {\r\n            var self = this;\r\n            this.timeout = setTimeout(function() {\r\n                self.last = now + self.delay;\r\n                self.changeHandler();\r\n            }, this.delay);\r\n        } else {\r\n            this.last = now;\r\n            this.changeHandler();\r\n        }\r\n    },\r\n\r\n    debounce: function(option) {\r\n        this.initOption(option);\r\n        clearTimeout(this.timeout);\r\n        var self = this;\r\n        this.timeout = setTimeout(function() {\r\n            self.changeHandler();\r\n        }, this.delay);\r\n    }\r\n\r\n};\r\n\r\n//all rhythm listeners for a context\r\nvar RhythmListeners = function(context) {\r\n    this.context = context;\r\n    this.listeners = {};\r\n};\r\n\r\nRhythmListeners.prototype = {\r\n    constructor: RhythmListeners,\r\n    getRhythm: function(name) {\r\n        var item = this.listeners[name];\r\n        //uncreated or destroyed\r\n        if (!item || !item.context) {\r\n            item = new Rhythm(this.context);\r\n            this.listeners[name] = item;\r\n        }\r\n        return item;\r\n    },\r\n\r\n    destroy: function() {\r\n        var listeners = this.listeners;\r\n        Object.keys(listeners).forEach(function(k) {\r\n            var item = listeners[k];\r\n            item.destroy();\r\n        });\r\n        this.listeners = {};\r\n    }\r\n\r\n};\r\n\r\n//static method\r\nRhythm.getRhythm = function(context, name) {\r\n    //require context\r\n    if (!context.rhythmListeners) {\r\n        context.rhythmListeners = new RhythmListeners(context);\r\n    }\r\n    if (!name) {\r\n        return context.rhythmListeners;\r\n    }\r\n    var item = context.rhythmListeners.getRhythm(name);\r\n    return item;\r\n};\r\n\r\nmodule.exports = Rhythm;","var $ = require(\"./query.js\");\r\n\r\nvar Util = require('./util.js');\r\n\r\nvar EventBase = require(\"./event-base.js\");\r\n\r\nvar SVG = EventBase.extend({\r\n    SVG_NS: \"http://www.w3.org/2000/svg\",\r\n    SVG_LINK: \"http://www.w3.org/1999/xlink\",\r\n\r\n    constructor: function() {\r\n\r\n    },\r\n\r\n    defaultOption: function() {\r\n        return {\r\n            width: 20,\r\n            height: 20,\r\n            pointerEvents: \"none\",\r\n            cursor: \"pointer\",\r\n            fill: \"#666666\",\r\n            scalemode: 1,\r\n            pxfix: true\r\n        };\r\n    },\r\n\r\n    draw: function(data, option) {\r\n\r\n        option = Util.merge(this.defaultOption(), option);\r\n        this.option = option;\r\n\r\n        this.svg_root = this.create(\"svg\", {\r\n            \"class\": \"tg-icon\",\r\n            \"pointer-events\": option.pointerEvents,\r\n            overflow: \"hidden\",\r\n            xmlns: this.SVG_NS,\r\n            \"xmlns:xlink\": this.SVG_LINK,\r\n            version: 1.1,\r\n            width: option.width,\r\n            height: option.height\r\n        });\r\n\r\n        this.svg_back = this.create(\"rect\", {\r\n            \"class\": \"tg-icon-back\",\r\n            opacity: \"0\",\r\n            cursor: option.cursor,\r\n            width: option.width,\r\n            height: option.height\r\n        }, this.svg_root);\r\n\r\n        //scalemode\r\n        var ow = Util.tonum(data.width);\r\n        var oh = Util.tonum(data.height);\r\n        var fit = this.fit(option.width, option.height, ow, oh, option.scalemode);\r\n\r\n        var px = fit.x;\r\n        var py = fit.y;\r\n        if (option.pxfix) {\r\n            px = this.pxfix(px, 1);\r\n            py = this.pxfix(py, 1);\r\n        }\r\n\r\n        var translate = this.translate(px, py);\r\n        var scale = this.scale(fit.sx, fit.sy);\r\n\r\n        this.svg_list = this.create(\"g\", {\r\n            \"class\": \"tg-icon-list\",\r\n            \"pointer-events\": \"none\",\r\n            transform: translate + \" \" + scale\r\n        }, this.svg_root);\r\n\r\n        var dataList = data.data;\r\n        if (!Util.islist(dataList)) {\r\n            if (dataList && typeof(dataList) === \"object\") {\r\n                dataList = [dataList];\r\n            } else {\r\n                dataList = [{\r\n                    d: dataList\r\n                }];\r\n            }\r\n        }\r\n\r\n        this.drawDataList(dataList);\r\n\r\n    },\r\n\r\n    drawDataList: function(dataList) {\r\n\r\n        for (var i = 0, l = dataList.length; i < l; i++) {\r\n            var item = dataList[i];\r\n            if (!item) {\r\n                continue;\r\n            }\r\n            var data = Util.merge({\r\n                \"class\": \"tg-icon-item\",\r\n                fill: this.option.fill\r\n            }, item);\r\n\r\n            this.create(\"path\", data, this.svg_list);\r\n        }\r\n\r\n    },\r\n\r\n    /* eslint-disable complexity*/\r\n    create: function(name, data, parent, child) {\r\n        name = name || \"g\";\r\n        var node = this.createElement(name);\r\n\r\n        /* jshint ignore:start */\r\n        // attrs\r\n        if (data) {\r\n            for (var k in data) {\r\n                var v = data[k];\r\n                if (v === undefined || v === null || typeof(v) === \"object\") {\r\n                    continue;\r\n                }\r\n                if (name === \"image\" && (k === \"href\" || k === \"xlink:href\")) {\r\n                    //only for href image\r\n                    node.setAttributeNS(this.SVG_LINK, \"href\", v);\r\n                } else {\r\n                    node.setAttribute(k, v);\r\n                }\r\n            }\r\n        }\r\n        /* jshint ignore:end */\r\n\r\n        // append text or children\r\n        if (name === \"text\" || child) {\r\n            $(node).append(child);\r\n        }\r\n        // append to parent\r\n        if (parent) {\r\n            $(parent).append(node);\r\n        }\r\n        return node;\r\n    },\r\n    /* eslint-enable*/\r\n\r\n    createElement: function(name) {\r\n        if (document.createElementNS) {\r\n            return document.createElementNS(this.SVG_NS, name);\r\n        } else {\r\n            return document.createElement(name);\r\n        }\r\n    },\r\n\r\n    //svg related\r\n    //0: no scale\r\n    //1: scale with keep width/height (default)\r\n    //2: scale without keep width/height\r\n    //3: scale with keep width/height and cut outside\r\n    fit: function(pw, ph, tw, th, scalemode) {\r\n        scalemode = Util.tonum(scalemode, true);\r\n        var rect = {\r\n            x: 0,\r\n            y: 0,\r\n            width: tw,\r\n            height: th,\r\n            sx: 1,\r\n            sy: 1,\r\n            pw: pw,\r\n            ph: ph\r\n        };\r\n\r\n        var checkSize = function() {\r\n            if (tw <= 0 || th <= 0 || pw <= 0 || ph <= 0) {\r\n                return false;\r\n            }\r\n            return true;\r\n        };\r\n\r\n        if (!checkSize()) {\r\n            return rect;\r\n        }\r\n\r\n        //============================\r\n        //no scale 0\r\n        if (scalemode <= 0 || scalemode > 3) {\r\n            return rect;\r\n        }\r\n        //============================\r\n        //scale 1,2,3\r\n\r\n        var scalemode1 = function() {\r\n            if (rect.sx > rect.sy) {\r\n                rect.sx = rect.sy;\r\n            } else if (rect.sx < rect.sy) {\r\n                rect.sy = rect.sx;\r\n            }\r\n            rect.x = (pw - tw * rect.sx) * 0.5;\r\n            rect.y = (ph - th * rect.sy) * 0.5;\r\n        };\r\n\r\n        var scalemode3 = function() {\r\n            if (rect.sx > rect.sy) {\r\n                rect.sy = rect.sx;\r\n            } else if (rect.sx < rect.sy) {\r\n                rect.sx = rect.sy;\r\n            }\r\n            rect.x = (pw - tw * rect.sx) * 0.5;\r\n            rect.y = (ph - th * rect.sy) * 0.5;\r\n        };\r\n\r\n        var scalemode2 = function() {\r\n            rect.sx = pw / tw;\r\n            rect.sy = ph / th;\r\n            if (scalemode === 1) {\r\n                //1: scale with keep width/height\r\n                scalemode1();\r\n            } else if (scalemode === 3) {\r\n                //3: scale with keep width/height and cut outside\r\n                scalemode3();\r\n            }\r\n        };\r\n\r\n        //2: scale without keep width/height\r\n        scalemode2();\r\n\r\n        return rect;\r\n    },\r\n\r\n    //pixel fixing for line\r\n    pxfix: function(_linePos, _lineWidth, _lineAlign) {\r\n        //always to int\r\n        var linePos = Util.tonum(_linePos, true);\r\n        var lineWidth = Math.max(Util.tonum(_lineWidth, true), 1);\r\n        var lineAlign = Util.tonum(_lineAlign);\r\n\r\n        //mid align, always + offset, for example pos 0 draw in 0.5\r\n        if (lineAlign === 0) {\r\n            var fix = (lineWidth % 2) * 0.5;\r\n            //snap to 0.5 of pos\r\n            if (linePos >= _linePos) {\r\n                return linePos - fix;\r\n            }\r\n            return linePos + fix;\r\n        }\r\n\r\n        //left align, start\r\n        if (lineAlign > 0) {\r\n            return linePos + lineWidth * 0.5;\r\n        }\r\n\r\n        //right align, end\r\n        return linePos - lineWidth * 0.5;\r\n    },\r\n\r\n    point: function(x, y) {\r\n        return [Util.tonum(x), Util.tonum(y)].join(\",\");\r\n    },\r\n\r\n    //transform\r\n    translate: function(x, y) {\r\n        return \"translate(\" + [Util.tonum(x), Util.tonum(y)] + \")\";\r\n    },\r\n    scale: function(x, y) {\r\n        return \"scale(\" + [Util.tonum(x), Util.tonum(y)] + \")\";\r\n    },\r\n\r\n    toXMLString: function() {\r\n        var str = \"\";\r\n        if (this.svg_root) {\r\n            str = this.svg_root.outerHTML;\r\n            if (!str) {\r\n                var parent = this.svg_root.parentNode;\r\n                if (parent) {\r\n                    str = parent.innerHTML;\r\n                } else {\r\n                    var temp = document.createElement(\"div\");\r\n                    temp.appendChild(this.svg_root);\r\n                    str = temp.innerHTML;\r\n                }\r\n            }\r\n            if (str) {\r\n                // SVG format sanitize\r\n                str = str.replace(/ href=/g, ' xlink:href=');\r\n            }\r\n        }\r\n        return str;\r\n    },\r\n\r\n    toString: function() {\r\n        return \"[object SVG]\";\r\n    }\r\n\r\n});\r\n\r\nmodule.exports = SVG;","var $ = require(\"./query.js\");\r\n\r\nvar Util = require(\"./util.js\");\r\nvar E = {\r\n    TOUCHMOVE: \"touchmove\",\r\n    TOUCHEND: \"touchend\",\r\n    //touch\r\n    TOUCH_START: \"touch_start\",\r\n    TOUCH_MOVE: \"touch_move\",\r\n    TOUCH_END: \"touch_end\",\r\n    TOUCH_INERTIA: \"touch_inertia\"\r\n};\r\n\r\nvar Motion = require(\"./motion.js\");\r\n\r\nvar EventBase = require(\"./event-base.js\");\r\nvar Touch = EventBase.extend({\r\n    E: E,\r\n    constructor: function() {\r\n        this.init();\r\n    },\r\n\r\n    init: function() {\r\n        this.ns = \".drag_\" + Util.token(8);\r\n        this.TOUCHMOVE = E.TOUCHMOVE + this.ns;\r\n        this.TOUCHEND = E.TOUCHEND + this.ns;\r\n        this.initOption();\r\n        return this;\r\n    },\r\n\r\n    initOption: function() {\r\n        this.option = {\r\n            holder: null,\r\n            touchLength: 0,\r\n            touchStartX: 0,\r\n            touchStartY: 0,\r\n            touchPreviousX: 0,\r\n            touchPreviousY: 0,\r\n            touchCurrentX: 0,\r\n            touchCurrentY: 0,\r\n            touchOffsetX: 0,\r\n            touchOffsetY: 0,\r\n            touchMoveX: 0,\r\n            touchMoveY: 0,\r\n            valid: false\r\n        };\r\n    },\r\n\r\n    setOption: function(option) {\r\n        var o = this.option;\r\n        Object.keys(option).forEach(function(k) {\r\n            o[k] = option[k];\r\n        });\r\n        return this;\r\n    },\r\n\r\n    //============================================================================\r\n\r\n    start: function(option) {\r\n\r\n        this.initOption();\r\n        this.setOption(option);\r\n\r\n        var o = this.option;\r\n        if (!o.e) {\r\n            return this;\r\n        }\r\n\r\n        //namespace event type for touch move\r\n        var holder = $(o.holder || window);\r\n        holder.unbind(this.ns);\r\n\r\n        var self = this;\r\n        //only one so no need ns events\r\n        holder.one(this.TOUCHEND, function(e) {\r\n            holder.unbind(self.ns);\r\n            self.touchEndHandler(e);\r\n        });\r\n\r\n        //namespaces events\r\n        holder.bind(this.TOUCHMOVE, function(e) {\r\n            self.touchMoveHandler(e);\r\n        });\r\n\r\n        this.touchStartHandler(o.e);\r\n\r\n        return this;\r\n    },\r\n\r\n    //============================================================================\r\n\r\n    getTouches: function(e) {\r\n        if (!e) {\r\n            return [];\r\n        }\r\n        e = e.originalEvent || e;\r\n        return e.touches || [];\r\n    },\r\n\r\n    getChangedTouches: function(e) {\r\n        if (!e) {\r\n            return [];\r\n        }\r\n        e = e.originalEvent || e;\r\n        return e.changedTouches || [];\r\n    },\r\n\r\n    touchStartHandler: function(e) {\r\n        this.motionStop();\r\n        var touches = this.getTouches(e);\r\n        var touchItem = touches[0];\r\n        if (!touchItem) {\r\n            return;\r\n        }\r\n        var o = this.option;\r\n        o.touchLength = touches.length;\r\n        //start position\r\n        o.touchStartX = touchItem.clientX;\r\n        o.touchStartY = touchItem.clientY;\r\n        o.touchCurrentX = o.touchStartX;\r\n        o.touchCurrentY = o.touchStartY;\r\n        o.touchInertiaStartX = o.touchCurrentX;\r\n        o.touchInertiaStartY = o.touchCurrentY;\r\n        o.valid = false;\r\n\r\n        this.currentEvent = e;\r\n        this.touching = false;\r\n        this.trigger(E.TOUCH_START, o);\r\n\r\n        return this;\r\n    },\r\n\r\n    touchMoveHandler: function(e) {\r\n        var touches = this.getTouches(e);\r\n        var touchItem = touches[0];\r\n        if (!touchItem) {\r\n            return;\r\n        }\r\n        var o = this.option;\r\n        o.touchLength = touches.length;\r\n        //keep previous position\r\n        o.touchPreviousX = o.touchCurrentX;\r\n        o.touchPreviousY = o.touchCurrentY;\r\n        //current position\r\n        o.touchCurrentX = touchItem.clientX;\r\n        o.touchCurrentY = touchItem.clientY;\r\n        //current offset from start\r\n        o.touchOffsetX = o.touchCurrentX - o.touchStartX;\r\n        o.touchOffsetY = o.touchCurrentY - o.touchStartY;\r\n        //position nothing change\r\n        o.valid = (o.touchOffsetX === 0 && o.touchOffsetY === 0) ? false : true;\r\n        //current move offset from previous\r\n        o.touchMoveX = o.touchCurrentX - o.touchPreviousX;\r\n        o.touchMoveY = o.touchCurrentY - o.touchPreviousY;\r\n\r\n        this.currentEvent = e;\r\n        this.touching = true;\r\n        this.trigger(E.TOUCH_MOVE, o);\r\n\r\n        Util.getRhythm(this, \"inertiaTime\").throttle({\r\n            delay: 50,\r\n            callback: this.inertiaTimeHandler\r\n        });\r\n        return this;\r\n    },\r\n\r\n    inertiaTimeHandler: function() {\r\n        var o = this.option;\r\n        o.touchInertiaStartX = o.touchCurrentX;\r\n        o.touchInertiaStartY = o.touchCurrentY;\r\n    },\r\n\r\n    touchEndHandler: function(e) {\r\n        var o = this.option;\r\n\r\n        this.currentEvent = e;\r\n        this.touching = false;\r\n        this.trigger(E.TOUCH_END, o);\r\n\r\n        var changedTouches = this.getChangedTouches(e);\r\n        var touchItem = changedTouches[0];\r\n        if (!touchItem) {\r\n            return;\r\n        }\r\n\r\n        var touches = this.getTouches(e);\r\n        o.touchLength = touches.length;\r\n\r\n        var touchEndX = touchItem.clientX;\r\n        var touchEndY = touchItem.clientY;\r\n        o.touchInertiaX = touchEndX - o.touchInertiaStartX;\r\n        o.touchInertiaY = touchEndY - o.touchInertiaStartY;\r\n\r\n        this.motionStart();\r\n\r\n        return this;\r\n    },\r\n\r\n    motionStart: function() {\r\n        this.motionStop();\r\n\r\n        var o = this.option;\r\n        var from = {\r\n            x: o.touchInertiaX,\r\n            y: o.touchInertiaY\r\n        };\r\n        var till = {\r\n            x: 0,\r\n            y: 0\r\n        };\r\n\r\n        var self = this;\r\n        this.motion = new Motion();\r\n        this.motion.bind(\"motion_update\", function(e, d) {\r\n            o.touchInertiaX = d.x;\r\n            o.touchInertiaY = d.y;\r\n            self.trigger(E.TOUCH_INERTIA, o);\r\n        });\r\n        this.motion.start({\r\n            duration: 500,\r\n            from: from,\r\n            till: till\r\n        });\r\n        return this;\r\n    },\r\n\r\n    motionStop: function() {\r\n        if (this.motion) {\r\n            this.motion.stop();\r\n            this.motion = null;\r\n        }\r\n        return this;\r\n    },\r\n\r\n    preventDefault: function(e) {\r\n        e = e || this.currentEvent;\r\n        if (e && e.preventDefault) {\r\n            e.preventDefault();\r\n        }\r\n    },\r\n\r\n    //class print\r\n    toString: function() {\r\n        return \"[object Touch]\";\r\n    }\r\n\r\n});\r\n\r\n\r\nmodule.exports = Touch;","var isObject = require('./is-object.js');\r\nvar merge = require('./merge.js');\r\nvar Rhythm = require(\"./rhythm.js\");\r\n\r\nvar uniqValue = 0;\r\n\r\nvar Util = {\r\n\r\n    isObject: isObject,\r\n    merge: merge,\r\n\r\n    //=================================================================================\r\n    //strings\r\n\r\n    uniq: function(len) {\r\n        uniqValue += 1;\r\n        var t = Util.token(len);\r\n        return t + uniqValue;\r\n    },\r\n\r\n    //get a token string\r\n    token: function(len) {\r\n        var str = Math.random().toString().substr(2);\r\n        if (len) {\r\n            str = str.substr(0, Util.tonum(len));\r\n        }\r\n        return str;\r\n    },\r\n\r\n    //=================================================================================\r\n    //number\r\n    //if is valid number\r\n    isnum: function(num) {\r\n        if (typeof(num) !== \"number\" || isNaN(num)) {\r\n            return false;\r\n        }\r\n        var isInvalid = function(n) {\r\n            if (n === Number.MAX_VALUE || n === Number.MIN_VALUE || n === Number.NEGATIVE_INFINITY || n === Number.POSITIVE_INFINITY) {\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n        if (isInvalid(num)) {\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n    // format to a valid number\r\n    tonum: function(num, toInt) {\r\n        if (typeof(num) !== \"number\") {\r\n            num = parseFloat(num);\r\n        }\r\n        if (isNaN(num)) {\r\n            num = 0;\r\n        }\r\n        if (toInt) {\r\n            num = Math.round(num);\r\n        }\r\n        return num;\r\n    },\r\n\r\n    //try to convert number if it is a string number\r\n    convertNum: function(str) {\r\n        if (typeof(str) === \"string\") {\r\n            //keep string if can not be converted\r\n            var reg = /^[-+]?\\d+(\\.\\d+)?$/ig;\r\n            if (reg.test(str)) {\r\n                return parseFloat(str);\r\n            }\r\n        }\r\n        return str;\r\n    },\r\n\r\n    clamp: function(num, min, max) {\r\n        return Math.max(Math.min(num, max), min);\r\n    },\r\n\r\n    per: function(num) {\r\n        num = Util.tonum(num);\r\n        num = Util.clamp(num, 0, 1);\r\n        return num;\r\n    },\r\n\r\n    //string replace {name}\r\n    replace: function(str, obj) {\r\n        str = \"\" + str;\r\n        if (!obj) {\r\n            return str;\r\n        }\r\n        str = str.replace(/\\{([^}]+)\\}/g, function(match, key) {\r\n            if (!obj.hasOwnProperty(key)) {\r\n                return match;\r\n            }\r\n            return obj[key];\r\n        });\r\n        return str;\r\n    },\r\n\r\n    //whether data is array with length\r\n    isarr: function(data) {\r\n        if (data && data instanceof Array) {\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n\r\n    tolist: function(data) {\r\n        if (!data) {\r\n            return [];\r\n        }\r\n        if (data instanceof Array) {\r\n            return data;\r\n        }\r\n        return [data];\r\n    },\r\n\r\n    islist: function(data) {\r\n        if (Util.isarr(data) && data.length > 0) {\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n    //whether item in list\r\n    inlist: function(item, list) {\r\n        if (!Util.islist(list)) {\r\n            return false;\r\n        }\r\n\r\n        for (var i = 0, l = list.length; i < l; i++) {\r\n            if (list[i] === item) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    listToMap: function(list) {\r\n        var map = {};\r\n        if (Util.islist(list)) {\r\n            list.forEach(function(item) {\r\n                map[item] = true;\r\n            });\r\n        }\r\n        return map;\r\n    },\r\n\r\n    isdate: function(date) {\r\n        if (!date || !(date instanceof Date)) {\r\n            return false;\r\n        }\r\n        //is Date Object but Date {Invalid Date}\r\n        if (isNaN(date.getTime())) {\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n    /* eslint-disable complexity*/\r\n    //getValue({a:{b:1}}, \"a.b\", 0)\r\n    getValue: function(data, path, defaultValue) {\r\n        if (!path) {\r\n            return defaultValue;\r\n        }\r\n        var current = data;\r\n        var list = path.split(\".\");\r\n        var lastKey = list.pop();\r\n        while (current && list.length) {\r\n            var item = list.shift();\r\n            current = current[item];\r\n        }\r\n        if (current && current.hasOwnProperty(lastKey)) {\r\n            var value = current[lastKey];\r\n            if (typeof(value) !== \"undefined\") {\r\n                return value;\r\n            }\r\n        }\r\n        return defaultValue;\r\n    },\r\n    /* eslint-enable*/\r\n\r\n    isMatch: function(item, attr) {\r\n        if (!item || !attr) {\r\n            return false;\r\n        }\r\n        for (var k in attr) {\r\n            if (item[k] !== attr[k]) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    },\r\n\r\n    getListItem: function(list, attr) {\r\n        if (Util.islist(list)) {\r\n            for (var i = 0, l = list.length; i < l; i++) {\r\n                var item = list[i];\r\n                if (Util.isMatch(item, attr)) {\r\n                    return item;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n\r\n    delListItem: function(list, attr) {\r\n        if (!Util.islist(list)) {\r\n            return list;\r\n        }\r\n        for (var i = 0; i < list.length; i++) {\r\n            var item = list[i];\r\n            if (Util.isMatch(item, attr)) {\r\n                list.splice(i, 1);\r\n                i--;\r\n            }\r\n        }\r\n        return list;\r\n    },\r\n\r\n    removePrevious: function(target) {\r\n        if (!target) {\r\n            return;\r\n        }\r\n        //remove all previous property\r\n        for (var k in target) {\r\n            if (k.indexOf(\"previous\") === 0) {\r\n                delete target[k];\r\n            }\r\n        }\r\n    },\r\n\r\n    hasCtrlKey: function(e) {\r\n        var ctrlKey = false;\r\n        if (e) {\r\n            ctrlKey = e.ctrlKey || e.metaKey;\r\n        }\r\n        return ctrlKey;\r\n    },\r\n\r\n    hasShiftKey: function(e) {\r\n        var shiftKey = false;\r\n        if (e) {\r\n            shiftKey = e.shiftKey;\r\n        }\r\n        return shiftKey;\r\n    },\r\n\r\n    getRhythm: function(context, name) {\r\n        return Rhythm.getRhythm(context, name);\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = Util;","module.exports = \"<div class=\\\"tg-mbg\\\">\\r\\n    <div class=\\\"tg-focus tg-focus-start\\\" tabIndex='0' hideFocus></div>\\r\\n\\r\\n    <div class=\\\"tg-pane-header\\\">\\r\\n        <div class='tg-scrollpane tg-pane tg-pane-left tg-pane-header-left'>\\r\\n            <div class=\\\"tg-scrollview\\\">\\r\\n                <div class='tg-scrollbody tg-header tg-header-left'></div>\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class='tg-scrollpane tg-pane tg-pane-right tg-pane-header-right'>\\r\\n            <div class=\\\"tg-scrollview\\\">\\r\\n                <div class='tg-scrollbody tg-header tg-header-right'></div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"tg-pane-bodyer\\\">\\r\\n\\r\\n        <div class='tg-scrollpane tg-pane tg-pane-top tg-pane-left tg-pane-top-left'>\\r\\n            <div class=\\\"tg-scrollview\\\">\\r\\n                <div class='tg-scrollbody tg-canvas tg-canvas-top tg-canvas-left tg-canvas-top-left'></div>\\r\\n            </div>\\r\\n        </div>\\r\\n\\r\\n        <div class='tg-scrollpane tg-pane tg-pane-top tg-pane-right tg-pane-top-right'>\\r\\n            <div class=\\\"tg-scrollview\\\">\\r\\n                <div class='tg-scrollbody tg-canvas tg-canvas-top tg-canvas-right tg-canvas-top-right'></div>\\r\\n            </div>\\r\\n        </div>\\r\\n\\r\\n        <div class='tg-scrollpane tg-pane tg-pane-bottom tg-pane-left tg-pane-bottom-left'>\\r\\n            <div class=\\\"tg-scrollview\\\">\\r\\n                <div class='tg-scrollbody tg-canvas tg-canvas-bottom tg-canvas-left tg-canvas-bottom-left'></div>\\r\\n            </div>\\r\\n        </div>\\r\\n\\r\\n        <div class='tg-scrollpane tg-pane tg-pane-bottom tg-pane-right tg-pane-bottom-right'>\\r\\n            <div class=\\\"tg-scrollview\\\">\\r\\n                <div class='tg-scrollbody tg-canvas tg-canvas-bottom tg-canvas-right tg-canvas-bottom-right'></div>\\r\\n            </div>\\r\\n        </div>\\r\\n\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"tg-focus tg-focus-end\\\" tabIndex='0' hideFocus></div>\\r\\n\\r\\n    <div class=\\\"tg-column-line\\\">\\r\\n        <div class=\\\"tg-column-line-item tg-column-line-l\\\"></div>\\r\\n        <div class=\\\"tg-column-line-item tg-column-line-r\\\"></div>\\r\\n        <div class=\\\"tg-column-line-header\\\"></div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"tg-loading\\\">\\r\\n        <div class=\\\"tg-loading-item tg-loading-item-1\\\"></div>\\r\\n        <div class=\\\"tg-loading-item tg-loading-item-2\\\"></div>\\r\\n        <div class=\\\"tg-loading-item tg-loading-item-3\\\"></div>\\r\\n        <div class=\\\"tg-loading-item tg-loading-item-4\\\"></div>\\r\\n        <div class=\\\"tg-loading-item tg-loading-item-5\\\"></div>\\r\\n        <div class=\\\"tg-loading-item tg-loading-item-6\\\"></div>\\r\\n        <div class=\\\"tg-loading-item tg-loading-item-7\\\"></div>\\r\\n        <div class=\\\"tg-loading-item tg-loading-item-8\\\"></div>\\r\\n    </div>\\r\\n\\r\\n</div>\";","// base css\r\nrequire(\"./grid-view.scss\");\r\n\r\n//=============================================================================\r\nvar $ = require(\"../core/query.js\");\r\nvar E = require(\"../core/event-type.js\");\r\nvar Util = require(\"../core/util.js\");\r\n\r\nvar templateHtml = require(\"./grid-view.html\");\r\n\r\nvar ViewBase = require(\"./view/view-base.js\");\r\n\r\n//=============================================================================\r\n\r\nvar GridView = ViewBase.extend({\r\n\r\n    timestamp_render: 0,\r\n\r\n    //totalRowsHeight = frozenRowsHeight + scrollRowsHeight\r\n    frozenRowsHeight: 0,\r\n    totalRowsHeight: 0,\r\n    scrollRowsHeight: 0,\r\n\r\n    paneWidthL: 0,\r\n    paneWidthR: 0,\r\n    paneHeightT: 0,\r\n    paneHeightB: 0,\r\n\r\n    //has scroll bar\r\n    hasHScroll: true,\r\n    hasVScroll: true,\r\n\r\n    //scroll position\r\n    scrollLeft: 0,\r\n    scrollTop: 0,\r\n    scrollTopOffset: 0,\r\n\r\n    //\r\n    tabbingDirection: 1,\r\n\r\n    //=================================================================================\r\n\r\n    constructor: function(container) {\r\n        this.create(container);\r\n    },\r\n\r\n    create: function(container) {\r\n        if (!container) {\r\n            return this;\r\n        }\r\n\r\n        //this uniq id\r\n        this.uid = \"tg-\" + Util.uniq(3);\r\n        this.rowsCache = {};\r\n\r\n        //init container\r\n        this.$container = $(container);\r\n        if (this.$container.length < 1) {\r\n            throw new Error(\"GridView requires a valid container\");\r\n        }\r\n        this.$container.empty();\r\n\r\n        this.initTemplate();\r\n    },\r\n\r\n    initTemplate: function() {\r\n\r\n        this.$template = $(templateHtml).appendTo(this.$container);\r\n\r\n        this.$focusSinkStart = this.find(\".tg-focus-start\");\r\n        this.$focusSinkEnd = this.find(\".tg-focus-end\");\r\n        this.$focusSink = $().add(this.$focusSinkStart).add(this.$focusSinkEnd);\r\n\r\n        //===============================================================\r\n        this.$paneHeader = this.find(\".tg-pane-header\");\r\n\r\n        //===============================================================\r\n        this.$paneHeaderL = this.$paneHeader.find(\".tg-pane-header-left\");\r\n        this.$paneHeaderR = this.$paneHeader.find(\".tg-pane-header-right\");\r\n\r\n        // Append the columnn containers to the headers\r\n        this.$headerL = this.$paneHeaderL.find(\".tg-header-left\");\r\n        this.$headerR = this.$paneHeaderR.find(\".tg-header-right\");\r\n\r\n        // Cache the header columns\r\n        this.$headers = $().add(this.$headerL).add(this.$headerR);\r\n\r\n        //===============================================================\r\n        this.$paneBodyer = this.find(\".tg-pane-bodyer\");\r\n\r\n        //===============================================================\r\n        this.$paneTopL = this.$paneBodyer.find(\".tg-pane-top-left\");\r\n        this.$paneTopR = this.$paneBodyer.find(\".tg-pane-top-right\");\r\n        this.$paneBottomL = this.$paneBodyer.find(\".tg-pane-bottom-left\");\r\n        this.$paneBottomR = this.$paneBodyer.find(\".tg-pane-bottom-right\");\r\n\r\n        //===============================================================\r\n\r\n        this.$canvasTopL = this.$paneTopL.find(\".tg-canvas\");\r\n        this.$canvasTopR = this.$paneTopR.find(\".tg-canvas\");\r\n        this.$canvasBottomL = this.$paneBottomL.find(\".tg-canvas\");\r\n        this.$canvasBottomR = this.$paneBottomR.find(\".tg-canvas\");\r\n\r\n        //===============================================================\r\n        this.$panes = $().add(this.$paneTopL).add(this.$paneTopR).add(this.$paneBottomL).add(this.$paneBottomR);\r\n\r\n        this.$canvas = $().add(this.$canvasTopL).add(this.$canvasTopR).add(this.$canvasBottomL).add(this.$canvasBottomR);\r\n\r\n        return this;\r\n    },\r\n\r\n    //=================================================================================\r\n\r\n    init: function(option) {\r\n\r\n        this.initialized = false;\r\n        this.resetStatus();\r\n\r\n        this.option = option;\r\n        this.initOption();\r\n\r\n        this.initCssRules();\r\n\r\n        this.initScrollpane();\r\n\r\n        this.initColumnLine();\r\n\r\n        this.bindEvents();\r\n\r\n        //========================================================\r\n        this.renderCompleted = false;\r\n        this.trigger(E.onRenderStart, this.renderCompleted);\r\n\r\n        //init headers\r\n        this.initHeaders();\r\n\r\n        return this;\r\n    },\r\n\r\n    resetStatus: function() {\r\n        //clean before init\r\n        Util.removePrevious(this);\r\n\r\n        //to rebuild css rules\r\n        this.canvasWidthL = 0;\r\n        this.canvasWidthR = 0;\r\n\r\n        //to clean size cache\r\n        this.canvasHeightT = 0;\r\n        this.canvasHeightB = 0;\r\n\r\n        this.$canvas.width(0).height(0);\r\n\r\n        this.paneWidthL = 0;\r\n        this.paneWidthR = 0;\r\n        this.paneHeightT = 0;\r\n        this.paneHeightB = 0;\r\n\r\n        this.$panes.width(0).height(0);\r\n\r\n        //reset scroll status\r\n        this.scrollLeft = 0;\r\n        this.scrollTop = 0;\r\n        this.scrollTopOffset = 0;\r\n\r\n        this.invalidateAll();\r\n    },\r\n\r\n    initOption: function() {\r\n\r\n        var o = this.option;\r\n\r\n        // remove previous first\r\n        this.$template.removeClass();\r\n        // always require\r\n        this.$template.addClass(\"tg-mbg\");\r\n\r\n        //id and className handler, for private column width/left CSS\r\n        var tg_id = this.$template.attr(\"tg_id\");\r\n        if (tg_id) {\r\n            this.removeCssRules(tg_id);\r\n        }\r\n        this.$template.addClass(this.uid).attr(\"tg_id\", this.uid);\r\n\r\n        // customize from option\r\n        if (o.theme) {\r\n            this.$template.addClass(\"tg-\" + o.theme);\r\n        }\r\n        this.$template.addClass(o.className);\r\n\r\n        this.initScrollbarSize();\r\n\r\n    },\r\n\r\n    //======================================================================================\r\n\r\n    render: function() {\r\n        Util.getRhythm(this, \"render\").debounce({\r\n            delay: 20,\r\n            callback: this.renderNow,\r\n            arguments: arguments\r\n        });\r\n    },\r\n\r\n    renderNow: function() {\r\n\r\n        if (!this.initialized) {\r\n            return;\r\n        }\r\n\r\n        //console.log(\"render now\");\r\n\r\n        var visibleRange = this.getVisibleRange();\r\n\r\n        //keep for current range property\r\n        this.visibleRange = visibleRange;\r\n\r\n        //clean out of range\r\n        this.clearRowCacheByRange(visibleRange);\r\n\r\n        this.renderRows(visibleRange.rowList);\r\n\r\n        this.renderCells(visibleRange.rowList, visibleRange.columnList);\r\n\r\n        //update everytime update\r\n        this.trigger(E.onRenderUpdate, visibleRange);\r\n        //complete only one time\r\n        if (!this.renderCompleted) {\r\n            this.renderCompleted = true;\r\n            this.trigger(E.onRenderComplete, this.renderCompleted);\r\n        }\r\n\r\n        //last render timestamp\r\n        this.timestamp_render = new Date().getTime();\r\n\r\n    },\r\n\r\n    showLoading: function() {\r\n        if (this.$container) {\r\n            this.$container.find(\".tg-loading\").show();\r\n        }\r\n        return this;\r\n    },\r\n\r\n    hideLoading: function() {\r\n        if (this.$container) {\r\n            this.$container.find(\".tg-loading\").hide();\r\n        }\r\n        return this;\r\n    },\r\n\r\n    destroy: function() {\r\n        this.initialized = false;\r\n        Util.getRhythm(this).destroy();\r\n        this.trigger(E.onDestroy);\r\n        this.cancelCurrentEdit();\r\n        this.$container.removeAttr(\"tg_id\");\r\n        this.$container.unbind(\".tg\");\r\n        this.removeCssRules();\r\n        this.unbind();\r\n        this.$container.empty().removeClass(this.uid);\r\n    },\r\n\r\n    toString: function() {\r\n        return \"[object GridView]\";\r\n    }\r\n\r\n});\r\n\r\nmodule.exports = GridView;","\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./grid-view.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./grid-view.scss\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./grid-view.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","var ScrollBar = require('./scroll-bar.js');\r\n\r\nvar ScrollBarH = ScrollBar.extend({\r\n    mode: \"h\",\r\n    type: {\r\n        className: \"tg-scrollbar-h\",\r\n        offset: \"left\",\r\n        size: \"width\",\r\n        page: \"pageX\",\r\n        axis: \"x\",\r\n        mouseOffset: \"mouseOffsetX\"\r\n    }\r\n});\r\n\r\nmodule.exports = ScrollBarH;","var ScrollBar = require('./scroll-bar.js');\r\n\r\nvar ScrollBarV = ScrollBar.extend({\r\n    mode: \"v\",\r\n    type: {\r\n        className: \"tg-scrollbar-v\",\r\n        offset: \"top\",\r\n        size: \"height\",\r\n        page: \"pageY\",\r\n        axis: \"y\",\r\n        mouseOffset: \"mouseOffsetY\"\r\n    }\r\n});\r\n\r\nmodule.exports = ScrollBarV;","module.exports = \"<div class=\\\"tg-scrollbar\\\">\\r\\n    <div class=\\\"tg-scrollbar-track\\\"></div>\\r\\n    <div class=\\\"tg-scrollbar-thumb\\\"></div>\\r\\n</div>\";","var $ = require(\"../../../core/query.js\");\r\nvar Util = require('../../../core/util.js');\r\n\r\nvar OptionBase = require(\"../../../core/option-base.js\");\r\n\r\nvar Drag = require(\"../../../core/drag.js\");\r\n\r\nvar Motion = require(\"../../../core/motion.js\");\r\n\r\nvar template = require(\"./scroll-bar.html\");\r\n\r\nvar ScrollBar = OptionBase.extend({\r\n    //v, h\r\n    //mode: \"\",\r\n    //type: {},\r\n\r\n    //final value from option\r\n    size: 0,\r\n    viewSize: 0,\r\n    bodySize: 0,\r\n\r\n    //scroll position\r\n    position: 0,\r\n\r\n    //thumb scale: thumb size / track size\r\n    scale: 0,\r\n\r\n    thumbPosition: 0,\r\n    thumbScale: 0,\r\n\r\n    constructor: function(holder) {\r\n        this.uid = \"scrollbar_\" + Util.token(4);\r\n        this.option = this.defaultOption();\r\n        this.holder = $(holder);\r\n        //some clean\r\n        this.holder.find(\".\" + this.type.className).remove();\r\n    },\r\n\r\n    defaultOption: function() {\r\n        return {\r\n            //width or height for scrollbar\r\n            //0 means invisible\r\n            size: 15,\r\n\r\n            //for invisible but takes up space \r\n            //false: without blank (default)\r\n            //true: with blank, without scroll view extension\r\n            //1: with blank, with scroll view extension\r\n            blank: false,\r\n\r\n            //TODO disable event and hover\r\n            //disabled: false,\r\n\r\n            //motion\r\n            motionDelay: 200,\r\n            motionDuration: 200\r\n\r\n        };\r\n    },\r\n\r\n    //========================================================================\r\n\r\n    create: function() {\r\n\r\n        this.container = $(template).appendTo(this.holder);\r\n        this.container.addClass(\"tg-scrollbar \" + this.type.className);\r\n\r\n        this.track = this.container.find(\".tg-scrollbar-track\");\r\n        this.thumb = this.container.find(\".tg-scrollbar-thumb\");\r\n\r\n        var self = this;\r\n\r\n        //track hold/click events\r\n        this.track.bind(\"selectstart\", function(e) {\r\n            return false;\r\n        }).bind(\"mousedown\", function(e) {\r\n            self.trigger(\"onFocus\", e);\r\n            self.trackMousedownHandler(e);\r\n            $(window).one(\"mouseup\", function(e) {\r\n                self.trackMouseupHandler(e);\r\n            });\r\n            return false;\r\n        });\r\n\r\n        //thumb drag events\r\n        this.thumbDrag = new Drag();\r\n        this.thumbDrag.bind(\"drag_start\", function(e, d) {\r\n            self.thumbDragStart(d);\r\n        }).bind(\"drag_update\", function(e, d) {\r\n            self.thumbDragUpdate(d);\r\n        }).bind(\"drag_complete\", function(e, d) {\r\n            self.thumbDragComplete(d);\r\n        });\r\n\r\n        this.thumb.bind(\"selectstart\", function(e) {\r\n            return false;\r\n        }).bind(\"mousedown\", function(e) {\r\n            self.trigger(\"onFocus\", e);\r\n            self.thumbDragInit(e);\r\n        });\r\n\r\n        return this;\r\n    },\r\n\r\n    //========================================================================\r\n    //API\r\n\r\n    getBlank: function() {\r\n        return this.option.blank;\r\n    },\r\n\r\n    getSize: function() {\r\n        return this.size;\r\n    },\r\n\r\n    getViewSize: function() {\r\n        return this.viewSize;\r\n    },\r\n\r\n    getBodySize: function() {\r\n        return this.bodySize;\r\n    },\r\n\r\n    //========================================================================\r\n\r\n    getTrackMouseDirection: function() {\r\n        var direction = 1;\r\n        if (this.trackMousePosition < this.thumbPosition) {\r\n            direction = -1;\r\n        }\r\n        return direction;\r\n    },\r\n\r\n    getTrackMousePos: function(e) {\r\n        var offset = this.track.offset();\r\n        var mousePos = e[this.type.page] - offset[this.type.offset];\r\n        return mousePos;\r\n    },\r\n\r\n    //========================================================================\r\n\r\n    getMaxThumbPosition: function() {\r\n        var maxThumbPosition = this.viewSize - this.thumbSize;\r\n        return maxThumbPosition;\r\n    },\r\n\r\n    setThumbPosition: function(thumbPosition) {\r\n        if (thumbPosition === this.thumbPosition) {\r\n            return this;\r\n        }\r\n        this.thumbPosition = thumbPosition;\r\n        if (this.thumb) {\r\n            this.thumb.css(this.type.offset, thumbPosition);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    //update thumb pos\r\n    updateThumbPosition: function() {\r\n        var thumbPosition = 0;\r\n        var maxPosition = this.getMaxPosition();\r\n        if (maxPosition > 0) {\r\n            var maxThumbPosition = this.getMaxThumbPosition();\r\n            thumbPosition = Math.round(maxThumbPosition * this.position / maxPosition);\r\n            thumbPosition = Util.clamp(thumbPosition, 0, maxThumbPosition);\r\n        }\r\n        this.setThumbPosition(thumbPosition);\r\n        return this;\r\n    },\r\n\r\n    //=====================================================================\r\n    //track\r\n\r\n    trackMousedownHandler: function(e) {\r\n        this.motionStop();\r\n        this.trackMousePosition = this.getTrackMousePos(e);\r\n        this.motionStart();\r\n        return this;\r\n    },\r\n\r\n    trackMouseupHandler: function(e) {\r\n        this.motionStop();\r\n        if (this.motionStarted) {\r\n            return this;\r\n        }\r\n        this.trackMousePosition = this.getTrackMousePos(e);\r\n        //track click scroll\r\n        this.trackScrollHandler();\r\n        this.triggerEvent();\r\n        return this;\r\n    },\r\n\r\n    trackScrollHandler: function() {\r\n        var viewSize = Math.max(0, this.viewSize - 20);\r\n        //thumb current postion\r\n        var direction = this.getTrackMouseDirection();\r\n        var offset = viewSize * direction;\r\n        this.setOffset(offset);\r\n        return this;\r\n    },\r\n\r\n    //===================================================================\r\n    //motion\r\n\r\n    motionStop: function() {\r\n        if (this.motion) {\r\n            this.motion.stop();\r\n            this.motion = null;\r\n        }\r\n        return this;\r\n    },\r\n\r\n    motionStart: function() {\r\n        var from = this.position;\r\n        var till = Math.round(this.trackMousePosition / this.viewSize * this.getMaxPosition());\r\n        this.motionStarted = false;\r\n        var self = this;\r\n        this.motion = new Motion();\r\n        this.motion.bind(\"motion_start\", function(e, d) {\r\n            self.motionStarted = true;\r\n        });\r\n        this.motion.bind(\"motion_update\", function(e, d) {\r\n            self.motionUpdateHandler(e, d);\r\n        });\r\n        this.motion.start({\r\n            delay: this.option.motionDelay,\r\n            duration: this.option.motionDuration,\r\n            from: from,\r\n            till: till\r\n        });\r\n        return this;\r\n    },\r\n\r\n    motionUpdateHandler: function(e, pos) {\r\n        //update position, change thumb, trigger event\r\n        if (pos === this.position) {\r\n            return;\r\n        }\r\n        this.setPosition(pos);\r\n        this.triggerEvent();\r\n    },\r\n\r\n    //=====================================================================\r\n    //thumb drag\r\n\r\n    thumbDragInit: function(e) {\r\n        this.thumb.addClass(\"tg-scrollbar-thumb-hold\");\r\n        this.thumbDrag.start({\r\n            e: e,\r\n            target: this.thumb\r\n        });\r\n    },\r\n\r\n    thumbDragStart: function(d) {\r\n        this.motionStop();\r\n        d.thumbPositionStart = this.thumbPosition;\r\n    },\r\n\r\n    thumbDragUpdate: function(d) {\r\n\r\n        //change thumb position\r\n        var thumbPosition = d.thumbPositionStart + d[this.type.mouseOffset];\r\n        var maxThumbPosition = this.getMaxThumbPosition();\r\n        thumbPosition = Util.clamp(thumbPosition, 0, maxThumbPosition);\r\n        this.setThumbPosition(thumbPosition);\r\n\r\n        //new position\r\n        var newPosition = 0;\r\n        if (maxThumbPosition > 0) {\r\n            newPosition = Util.per(thumbPosition / maxThumbPosition) * this.getMaxPosition();\r\n            newPosition = Math.round(newPosition);\r\n        }\r\n        this.position = newPosition;\r\n        //update position and event change\r\n        this.triggerEvent();\r\n    },\r\n\r\n    thumbDragComplete: function(d) {\r\n        //no matter if d.valid always remove, because added on init not start\r\n        if (this.thumb) {\r\n            this.thumb.removeClass(\"tg-scrollbar-thumb-hold\");\r\n        }\r\n    },\r\n\r\n    //===================================================================\r\n\r\n    //from inside change trigger\r\n    triggerEvent: function() {\r\n        this.trigger(\"onChange\", this.position);\r\n    },\r\n\r\n    //===================================================================\r\n    //px position\r\n\r\n    getPosition: function() {\r\n        return this.position;\r\n    },\r\n\r\n    setPosition: function(position) {\r\n        position = Util.tonum(position, true);\r\n        var maxPosition = this.getMaxPosition();\r\n        position = Util.clamp(position, 0, maxPosition);\r\n        //console.log(this.position, position);\r\n        this.position = position;\r\n        this.updateThumbPosition();\r\n    },\r\n\r\n    getMaxPosition: function() {\r\n        var maxPosition = this.bodySize - this.viewSize;\r\n        return maxPosition;\r\n    },\r\n\r\n    updatePosition: function() {\r\n        var maxPosition = this.getMaxPosition();\r\n        var position = Util.clamp(this.position, 0, maxPosition);\r\n        this.position = position;\r\n    },\r\n\r\n    //offset position +/-\r\n    setOffset: function(offset) {\r\n        offset = Util.tonum(offset);\r\n        var position = this.position + offset;\r\n        this.setPosition(position);\r\n        return this;\r\n    },\r\n\r\n    //===================================================================\r\n    //scale for thumb\r\n\r\n    getScale: function() {\r\n        return this.scale;\r\n    },\r\n\r\n    setScale: function(scale) {\r\n        scale = Util.per(scale);\r\n        this.scale = scale;\r\n        this.scaleChangeHandler();\r\n        return this;\r\n    },\r\n\r\n    scaleChangeHandler: function() {\r\n        var thumbSize = Math.round(this.viewSize * this.scale);\r\n        thumbSize = Math.max(thumbSize, this.option.size);\r\n        thumbSize = Math.min(thumbSize, this.viewSize);\r\n        this.thumbSize = thumbSize;\r\n        if (this.thumb) {\r\n            var thumbData = {};\r\n            if (this.mode === \"h\") {\r\n                thumbData.height = this.size;\r\n                thumbData.width = this.thumbSize;\r\n            } else {\r\n                thumbData.width = this.size;\r\n                thumbData.height = this.thumbSize;\r\n            }\r\n            this.thumb.css(thumbData);\r\n        }\r\n    },\r\n\r\n    //===================================================================\r\n\r\n    //container and track size\r\n    updateTrackSize: function() {\r\n        var trackData = {};\r\n        if (this.mode === \"h\") {\r\n            trackData.width = this.viewSize;\r\n            trackData.height = this.size;\r\n        } else {\r\n            trackData.height = this.viewSize;\r\n            trackData.width = this.size;\r\n        }\r\n        this.container.css(trackData);\r\n        return this;\r\n    },\r\n\r\n    //thumb size\r\n    updateThumbSize: function() {\r\n        var scale = 0;\r\n        if (this.bodySize) {\r\n            scale = this.viewSize / this.bodySize;\r\n        }\r\n        this.setScale(scale);\r\n        return this;\r\n    },\r\n\r\n    //===================================================================\r\n\r\n    //do twice: calculate size and show size\r\n    updateOption: function(option) {\r\n\r\n        this.setOption(option);\r\n\r\n        //init size\r\n        var size = this.option.size;\r\n        if (!Util.isnum(size)) {\r\n            size = Util.tonum(size);\r\n        }\r\n        size = Math.round(size);\r\n        //range 0 - 30\r\n        size = Math.max(size, 0);\r\n        size = Math.min(size, 30);\r\n        this.size = size;\r\n\r\n        return;\r\n    },\r\n\r\n    //for view size and body size\r\n    updateSize: function(viewSize, bodySize) {\r\n        //init viewSize and bodySize\r\n        if (!Util.isnum(viewSize)) {\r\n            viewSize = Util.tonum(viewSize);\r\n        }\r\n        viewSize = Math.round(viewSize);\r\n        viewSize = Math.max(viewSize, 0);\r\n        this.viewSize = viewSize;\r\n\r\n        if (!Util.isnum(bodySize)) {\r\n            bodySize = Util.tonum(bodySize);\r\n        }\r\n        bodySize = Math.round(bodySize);\r\n        bodySize = Math.max(bodySize, 0);\r\n        this.bodySize = bodySize;\r\n    },\r\n\r\n    show: function() {\r\n        this.updatePosition();\r\n        if (this.getBlank()) {\r\n            this.remove();\r\n            return;\r\n        }\r\n\r\n        if (!this.container && this.size > 0) {\r\n            this.create();\r\n        }\r\n\r\n        if (!this.container) {\r\n            return this;\r\n        }\r\n        this.updateTrackSize();\r\n        this.updateThumbSize();\r\n\r\n        return this;\r\n    },\r\n\r\n\r\n    hide: function() {\r\n        this.updatePosition();\r\n        this.remove();\r\n        return this;\r\n    },\r\n\r\n    remove: function() {\r\n        this.motionStop();\r\n        if (!this.container) {\r\n            return this;\r\n        }\r\n        this.thumb.unbind();\r\n        this.thumb = null;\r\n        this.track.unbind();\r\n        this.track = null;\r\n        this.container.unbind();\r\n        this.container.remove();\r\n        this.container = null;\r\n    },\r\n\r\n    //===================================================================\r\n\r\n    destroy: function() {\r\n        this.remove();\r\n        this.unbind();\r\n        return this;\r\n    },\r\n\r\n    //===================================================================\r\n\r\n    toString: function() {\r\n        return \"[object ScrollBar]\";\r\n    }\r\n});\r\n\r\n\r\nmodule.exports = ScrollBar;","var $ = require(\"../../../core/query.js\");\r\nvar Util = require('../../../core/util.js');\r\n\r\nvar OptionBase = require(\"../../../core/option-base.js\");\r\n\r\nvar ScrollBarV = require(\"../scroll-bar/scroll-bar-v.js\");\r\nvar ScrollBarH = require(\"../scroll-bar/scroll-bar-h.js\");\r\n\r\nvar ScrollPane = OptionBase.extend({\r\n\r\n    visible: true,\r\n\r\n    defaultOption: function() {\r\n        return {\r\n            scrollBarH: {\r\n                //size: 10\r\n            },\r\n            scrollBarV: {\r\n                //size: 10\r\n            },\r\n            scrollSizeOnKeyPress: 20\r\n        };\r\n    },\r\n\r\n    constructor: function(container, name) {\r\n        this.uid = \"scrollpane_\" + name + \"_\" + Util.token(4);\r\n        this.option = this.defaultOption();\r\n        this.container = $(container);\r\n        this.init();\r\n    },\r\n\r\n    initContainer: function() {\r\n        this.container.addClass(\"tg-scrollpane\");\r\n        this.scrollpane = this.container;\r\n\r\n        var $scrollview = this.scrollpane.find(\".tg-scrollview\");\r\n        if (!$scrollview.length) {\r\n            $scrollview = $(\"<div></div>\").addClass(\"tg-scrollview\").appendTo(this.scrollpane);\r\n        }\r\n        this.scrollview = $scrollview.get(0);\r\n\r\n        var $scrollbody = $scrollview.find(\".tg-scrollbody\");\r\n        if (!$scrollbody.length) {\r\n            $scrollbody = $(\"<div></div>\").addClass(\"tg-scrollbody\").appendTo($scrollview);\r\n        }\r\n        this.scrollbody = $scrollbody.get(0);\r\n    },\r\n\r\n    init: function() {\r\n\r\n        this.initContainer();\r\n\r\n        var self = this;\r\n\r\n        //h scrollbar bottom\r\n        this.scrollBarH = new ScrollBarH(this.container);\r\n        this.scrollBarH.bind(\"onFocus\", function(e, d) {\r\n            self.scrollbarFocusHandler(e, d);\r\n        }).bind(\"onChange\", function(e, d) {\r\n            //console.log(self.uid, this.uid, d);\r\n            self.scrollHChangeHandler();\r\n        });\r\n\r\n        //v scrollbar right\r\n        this.scrollBarV = new ScrollBarV(this.container);\r\n        this.scrollBarV.bind(\"onFocus\", function(e, d) {\r\n            self.scrollbarFocusHandler(e, d);\r\n        }).bind(\"onChange\", function(e, d) {\r\n            //console.log(self.uid, this.uid, d);\r\n            self.scrollVChangeHandler();\r\n        });\r\n\r\n        return this;\r\n    },\r\n\r\n    //==========================================================================\r\n\r\n    show: function() {\r\n        this.container.show();\r\n        this.visible = true;\r\n        return this;\r\n    },\r\n\r\n    hide: function() {\r\n        this.container.hide();\r\n        this.visible = false;\r\n        return this;\r\n    },\r\n\r\n    //==========================================================================\r\n\r\n    width: function() {\r\n        return this.scrollpaneW;\r\n    },\r\n\r\n    height: function() {\r\n        return this.scrollpaneH;\r\n    },\r\n\r\n    //==========================================================================\r\n\r\n    setFocus: function() {\r\n        this.scrollpane.focus();\r\n        return this;\r\n    },\r\n\r\n    scrollbarFocusHandler: function(e, d) {\r\n        this.setFocus();\r\n    },\r\n\r\n    //==========================================================================\r\n\r\n    render: function(option) {\r\n        if (!this.visible) {\r\n            return this;\r\n        }\r\n\r\n        if (option) {\r\n            this.setOption(option);\r\n        }\r\n\r\n        this.update();\r\n\r\n        return this;\r\n    },\r\n\r\n    update: function() {\r\n        this.scrollpaneW = this.option.scrollpaneW;\r\n        this.scrollpaneH = this.option.scrollpaneH;\r\n        this.scrollbodyW = this.option.scrollbodyW;\r\n        this.scrollbodyH = this.option.scrollbodyH;\r\n\r\n        //console.log(this.uid);\r\n        this.updateScrollBar();\r\n    },\r\n\r\n    //==========================================================================\r\n    //set sync group list\r\n\r\n    setGroupH: function(scrollpaneList) {\r\n        this.groupH = Util.tolist(scrollpaneList);\r\n    },\r\n\r\n    setGroupV: function(scrollpaneList) {\r\n        this.groupV = Util.tolist(scrollpaneList);\r\n    },\r\n\r\n    //==========================================================================\r\n    //sync to list\r\n\r\n    updateGroupH: function() {\r\n        if (!Util.islist(this.groupH)) {\r\n            return this;\r\n        }\r\n        var positionH = this.scrollBarH.getPosition();\r\n        this.groupH.forEach(function(scrollpane) {\r\n            if (!scrollpane) {\r\n                return;\r\n            }\r\n            scrollpane.updateScrollHFromGroup(positionH);\r\n        });\r\n        return this;\r\n    },\r\n\r\n    updateGroupV: function() {\r\n        if (!Util.islist(this.groupV)) {\r\n            return this;\r\n        }\r\n        var positionV = this.scrollBarV.getPosition();\r\n        this.groupV.forEach(function(scrollpane) {\r\n            if (!scrollpane) {\r\n                return;\r\n            }\r\n            scrollpane.updateScrollVFromGroup(positionV);\r\n        });\r\n        return this;\r\n    },\r\n\r\n    updateGroupList: function() {\r\n        this.updateGroupH();\r\n        this.updateGroupV();\r\n    },\r\n\r\n    //==========================================================================\r\n    //sync from group scrollpane\r\n\r\n    updateScrollHFromGroup: function(positionH) {\r\n        var posH = this.scrollBarH.getPosition();\r\n        if (posH === positionH) {\r\n            return;\r\n        }\r\n        this.scrollBarH.setPosition(positionH);\r\n        this.updateScrollLeft();\r\n        this.triggerEvent();\r\n    },\r\n\r\n    updateScrollVFromGroup: function(positionV) {\r\n        var posV = this.scrollBarV.getPosition();\r\n        if (posV === positionV) {\r\n            return;\r\n        }\r\n        this.scrollBarV.setPosition(positionV);\r\n        this.updateScrollTop();\r\n        this.triggerEvent();\r\n    },\r\n\r\n    //==========================================================================\r\n\r\n    //set position from outside \r\n    setPosition: function(scrollLeft, scrollTop) {\r\n        this.scrollBarH.setPosition(scrollLeft);\r\n        this.scrollBarV.setPosition(scrollTop);\r\n\r\n        this.updateScrollLeft();\r\n        this.updateScrollTop();\r\n\r\n        this.updateGroupList();\r\n\r\n        return this;\r\n    },\r\n\r\n    //==========================================================================\r\n\r\n    updateScrollBar: function() {\r\n\r\n        //set option for calculation\r\n        this.scrollBarH.updateOption(this.option.scrollBarH);\r\n        this.scrollBarV.updateOption(this.option.scrollBarV);\r\n\r\n        //start to calculate status and size\r\n        this.updateStatus();\r\n\r\n        //update new size\r\n        this.scrollBarH.updateSize(this.scrollviewW, this.scrollbodyW);\r\n        this.scrollBarV.updateSize(this.scrollviewH, this.scrollbodyH);\r\n\r\n        //update visible and set with last position\r\n        if (this.scrollVisibleH) {\r\n            this.scrollBarH.show();\r\n            this.scrollBarH.setPosition(this.scrollBarH.getPosition());\r\n        } else {\r\n            this.scrollBarH.hide();\r\n        }\r\n        if (this.scrollVisibleV) {\r\n            this.scrollBarV.show();\r\n            this.scrollBarV.setPosition(this.scrollBarV.getPosition());\r\n        } else {\r\n            this.scrollBarV.hide();\r\n        }\r\n\r\n        this.updateScrollLeft();\r\n        this.updateScrollTop();\r\n\r\n        //console.log(\"updateScrollBar\", this.uid);\r\n\r\n        this.updateGroupList();\r\n\r\n    },\r\n\r\n    updateStatus: function() {\r\n\r\n        var scrollbarSizeH = this.scrollBarH.getSize();\r\n        var scrollbarSizeV = this.scrollBarV.getSize();\r\n\r\n        var blankH = this.scrollBarH.getBlank();\r\n        var blankV = this.scrollBarV.getBlank();\r\n\r\n        //========================================\r\n        //scrollH fixing\r\n        var scrollVisibleH = false;\r\n        var scrollSizeH = 0;\r\n        var scrollHStatusHandler = function() {\r\n            if (this.scrollpaneW < this.scrollbodyW || blankH) {\r\n                scrollVisibleH = true;\r\n                scrollSizeH = scrollbarSizeH;\r\n            }\r\n        };\r\n        scrollHStatusHandler.call(this);\r\n\r\n        //========================================\r\n        //scrollV fixing\r\n        var scrollVisibleV = false;\r\n        var scrollSizeV = 0;\r\n        var scrollVStatusHandler = function() {\r\n            if (this.scrollpaneH < this.scrollbodyH + scrollSizeH || blankV) {\r\n                scrollVisibleV = true;\r\n                scrollSizeV = scrollbarSizeV;\r\n                //scrollH fixing again for scrollSizeV change\r\n                if (!scrollVisibleH) {\r\n                    if (this.scrollpaneW < this.scrollbodyW + scrollSizeV) {\r\n                        scrollVisibleH = true;\r\n                        scrollSizeH = scrollbarSizeH;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        scrollVStatusHandler.call(this);\r\n\r\n        //========================================\r\n        this.scrollVisibleH = scrollVisibleH;\r\n        this.scrollVisibleV = scrollVisibleV;\r\n\r\n        this.scrollSizeH = scrollSizeH;\r\n        this.scrollSizeV = scrollSizeV;\r\n\r\n        this.updateScrollView(blankH, blankV);\r\n\r\n        return this;\r\n    },\r\n    /* eslint-disable complexity*/\r\n    updateScrollView: function(blankH, blankV) {\r\n        this.scrollviewW = this.scrollpaneW;\r\n        if (this.scrollVisibleV) {\r\n            this.scrollviewW = this.scrollpaneW - this.scrollSizeV;\r\n        }\r\n        this.scrollviewH = this.scrollpaneH;\r\n        if (this.scrollVisibleH) {\r\n            this.scrollviewH = this.scrollpaneH - this.scrollSizeH;\r\n        }\r\n\r\n        //blank type fixing\r\n        var width = this.scrollviewW;\r\n        if (blankV && blankV !== true) {\r\n            width = this.scrollpaneW;\r\n        }\r\n\r\n        var height = this.scrollviewH;\r\n        if (blankH && blankH !== true) {\r\n            height = this.scrollpaneH;\r\n        }\r\n\r\n        this.scrollview.style.width = width + \"px\";\r\n        this.scrollview.style.height = height + \"px\";\r\n        return this;\r\n    },\r\n    /* eslint-enable*/\r\n    //==========================================================================\r\n    updateScrollLeft: function() {\r\n        var scrollLeft = this.getScrollLeft();\r\n        this.scrollbody.style.left = -scrollLeft + \"px\";\r\n        return this;\r\n    },\r\n\r\n    updateScrollTop: function() {\r\n        var scrollTop = this.getScrollTop();\r\n\r\n        var scrollTopOffset = this.getScrollTopOffset();\r\n        var top = scrollTop - scrollTopOffset;\r\n\r\n        this.scrollbody.style.top = -top + \"px\";\r\n        return this;\r\n    },\r\n\r\n    getScrollLeft: function() {\r\n        var scrollLeft = this.scrollBarH.getPosition();\r\n        return scrollLeft;\r\n    },\r\n\r\n    getScrollTop: function() {\r\n        var scrollTop = this.scrollBarV.getPosition();\r\n        return scrollTop;\r\n    },\r\n\r\n    // max height fixing for IE\r\n    getScrollTopOffset: function() {\r\n        var scrollTop = this.getScrollTop();\r\n\r\n        //max size, bigger than 8K screen\r\n        var top = scrollTop % 10000;\r\n        var scrollTopOffset = scrollTop - top;\r\n\r\n        return scrollTopOffset;\r\n    },\r\n\r\n    triggerEvent: function() {\r\n        this.trigger(\"onChange\", {\r\n            scrollLeft: this.getScrollLeft(),\r\n            scrollTop: this.getScrollTop(),\r\n            scrollTopOffset: this.getScrollTopOffset()\r\n        });\r\n    },\r\n\r\n    //==========================================================================\r\n\r\n    scrollHChangeHandler: function() {\r\n        this.updateScrollLeft();\r\n        this.updateGroupList();\r\n        this.triggerEvent();\r\n    },\r\n\r\n    scrollVChangeHandler: function() {\r\n        this.updateScrollTop();\r\n        this.updateGroupList();\r\n        this.triggerEvent();\r\n    },\r\n\r\n    //==========================================================================\r\n    //set offset from mouse wheel, key up/down/left/right, pageup/pagedown/home/end\r\n    setOffsetH: function(offset) {\r\n        var scrollLeft = this.getScrollLeft();\r\n        this.scrollBarH.setOffset(offset);\r\n        var newScrollLeft = this.getScrollLeft();\r\n        if (newScrollLeft === scrollLeft) {\r\n            return false;\r\n        }\r\n        this.updateScrollLeft();\r\n        this.updateGroupList();\r\n        this.triggerEvent();\r\n        return true;\r\n    },\r\n\r\n    setOffsetV: function(offset) {\r\n        var scrollTop = this.getScrollTop();\r\n        this.scrollBarV.setOffset(offset);\r\n        var newScrollTop = this.getScrollTop();\r\n        if (newScrollTop === scrollTop) {\r\n            return false;\r\n        }\r\n        this.updateScrollTop();\r\n        this.updateGroupList();\r\n        this.triggerEvent();\r\n        return true;\r\n    },\r\n\r\n    //==========================================================================\r\n\r\n    mouseWheelHandler: function(e) {\r\n\r\n        if (!e) {\r\n            return false;\r\n        }\r\n\r\n        var deltaX = e.deltaX;\r\n        var deltaY = e.deltaY;\r\n\r\n        var dx = Math.abs(deltaX);\r\n        var dy = Math.abs(deltaY);\r\n\r\n        //only choose one direction\r\n        if (dx > dy) {\r\n            if (this.scrollVisibleH) {\r\n                return this.setOffsetH(deltaX);\r\n            }\r\n        } else {\r\n            if (this.scrollVisibleV) {\r\n                return this.setOffsetV(deltaY);\r\n            }\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    //==========================================================================\r\n\r\n    keyPageUpHandler: function(e) {\r\n        return this.setOffsetV(-this.scrollviewH);\r\n    },\r\n\r\n    keyPageDownHandler: function(e) {\r\n        return this.setOffsetV(this.scrollviewH);\r\n    },\r\n\r\n    keyEndHandler: function(e) {\r\n        return this.setOffsetV(this.scrollbodyH);\r\n    },\r\n\r\n    keyHomeHandler: function(e) {\r\n        return this.setOffsetV(-this.scrollbodyH);\r\n    },\r\n\r\n    //==========================================================================\r\n\r\n    keyLeftHandler: function(e) {\r\n        return this.setOffsetH(-this.option.scrollSizeOnKeyPress);\r\n    },\r\n\r\n    keyUpHandler: function(e) {\r\n        return this.setOffsetV(-this.option.scrollSizeOnKeyPress);\r\n    },\r\n\r\n    keyRightHandler: function(e) {\r\n        return this.setOffsetH(this.option.scrollSizeOnKeyPress);\r\n    },\r\n\r\n    keyDownHandler: function(e) {\r\n        return this.setOffsetV(this.option.scrollSizeOnKeyPress);\r\n    },\r\n\r\n    //==========================================================================\r\n\r\n    destroy: function() {\r\n        this.groupH = null;\r\n        this.groupV = null;\r\n        this.unbind();\r\n        this.scrollBarV.destroy();\r\n        this.scrollBarV = null;\r\n        this.scrollBarH.destroy();\r\n        this.scrollBarH = null;\r\n        this.scrollpane.unbind();\r\n        this.scrollpane = null;\r\n        this.scrollview = null;\r\n        this.scrollbody = null;\r\n        this.container = null;\r\n        return this;\r\n    },\r\n\r\n    //==========================================================================\r\n\r\n    toString: function() {\r\n        return \"[object ScrollPane]\";\r\n    }\r\n});\r\n\r\nmodule.exports = ScrollPane;","var EventBase = require(\"../../core/event-base.js\");\r\n\r\nvar ViewCells = require(\"./view-cells.js\");\r\nvar ViewColumnLine = require(\"./view-column-line.js\");\r\nvar ViewColumns = require(\"./view-columns.js\");\r\n\r\nvar ViewCss = require(\"./view-css.js\");\r\nvar ViewEditor = require(\"./view-editor.js\");\r\nvar ViewEvents = require(\"./view-events.js\");\r\n\r\nvar ViewHeaderTable = require(\"./view-header-table.js\");\r\nvar ViewHeaders = require(\"./view-headers.js\");\r\n\r\nvar ViewInvalidate = require(\"./view-invalidate.js\");\r\nvar ViewNavigate = require(\"./view-navigate.js\");\r\nvar ViewNode = require(\"./view-node.js\");\r\nvar ViewResize = require(\"./view-resize.js\");\r\n\r\nvar ViewRowCache = require(\"./view-row-cache.js\");\r\nvar ViewRows = require(\"./view-rows.js\");\r\n\r\nvar ViewScroll = require(\"./view-scroll.js\");\r\nvar ViewScrollpaneStatus = require(\"./view-scrollpane-status.js\");\r\nvar ViewScrollpane = require(\"./view-scrollpane.js\");\r\n\r\nvar ViewVisibleRange = require(\"./view-visible-range.js\");\r\n\r\nvar ViewBase = EventBase.mixin(\r\n\r\n    ViewCells,\r\n\r\n    ViewColumnLine,\r\n    ViewColumns,\r\n\r\n    ViewCss,\r\n    ViewEditor,\r\n    ViewEvents,\r\n\r\n    ViewHeaderTable,\r\n    ViewHeaders,\r\n\r\n    ViewInvalidate,\r\n    ViewNavigate,\r\n    ViewNode,\r\n    ViewResize,\r\n\r\n    ViewRowCache,\r\n    ViewRows,\r\n\r\n    ViewScroll,\r\n    ViewScrollpaneStatus,\r\n    ViewScrollpane,\r\n\r\n    ViewVisibleRange\r\n);\r\n\r\nmodule.exports = ViewBase;","var $ = require(\"../../core/query.js\");\r\nvar E = require(\"../../core/event-type.js\");\r\nvar Util = require(\"../../core/util.js\");\r\n\r\nvar Cells = {\r\n\r\n    renderCells: function(rowList, columnList) {\r\n        //var t1 = new Date();\r\n\r\n        var self = this;\r\n        rowList.forEach(function(rowIndex) {\r\n            self.drawRowCells(rowIndex, columnList);\r\n        });\r\n\r\n        //console.log(new Date() - t1);\r\n    },\r\n\r\n    getPreRenderColumnList: function(rowIndex, columnList) {\r\n        var list = [];\r\n        if (!columnList.length) {\r\n            return list;\r\n        }\r\n        for (var i = 0, l = columnList.length; i < l; i++) {\r\n            var columnIndex = columnList[i];\r\n            var cellNode = this.getCellNode(rowIndex, columnIndex);\r\n            if (!cellNode) {\r\n                list.push(columnIndex);\r\n            }\r\n        }\r\n        return list;\r\n    },\r\n\r\n    isFrozenColumm: function(columnIndex) {\r\n        if (this.hasFrozenColumns && columnIndex <= this.option.frozenColumn) {\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n\r\n    drawRowCells: function(rowIndex, columnList) {\r\n        var columns = this.getPreRenderColumnList(rowIndex, columnList);\r\n        if (!columns.length) {\r\n            return;\r\n        }\r\n        var self = this;\r\n        columns.forEach(function(columnIndex) {\r\n            self.drawCell(rowIndex, columnIndex);\r\n        });\r\n    },\r\n\r\n    getColumnItem: function(columnIndex) {\r\n        var columnData = this.allColumns[columnIndex];\r\n        return columnData;\r\n    },\r\n    /* eslint-disable complexity*/\r\n    getCellClass: function(rowData, columnData) {\r\n        var rowIndex = rowData.tg_index;\r\n        var columnIndex = columnData.tg_index;\r\n\r\n        var cellCss = [\"tg-cell\"];\r\n\r\n        cellCss.push(\"tg-c-\" + columnIndex);\r\n\r\n        //level class\r\n        cellCss.push(\"tg-level-\" + columnData.tg_level);\r\n\r\n        if (columnData.align) {\r\n            cellCss.push(\"tg-align-\" + columnData.align);\r\n        }\r\n\r\n        if (columnData.cellClass) {\r\n            cellCss.push(columnData.cellClass);\r\n        }\r\n\r\n        /* jshint ignore:start */\r\n        //list index first\r\n        if (columnData.tg_list_index === 0) {\r\n            cellCss.push(\"tg-list-first\");\r\n        } else if (columnData.tg_list_index === columnData.tg_list_length - 1) {\r\n            cellCss.push(\"tg-list-last\");\r\n        }\r\n        /* jshint ignore:end */\r\n\r\n        if (rowIndex === this.activeRow && columnIndex === this.activeColumn) {\r\n            cellCss.push(\"tg-active\");\r\n        }\r\n\r\n        var cellClass = cellCss.join(\" \");\r\n        return cellClass;\r\n    },\r\n    /* eslint-enable*/\r\n    createCellNode: function(rowData, columnData) {\r\n        var cellClass = this.getCellClass(rowData, columnData);\r\n        var cellNode = document.createElement(\"div\");\r\n        cellNode.className = cellClass;\r\n        cellNode.setAttribute(\"index\", columnData.tg_index);\r\n        return cellNode;\r\n    },\r\n\r\n    drawCell: function(rowIndex, columnIndex) {\r\n\r\n        var rowCache = this.getRowCache(rowIndex);\r\n        if (!rowCache || !rowCache.rowNodes) {\r\n            return;\r\n        }\r\n\r\n        var rowData = this.getRowItem(rowIndex);\r\n        var columnData = this.getColumnItem(columnIndex);\r\n        if (!rowData || !columnData) {\r\n            return;\r\n        }\r\n\r\n\r\n\r\n        var cellNode = this.createCellNode(rowData, columnData);\r\n        this.appendCellNode(rowCache, columnIndex, cellNode);\r\n\r\n        this.cellContentHandler(rowData, columnData, cellNode);\r\n\r\n    },\r\n\r\n    appendCellNode: function(rowCache, columnIndex, cellNode) {\r\n        var rowNodes = rowCache.rowNodes;\r\n        if (!this.hasFrozenColumns || this.isFrozenColumm(columnIndex)) {\r\n            this.appendNode(rowNodes[0], cellNode);\r\n        } else {\r\n            this.appendNode(rowNodes[1], cellNode);\r\n        }\r\n        //cache\r\n        rowCache.cellNodes[columnIndex] = cellNode;\r\n    },\r\n    /* eslint-disable complexity*/\r\n\r\n    cellContentHandler: function(rowData, columnData, cellNode) {\r\n\r\n        //blank row\r\n        if (rowData.rowType === \"blank\") {\r\n            return;\r\n        }\r\n\r\n        this.cellStyleHandler(rowData, columnData, cellNode);\r\n\r\n        var value = this.getCellValue(rowData, columnData);\r\n        var rowIndex = rowData.tg_index;\r\n        var columnIndex = columnData.tg_index;\r\n\r\n        //add content\r\n        if (typeof(columnData.tg_formatter) === \"function\") {\r\n\r\n            var content = columnData.tg_formatter(value, rowData, columnData, rowIndex, columnIndex, cellNode);\r\n\r\n            this.drawCellContent(cellNode, content);\r\n\r\n            this.trigger(E.onCellRendered, {\r\n                value: value,\r\n                row: rowIndex,\r\n                column: columnIndex,\r\n                rowItem: rowData,\r\n                columnItem: columnData,\r\n                node: cellNode\r\n            });\r\n\r\n        }\r\n\r\n        //add title\r\n        if (columnData.titleable && typeof(columnData.tg_titleFormatter) === \"function\") {\r\n            var title = columnData.tg_titleFormatter(value, rowData, columnData, rowIndex, columnIndex, cellNode);\r\n            if (title) {\r\n                cellNode.setAttribute(\"title\", title);\r\n            }\r\n        }\r\n\r\n    },\r\n    /* eslint-enable*/\r\n    //Conditional Formatting\r\n    cellStyleHandler: function(rowData, columnData, cellNode) {\r\n        var conditionalStyleList = this.option.conditionalStyleList;\r\n        if (!Util.islist(conditionalStyleList)) {\r\n            return;\r\n        }\r\n        var id = columnData.id;\r\n        var cellStyle = cellNode.style;\r\n        conditionalStyleList.forEach(function(item) {\r\n            var key = id + \"_\" + item;\r\n            if (rowData.hasOwnProperty(key)) {\r\n                cellStyle[item] = rowData[key];\r\n            }\r\n        });\r\n\r\n        //backgroundColor for hover blend \r\n        this.rowHoverCellInitHandler(rowData, columnData, cellStyle);\r\n\r\n    },\r\n\r\n    drawCellContent: function(cellNode, content) {\r\n        //high performance code\r\n        if (typeof(content) === \"string\") {\r\n            cellNode.innerHTML = content;\r\n        } else {\r\n            //empty first, and append for dom content\r\n            cellNode.innerHTML = \"\";\r\n            $(cellNode).append(content);\r\n        }\r\n    },\r\n\r\n    //=============================================================================================\r\n\r\n    rowHoverCellInitHandler: function(rowData, columnData, cellStyle) {\r\n        var keyColor = \"tg_\" + columnData.id + \"_backgroundColor\";\r\n        var keyHover = keyColor + \"_hover\";\r\n        var backgroundColor = cellStyle.backgroundColor;\r\n        if (backgroundColor) {\r\n            rowData[keyColor] = backgroundColor;\r\n            var backgroundColorHover = this.getBlendColor(backgroundColor);\r\n            //console.log(backgroundColorHover);\r\n            rowData[keyHover] = backgroundColorHover;\r\n        } else if (rowData[keyColor]) {\r\n            delete rowData[keyColor];\r\n            delete rowData[keyHover];\r\n        }\r\n\r\n    },\r\n\r\n    getBlendColor: function(rgb) {\r\n        //current back color #eaeaea after blend #ffffff\r\n        //parseInt(\"ea\", 16) = 234\r\n        //255 - 234 = 21;\r\n        var rgbBack = 21;\r\n\r\n        //234 / 255 = 0.9176470588235294\r\n        var opacity = 0.92;\r\n\r\n        //rgb(224, 156, 175)\r\n        var list = rgb.match(/\\d+/g);\r\n        if (!list || list.length < 3) {\r\n            list = [255, 255, 255];\r\n        }\r\n\r\n        var mergeColor = function(c, b, a) {\r\n            var v = c * a + b * (1 - a);\r\n            return Math.round(v);\r\n        };\r\n\r\n        list[0] = mergeColor(list[0], rgbBack, opacity);\r\n        list[1] = mergeColor(list[1], rgbBack, opacity);\r\n        list[2] = mergeColor(list[2], rgbBack, opacity);\r\n\r\n        var newRGB = \"rgb(\" + list.join(\", \") + \")\";\r\n\r\n        return newRGB;\r\n    },\r\n\r\n    rowHoverCellHandler: function(rowIndex, hover) {\r\n        var rowItem = this.getRowItem(rowIndex);\r\n        if (!rowItem) {\r\n            return this;\r\n        }\r\n        var self = this;\r\n        var columnList = this.visibleRange.columnList;\r\n        columnList.forEach(function(columnIndex) {\r\n            var columnItem = self.getColumnItem(columnIndex);\r\n            var keyColor = \"tg_\" + columnItem.id + \"_backgroundColor\";\r\n            var keyHover = keyColor + \"_hover\";\r\n            if (hover) {\r\n                self.setCellBackgroundColor(rowIndex, columnIndex, rowItem[keyHover]);\r\n            } else {\r\n                self.setCellBackgroundColor(rowIndex, columnIndex, rowItem[keyColor]);\r\n            }\r\n        });\r\n        return this;\r\n    },\r\n\r\n    setCellBackgroundColor: function(rowIndex, columnIndex, backgroundColor) {\r\n        if (!backgroundColor) {\r\n            return this;\r\n        }\r\n        var cellNode = this.getCellNode(rowIndex, columnIndex);\r\n        if (cellNode) {\r\n            cellNode.style.backgroundColor = backgroundColor;\r\n        }\r\n        return this;\r\n    },\r\n\r\n    //=============================================================================================\r\n\r\n    getPositionByNode: function(node) {\r\n        var $cell = $(node).closest(\".tg-cell\", this.$canvas);\r\n        if (!$cell.length) {\r\n            return null;\r\n        }\r\n        var column = this.getNodeIndex($cell);\r\n\r\n        var $row = $cell.closest(\".tg-row\", this.$canvas);\r\n        if (!$row.length) {\r\n            return null;\r\n        }\r\n        var row = this.getNodeIndex($row);\r\n\r\n        var position = {\r\n            row: row,\r\n            column: column,\r\n            rowNode: $row,\r\n            cellNode: $cell\r\n        };\r\n        return position;\r\n    },\r\n\r\n    getPositionByEvent: function(e) {\r\n        if (!e) {\r\n            return null;\r\n        }\r\n        var position = this.getPositionByNode(e.target);\r\n        if (position) {\r\n            position.e = e;\r\n        }\r\n        return position;\r\n    },\r\n\r\n    //=============================================================================================\r\n    // Cell switching\r\n\r\n    getActiveCell: function() {\r\n        if (!this.activeNode) {\r\n            return null;\r\n        }\r\n\r\n        var active = {\r\n            row: this.activeRow,\r\n            column: this.activeColumn\r\n        };\r\n\r\n        return active;\r\n    },\r\n\r\n    resetActiveCell: function() {\r\n        this.setActiveCellNode(null);\r\n    },\r\n\r\n    setActiveCell: function(rowIndex, columnIndex, forceEdit) {\r\n\r\n        var rowItem = this.getRowItem(rowIndex);\r\n        var columnItem = this.getColumnItem(columnIndex);\r\n        if (!rowItem || !columnItem) {\r\n            return;\r\n        }\r\n\r\n        this.scrollItemIntoView(rowItem, columnItem);\r\n\r\n        var cellNode = this.getCellNode(rowIndex, columnIndex);\r\n        this.setActiveCellNode(cellNode, forceEdit);\r\n\r\n        var activeCell = this.getActiveCell();\r\n        this.trigger(E.onActiveCellChanged, activeCell);\r\n\r\n    },\r\n\r\n    //=============================================================================================\r\n\r\n    setActiveCellNode: function(newActiveNode, forceEdit) {\r\n\r\n        //prev active node handler \r\n        this.previousActiveCellNodeHandler();\r\n\r\n        //remove active\r\n        if (!newActiveNode) {\r\n            this.activeNode = null;\r\n            this.activeRow = null;\r\n            this.activeColumn = null;\r\n            return;\r\n        }\r\n\r\n        //change active\r\n        this.activeNode = newActiveNode;\r\n\r\n        //current active cell node handler\r\n        this.currentActiveCellNodeHandler();\r\n\r\n        //edit mode handler\r\n        this.editActiveCellNodeHandler(forceEdit);\r\n\r\n    },\r\n\r\n    previousActiveCellNodeHandler: function() {\r\n        if (!this.activeNode) {\r\n            return;\r\n        }\r\n        //remove edit\r\n        this.removeCellEditor();\r\n        //remove className active\r\n        $(this.activeNode).removeClass(\"tg-active\");\r\n        var rowCache = this.getRowCache(this.activeRow);\r\n        if (rowCache) {\r\n            $(rowCache.rowNodes).removeClass(\"tg-active\");\r\n        }\r\n    },\r\n\r\n    currentActiveCellNodeHandler: function() {\r\n        if (!this.activeNode) {\r\n            return;\r\n        }\r\n\r\n        var position = this.getPositionByNode(this.activeNode);\r\n\r\n        this.activeRow = position.row;\r\n        this.activeColumn = position.column;\r\n\r\n        this.activePosX = position.column;\r\n\r\n        //add className\r\n        $(this.activeNode).addClass(\"tg-active\");\r\n        var rowCache = this.getRowCache(this.activeRow);\r\n        if (rowCache) {\r\n            $(rowCache.rowNodes).addClass('tg-active');\r\n        }\r\n    },\r\n\r\n    //=============================================================================================\r\n\r\n    findFirstFocusableCell: function(row) {\r\n        var columns = this.columns;\r\n        var column = 0;\r\n        while (column < columns.length) {\r\n            if (this.isCellEditable(row, column)) {\r\n                return column;\r\n            }\r\n            column += 1;\r\n        }\r\n        return null;\r\n    },\r\n\r\n    findLastFocusableCell: function(row) {\r\n        var columns = this.columns;\r\n        var column = 0;\r\n        var lastFocusableCell = null;\r\n        while (column < columns.length) {\r\n            if (this.isCellEditable(row, column)) {\r\n                lastFocusableCell = column;\r\n            }\r\n            column += 1;\r\n        }\r\n        return lastFocusableCell;\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = Cells;","//var E = require(\"../../core/event-type.js\");\r\nvar Util = require(\"../../core/util.js\");\r\n\r\nvar ColumnLine = {\r\n\r\n    setResizingColumn: function(column) {\r\n        if (!column || !this.isColumnResizable(column)) {\r\n            this.hideColumnLine();\r\n            return;\r\n        }\r\n        if (column.tg_group) {\r\n            //TODO get last column\r\n            return;\r\n        }\r\n        this.showColumnLine(column);\r\n    },\r\n\r\n    initColumnLine: function() {\r\n        this.columnLineContainer = this.find(\".tg-column-line\");\r\n        this.columnLineHeader = this.find(\".tg-column-line-header\");\r\n        this.columnLineItem = this.find(\".tg-column-line-item\");\r\n        this.columnLineItemL = this.find(\".tg-column-line-l\");\r\n        this.columnLineItemR = this.find(\".tg-column-line-r\");\r\n\r\n        var self = this;\r\n        this.columnLineHeader.bind(\"mouseenter\", function(e) {\r\n            self.setColumnLineHover(true);\r\n        }).bind(\"mouseleave\", function(e) {\r\n            self.setColumnLineHover(false);\r\n        }).bind(\"mousedown\", function(e) {\r\n            self.setColumnLineActive(true);\r\n            self.columnWidthDrag.start({\r\n                e: e,\r\n                column: self.columnLineColumn\r\n            });\r\n        }).bind(\"mouseup\", function(e) {\r\n            self.setColumnLineActive(false);\r\n        }).bind(\"touchstart\", function(e) {\r\n            self.columnWidthTouch.start({\r\n                e: e,\r\n                column: self.columnLineColumn,\r\n                holder: self.$container\r\n            });\r\n        }).bind(\"touchend\", function(e) {\r\n            self.setColumnLineActive(false);\r\n            self.setColumnLineHover(false);\r\n        });\r\n\r\n    },\r\n\r\n    setColumnLineHover: function(hover) {\r\n        Util.getRhythm(this, \"hide_column_line\").destroy();\r\n        if (hover) {\r\n            this.columnLineItem.addClass(\"tg-hover\");\r\n        } else {\r\n            this.columnLineItem.removeClass(\"tg-hover\");\r\n        }\r\n    },\r\n\r\n    setColumnLineActive: function(active) {\r\n        this.columnLineActive = active;\r\n        if (active) {\r\n            this.columnLineItem.addClass(\"tg-active\");\r\n        } else {\r\n            this.columnLineItem.removeClass(\"tg-active\");\r\n        }\r\n    },\r\n\r\n\r\n    showColumnLine: function(column) {\r\n        if (this.columnLineActive) {\r\n            return;\r\n        }\r\n\r\n        this.columnLineColumn = column;\r\n\r\n        //console.log(\"showColumnLine\");\r\n\r\n        this.updateColumnLine();\r\n\r\n        this.columnLineContainer.show();\r\n\r\n        //stop hide\r\n        Util.getRhythm(this, \"hide_column_line\").destroy();\r\n\r\n        return this;\r\n    },\r\n\r\n    /* eslint-disable complexity*/\r\n    updateColumnLine: function() {\r\n\r\n        var column = this.columnLineColumn;\r\n        if (!column) {\r\n            return;\r\n        }\r\n\r\n        var left = column.tg_left;\r\n        if (!column.tg_frozen) {\r\n            left -= this.scrollLeft;\r\n        }\r\n\r\n        var node = this.getHeaderNode(column);\r\n        var elem = node.parent().get(0);\r\n\r\n        var height = elem.clientHeight;\r\n        var top = elem.offsetTop;\r\n        var width = column.width;\r\n\r\n        //console.log(left);\r\n\r\n        this.columnLineItemL.css({\r\n            top: top,\r\n            left: left\r\n        });\r\n\r\n        if (this.hasFrozenColumns && !column.tg_frozen && left < this.paneWidthL) {\r\n            //hide left line if has scroll left less than frozen left\r\n            this.columnLineItemL.hide();\r\n        } else {\r\n            this.columnLineItemL.show();\r\n        }\r\n\r\n        this.columnLineItemR.css({\r\n            top: top,\r\n            left: left + width - 1\r\n        });\r\n\r\n        this.columnLineHeader.css({\r\n            top: top,\r\n            height: height,\r\n            left: left + width - 5\r\n        });\r\n    },\r\n    /* eslint-enable*/\r\n\r\n    hideColumnLine: function() {\r\n        //console.log(\"hide\");\r\n        Util.getRhythm(this, \"hide_column_line\").debounce({\r\n            delay: 100,\r\n            callback: this.hideColumnLineNow\r\n        });\r\n    },\r\n\r\n    hideColumnLineNow: function() {\r\n        if (this.columnLineActive) {\r\n            return;\r\n        }\r\n        //console.log(\"hideNow\");\r\n        this.columnLineContainer.hide();\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = ColumnLine;","var E = require(\"../../core/event-type.js\");\r\nvar Util = require(\"../../core/util.js\");\r\n\r\nvar Columns = {\r\n\r\n    setColumns: function(columns, allColumns) {\r\n        this.columns = columns;\r\n        this.allColumns = allColumns;\r\n        //init column list cache\r\n        this.blankColumn = this.getBlankColumn();\r\n        this.headerNodeCache = {};\r\n        this.columnsById = {};\r\n        for (var i = 0, l = allColumns.length; i < l; i++) {\r\n            var m = allColumns[i];\r\n            this.columnsById[m.id] = i;\r\n        }\r\n        return this;\r\n    },\r\n\r\n    getColumns: function() {\r\n        return this.columns;\r\n    },\r\n\r\n    //get column index by id\r\n    getColumnIndex: function(id) {\r\n        return this.columnsById[id];\r\n    },\r\n\r\n    getBlankColumn: function() {\r\n        return this.columns[this.columns.length - 1];\r\n    },\r\n\r\n    //==========================================================================================\r\n\r\n    isColumnSortable: function(column) {\r\n        if (!column) {\r\n            return false;\r\n        }\r\n        //default is true\r\n        if (!column.hasOwnProperty(\"sortable\")) {\r\n            return true;\r\n        }\r\n        return column.sortable ? true : false;\r\n    },\r\n\r\n    isColumnResizable: function(column) {\r\n        if (!column) {\r\n            return false;\r\n        }\r\n        //default is true\r\n        if (!column.hasOwnProperty(\"resizable\")) {\r\n            return true;\r\n        }\r\n        return column.resizable ? true : false;\r\n    },\r\n\r\n    //==========================================================================================\r\n\r\n    setSortColumn: function(sortColumn) {\r\n\r\n        if (!sortColumn) {\r\n            return this;\r\n        }\r\n\r\n        if (!this.isColumnSortable(sortColumn)) {\r\n            return this;\r\n        }\r\n\r\n        this.removeSortColumn();\r\n\r\n        this.sortColumn = sortColumn;\r\n\r\n        //add new column sorted\r\n        var sortColumnElem = this.$headers.find(\".tg-header-column[index='\" + sortColumn.tg_index + \"']\");\r\n        sortColumnElem.addClass(\"tg-header-column-sorted\");\r\n\r\n        //update placeholder for sortAsc\r\n        var sortPlaceholder = sortColumnElem.find(\".tg-sort-placeholder\");\r\n        sortPlaceholder.removeClass(\"tg-sort-asc\");\r\n        sortPlaceholder.removeClass(\"tg-sort-desc\");\r\n\r\n        var classSortAsc = sortColumn.sortAsc ? \"tg-sort-asc\" : \"tg-sort-desc\";\r\n        sortPlaceholder.addClass(classSortAsc);\r\n\r\n        return this;\r\n    },\r\n\r\n    removeSortColumn: function() {\r\n        this.sortColumn = null;\r\n\r\n        //remove column sorted \r\n        var sorted = this.$headers.find(\".tg-header-column-sorted\");\r\n        sorted.removeClass(\"tg-header-column-sorted\");\r\n\r\n        return this;\r\n    },\r\n\r\n    //==========================================================================================\r\n\r\n    setColumnWidth: function(columnItem, width) {\r\n\r\n        //change width for column data\r\n        var newWidth = Util.clamp(width, columnItem.minWidth, columnItem.maxWidth);\r\n        if (columnItem.width === newWidth) {\r\n            return;\r\n        }\r\n        columnItem.width = newWidth;\r\n\r\n        //change width for column elements, both for all parent container\r\n        var $node = this.getHeaderNode(columnItem);\r\n        this.setColumnNodeWidth($node, newWidth);\r\n\r\n        var columnTopGroup = this.getColumnTopGroup(columnItem);\r\n        this.updateColumnGroupWidth(columnTopGroup);\r\n\r\n        //update bodyer, true: force update css rules\r\n        this.updateBodyerSize(true);\r\n\r\n        this.trigger(E.onColumnWidthChanged, columnItem);\r\n\r\n    },\r\n\r\n    //==========================================================================================\r\n\r\n    setColumnNodeWidth: function($node, width) {\r\n        if (!$node || !$node.get(0)) {\r\n            return;\r\n        }\r\n\r\n        //do NOT use $node.width(width), it has column border issue\r\n\r\n        var node = $node.get(0);\r\n        node.style.width = width + \"px\";\r\n\r\n        var td = node.parentNode;\r\n        td.style.width = width + \"px\";\r\n\r\n        //if width is 0, height fix\r\n        if (width <= 0) {\r\n            node.style.display = \"none\";\r\n        } else {\r\n            node.style.display = \"\";\r\n        }\r\n\r\n    },\r\n\r\n    getColumnTopGroup: function(column) {\r\n        if (!column || !column.tg_parent) {\r\n            return null;\r\n        }\r\n        var group = column;\r\n        while (group.tg_parent) {\r\n            group = group.tg_parent;\r\n        }\r\n        return group;\r\n    },\r\n\r\n    updateColumnGroupWidth: function(group) {\r\n        if (!group || !Util.islist(group.subs)) {\r\n            return;\r\n        }\r\n        var width = 0;\r\n        var self = this;\r\n        group.subs.forEach(function(item) {\r\n            if (item.tg_group) {\r\n                self.updateColumnGroupWidth(item);\r\n            }\r\n            if (Util.isnum(item.width)) {\r\n                width += item.width;\r\n            }\r\n        });\r\n        var $node = this.getHeaderNode(group);\r\n        this.setColumnNodeWidth($node, width);\r\n        group.width = width;\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = Columns;","var $ = require(\"../../core/query.js\");\r\n\r\nvar CssRules = {\r\n\r\n    //grid css rules\r\n\r\n    initCssRules: function() {\r\n        this.removeCssRules();\r\n        this.$style = $(\"<style type='text/css' rel='stylesheet' />\").appendTo($(\"head\"));\r\n        this.$style.attr(\"uid\", this.uid);\r\n        //common\r\n        var ns = \".\" + this.uid + \" \";\r\n        var rules = [];\r\n\r\n        //rows\r\n        var h = this.option.rowHeight;\r\n        rules.push(ns + \".tg-row { height : \" + h + \"px; line-height : \" + h + \"px; }\");\r\n\r\n        //columns\r\n        var columns = this.columns;\r\n        for (var i = 0; i < columns.length; i++) {\r\n            rules.push(ns + \".tg-c-\" + i + \" { }\");\r\n        }\r\n\r\n        this.$style.append(rules.join(\" \"));\r\n\r\n        var sheet = this.$style[0].sheet;\r\n        if (!sheet) {\r\n            console.log(\"Your browser do NOT support style sheet\");\r\n            return;\r\n        }\r\n\r\n        this.updateCssRulesCache(sheet.cssRules, ns);\r\n\r\n    },\r\n\r\n    updateCssRulesCache: function(cssRules, ns) {\r\n        this.cssRulesCache = {};\r\n        if (!cssRules) {\r\n            return;\r\n        }\r\n        for (var i = 0, l = cssRules.length; i < l; i++) {\r\n            var rule = cssRules[i];\r\n            var selector = (rule.selectorText + \"\").split(ns).join(\"\");\r\n            this.cssRulesCache[selector] = rule;\r\n        }\r\n\r\n    },\r\n\r\n    getCssRule: function(className) {\r\n        return this.cssRulesCache[className];\r\n    },\r\n\r\n    updateCssRuleItem: function(i, left, width) {\r\n        var rule = this.getCssRule(\".tg-c-\" + i);\r\n        if (!rule) {\r\n            return;\r\n        }\r\n        rule.style.left = left + \"px\";\r\n        rule.style.width = width + \"px\";\r\n        if (width === 0) {\r\n            rule.style.display = \"none\";\r\n        } else {\r\n            rule.style.display = \"\";\r\n        }\r\n    },\r\n\r\n    getColumnNodeWidth: function(column) {\r\n        var width = column.width;\r\n        if (column.tg_hidden || width <= 0) {\r\n            width = 0;\r\n        }\r\n        return width;\r\n    },\r\n\r\n    updateCssRules: function() {\r\n        var option = this.option;\r\n        var columns = this.columns;\r\n        var left = 0;\r\n        for (var i = 0, l = columns.length; i < l; i++) {\r\n            var column = columns[i];\r\n            var width = this.getColumnNodeWidth(column);\r\n            this.updateCssRuleItem(i, left, width);\r\n            if (option.frozenColumn === i) {\r\n                left = 0;\r\n            } else {\r\n                left += width;\r\n            }\r\n        }\r\n    },\r\n\r\n    removeCssRules: function(uid) {\r\n        if (this.$style) {\r\n            this.$style.remove();\r\n            this.$style = null;\r\n        }\r\n        if (uid) {\r\n            $('style[uid=\"' + uid + '\"]').remove();\r\n        }\r\n\r\n        this.cssRulesCache = null;\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = CssRules;","var $ = require(\"../../core/query.js\");\r\nvar E = require(\"../../core/event-type.js\");\r\nvar Editor = {\r\n\r\n    getEditor: function(columnIndex) {\r\n        var column = this.columns[columnIndex];\r\n        return column.tg_editor;\r\n    },\r\n\r\n    setFocus: function() {\r\n        if (this.tabbingDirection === -1) {\r\n            this.$focusSinkStart.focus();\r\n        } else {\r\n            this.$focusSinkEnd.focus();\r\n        }\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    updateCell: function(rowIndex, columnIndex) {\r\n\r\n        var cellNode = this.getCellNode(rowIndex, columnIndex);\r\n        if (!cellNode) {\r\n            return;\r\n        }\r\n\r\n        var rowData = this.getRowItem(rowIndex);\r\n        var columnData = this.getColumnItem(columnIndex);\r\n\r\n        if (this.isCellEditActive(rowIndex, columnIndex)) {\r\n            //if in editing\r\n            this.currentEditor.updateData(rowData, columnData);\r\n        } else {\r\n            this.cellContentHandler(rowData, columnData, cellNode);\r\n        }\r\n    },\r\n\r\n    updateRow: function(rowIndex) {\r\n        var rowCache = this.getRowCache(rowIndex);\r\n        if (!rowCache) {\r\n            return;\r\n        }\r\n        var cellNodes = rowCache.cellNodes;\r\n        for (var i = 0, l = cellNodes.length; i < l; i++) {\r\n            var cellNode = cellNodes[i];\r\n            if (cellNode) {\r\n                this.updateCell(rowIndex, i);\r\n            }\r\n        }\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    isCellEditActive: function(rowIndex, columnIndex) {\r\n        if (this.currentEditor && this.activeRow === rowIndex && this.activeColumn === columnIndex) {\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n\r\n    isCellEditable: function(rowIndex, columnIndex) {\r\n\r\n        if (!this.getEditor(columnIndex)) {\r\n            return false;\r\n        }\r\n\r\n        var rowItem = this.getRowItem(rowIndex);\r\n        var columnItem = this.getColumnItem(columnIndex);\r\n\r\n        var editable = true;\r\n\r\n        //for row \r\n        if (rowItem.hasOwnProperty(\"editable\")) {\r\n            editable = rowItem.editable;\r\n        }\r\n\r\n        //for cell, high priority\r\n        var cell_editable_key = columnItem.id + \"_editable\";\r\n        if (rowItem.hasOwnProperty(cell_editable_key)) {\r\n            editable = rowItem[cell_editable_key];\r\n        }\r\n\r\n        return editable ? true : false;\r\n    },\r\n\r\n    //=============================================================================\r\n    // IEditor implementation for the editor lock\r\n\r\n    commitCurrentEdit: function() {\r\n        if (!this.currentEditor) {\r\n            return false;\r\n        }\r\n\r\n        if (this.currentEditor.isValueChanged()) {\r\n            var newValue = this.currentEditor.getValue();\r\n            var validationResults = this.currentEditor.validate(newValue);\r\n            if (validationResults.valid) {\r\n\r\n                this.currentEditor.applyValue();\r\n                this.currentEditor.completed = true;\r\n\r\n                this.onCellEditValueChangedHandler();\r\n                this.onCellEditCompleteHandler();\r\n\r\n                return true;\r\n            } else {\r\n\r\n                $(this.activeNode).addClass(\"tg-invalid\");\r\n                this.currentEditor.focus();\r\n\r\n                this.onCellEditErrorHandler(validationResults);\r\n\r\n                return false;\r\n            }\r\n        }\r\n\r\n        this.onCellEditCompleteHandler();\r\n\r\n        return true;\r\n    },\r\n\r\n    cancelCurrentEdit: function() {\r\n        this.removeCellEditor();\r\n        return true;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    removeCellEditor: function() {\r\n        if (!this.currentEditor) {\r\n            return;\r\n        }\r\n\r\n        this.onCellEditDestroyHandler();\r\n\r\n        this.currentEditor.destroy();\r\n        this.currentEditor = null;\r\n\r\n        if (this.activeNode) {\r\n            $(this.activeNode).removeClass(\"tg-editable\").removeClass(\"tg-invalid\");\r\n            this.updateCell(this.activeRow, this.activeColumn);\r\n        }\r\n\r\n    },\r\n\r\n    createCellEditor: function() {\r\n        if (!this.activeNode) {\r\n            return;\r\n        }\r\n\r\n        if (!this.isCellEditable(this.activeRow, this.activeColumn)) {\r\n            return;\r\n        }\r\n\r\n        //cancel previous editor and removed it\r\n        if (this.currentEditor) {\r\n            this.doCancelCurrentEdit();\r\n            this.removeCellEditor();\r\n        }\r\n\r\n        var rowItem = this.getRowItem(this.activeRow);\r\n        var columnItem = this.getColumnItem(this.activeColumn);\r\n\r\n        //scroll into view\r\n        this.scrollItemIntoView(rowItem, columnItem);\r\n\r\n        var holder = $(this.activeNode);\r\n        holder.addClass(\"tg-editable\").html(\"\");\r\n\r\n        //create new editor\r\n        var Editor = this.getEditor(this.activeColumn);\r\n        this.currentEditor = new Editor({\r\n            holder: holder,\r\n            rowItem: rowItem,\r\n            columnItem: columnItem\r\n        });\r\n\r\n        var self = this;\r\n        this.currentEditor.bind(\"onCommit\", function(e, d) {\r\n\r\n            if (self.commitCurrentEdit()) {\r\n                self.setFocus();\r\n            } else {\r\n                self.cancelCurrentEdit();\r\n            }\r\n\r\n        }).bind(\"onChanging\", function(e, d) {\r\n            self.onCellEditValueChangingHandler(e, d);\r\n        }).bind(\"onRendered\", function(e, d) {\r\n            self.onCellEditRenderedHandler();\r\n        });\r\n\r\n        this.onCellEditStartHandler();\r\n\r\n        this.currentEditor.render();\r\n\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    onCellEditEventHandler: function(type, info) {\r\n        var eventData = {\r\n            editor: this.currentEditor,\r\n            node: this.activeNode,\r\n            row: this.activeRow,\r\n            column: this.activeColumn,\r\n            rowItem: this.currentEditor.rowItem,\r\n            columnItem: this.currentEditor.columnItem\r\n        };\r\n        if (info) {\r\n            eventData.info = info;\r\n        }\r\n        this.trigger(type, eventData);\r\n    },\r\n\r\n    onCellEditStartHandler: function() {\r\n        this.onCellEditEventHandler(E.onCellEditStart);\r\n    },\r\n\r\n    onCellEditRenderedHandler: function() {\r\n        this.onCellEditEventHandler(E.onCellEditRendered);\r\n    },\r\n\r\n    onCellEditValueChangingHandler: function(e, d) {\r\n        this.onCellEditEventHandler(E.onCellEditValueChanging);\r\n    },\r\n\r\n    onCellEditValueChangedHandler: function() {\r\n        this.onCellEditEventHandler(E.onCellEditValueChanged);\r\n    },\r\n\r\n    onCellEditCompleteHandler: function() {\r\n        this.onCellEditEventHandler(E.onCellEditComplete);\r\n        this.removeCellEditor();\r\n    },\r\n\r\n    onCellEditErrorHandler: function(info) {\r\n        this.onCellEditEventHandler(E.onCellEditError, info);\r\n    },\r\n\r\n    onCellEditDestroyHandler: function() {\r\n        this.onCellEditEventHandler(E.onCellEditDestroy);\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    commitEditAndSetFocus: function() {\r\n        // if the commit fails, it would do so due to a validation error\r\n        // if so, do not steal the focus from the editor\r\n        if (this.commitCurrentEdit()) {\r\n            this.setFocus();\r\n            this.keyDownHandler({\r\n                autoEditNextOnEnter: this.option.autoEditNextOnEnter\r\n            });\r\n        }\r\n    },\r\n\r\n    cancelEditAndSetFocus: function() {\r\n        if (this.cancelCurrentEdit()) {\r\n            this.setFocus();\r\n        }\r\n    },\r\n\r\n    doCancelCurrentEdit: function() {\r\n        if (this.currentEditor) {\r\n            if (this.cancelCurrentEdit()) {\r\n                this.setFocus();\r\n            }\r\n        }\r\n    },\r\n\r\n    //by dbl click, seems no useless for now\r\n    editCellHandler: function(row, column) {\r\n\r\n        if (!this.isCellEditable(row, column)) {\r\n            return;\r\n        }\r\n\r\n        if (!this.commitCurrentEdit()) {\r\n            return;\r\n        }\r\n\r\n        this.setActiveCell(row, column, true);\r\n\r\n        // if no editor was created, set the focus back on the grid\r\n        if (!this.currentEditor) {\r\n            this.setFocus();\r\n        }\r\n    },\r\n\r\n    editActiveCellNodeHandler: function(forceEdit) {\r\n        var o = this.option;\r\n        var editable = false;\r\n        if (!forceEdit) {\r\n            editable = (this.activeRow === this.getRowsLength()) || o.autoEditNextOnEnter;\r\n        }\r\n        if (editable && this.isCellEditable(this.activeRow, this.activeColumn)) {\r\n            this.createCellEditor();\r\n        }\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = Editor;","var $ = require(\"../../core/query.js\");\r\nvar Util = require(\"../../core/util.js\");\r\nvar E = require(\"../../core/event-type.js\");\r\nvar Drag = require(\"../../core/drag.js\");\r\nvar Touch = require(\"../../core/touch.js\");\r\nvar Events = {\r\n    bindEvents: function() {\r\n\r\n        var self = this;\r\n\r\n        //==============================================================\r\n\r\n        //column drag events\r\n        //require defined as global for handleHeaderEvent \r\n        this.columnWidthDrag = new Drag();\r\n        var DE = this.columnWidthDrag.E;\r\n        this.columnWidthDrag.bind(DE.DRAG_START, function(e, d) {\r\n            self.trigger(E.onColumnWidthDragStart, d);\r\n        }).bind(DE.DRAG_UPDATE, function(e, d) {\r\n            self.trigger(E.onColumnWidthDragUpdate, d);\r\n        }).bind(DE.DRAG_COMPLETE, function(e, d) {\r\n            self.trigger(E.onColumnWidthDragComplete, d);\r\n        });\r\n\r\n        //row drag events\r\n        this.rowDrag = new Drag();\r\n        this.rowDrag.bind(DE.DRAG_START, function(e, d) {\r\n            self.trigger(E.onRowDragStart, d);\r\n        }).bind(DE.DRAG_UPDATE, function(e, d) {\r\n            self.trigger(E.onRowDragUpdate, d);\r\n        }).bind(DE.DRAG_COMPLETE, function(e, d) {\r\n            self.trigger(E.onRowDragComplete, d);\r\n        });\r\n\r\n        //scroll touch events\r\n        this.scrollTouch = new Touch();\r\n        var SE = this.scrollTouch.E;\r\n        this.scrollTouch.bind(SE.TOUCH_START, function(e, d) {\r\n            self.handleScrollTouchStart(e, d);\r\n        }).bind(SE.TOUCH_MOVE, function(e, d) {\r\n            self.handleScrollTouchMove(e, d);\r\n        }).bind(SE.TOUCH_INERTIA, function(e, d) {\r\n            self.handleScrollTouchInertia(e, d);\r\n        });\r\n\r\n        //column width touch\r\n        this.columnWidthTouch = new Touch();\r\n        this.columnWidthTouch.bind(SE.TOUCH_START, function(e, d) {\r\n            self.handleColumnWidthTouchStart(e, d);\r\n        }).bind(SE.TOUCH_MOVE, function(e, d) {\r\n            self.handleColumnWidthTouchMove(e, d);\r\n        }).bind(SE.TOUCH_END, function(e, d) {\r\n            self.handleColumnWidthTouchEnd(e, d);\r\n        });\r\n\r\n        //==============================================================\r\n\r\n        // disable all text selection (except input and textarea)\r\n        this.$headers.unbind().bind(\"selectstart\", function(e) {\r\n            return $(e.target).is(\"input,textarea\");\r\n        });\r\n        this.$panes.unbind().bind(\"selectstart\", function(e) {\r\n            return $(e.target).is(\"input,textarea\");\r\n        });\r\n\r\n        //==============================================================\r\n        //header events\r\n\r\n        this.$headers.delegate(\".tg-column-item\", \"contextmenu\", function(e) {\r\n            self.handleHeaderEvent(e, E.onHeaderContextMenu);\r\n        }).delegate(\".tg-column-item\", \"click\", function(e) {\r\n            self.handleHeaderEvent(e, E.onHeaderClick);\r\n        }).delegate(\".tg-column-item\", \"dblclick\", function(e) {\r\n            self.handleHeaderEvent(e, E.onHeaderDblClick);\r\n        }).delegate(\".tg-column-item\", \"mouseover\", function(e) {\r\n            self.handleHeaderEvent(e, E.onHeaderMouseOver);\r\n        }).delegate(\".tg-column-item\", \"mouseout\", function(e) {\r\n            self.handleHeaderEvent(e, E.onHeaderMouseOut);\r\n        }).delegate(\".tg-column-item\", \"mouseenter\", function(e) {\r\n            self.handleHeaderEvent(e, E.onHeaderMouseEnter);\r\n        }).delegate(\".tg-column-item\", \"mouseleave\", function(e) {\r\n            self.handleHeaderEvent(e, E.onHeaderMouseLeave);\r\n        });\r\n\r\n        this.$headers.bind(\"mousemove\", function(e) {\r\n            self.handleHeaderEvent(e, E.onHeadersMouseMove);\r\n        }).bind(\"mouseenter\", function(e) {\r\n            self.handleHeaderEvent(e, E.onHeadersMouseEnter);\r\n        }).bind(\"mouseleave\", function(e) {\r\n            self.handleHeaderEvent(e, E.onHeadersMouseLeave);\r\n        }).bind(\"touchstart\", function(e) {\r\n            self.handleHeaderEvent(e, E.onHeadersTouchStart);\r\n        });\r\n\r\n        //==============================================================\r\n\r\n        this.$panes.bind(\"wheel\", function(e) {\r\n            self.handleWheel(e);\r\n        }).bind(\"touchstart\", function(e) {\r\n            //require in panes cause canvas maybe not full height\r\n            self.scrollTouch.start({\r\n                e: e,\r\n                holder: self.$container\r\n            });\r\n        });\r\n\r\n        //bind active scrollpane events\r\n        this.scrollpane.bind(\"onChange\", function(e, d) {\r\n            //console.log(\"onChange\", this.uid, d);\r\n            self.handleScrollpaneChange(e, d);\r\n        });\r\n\r\n        //==============================================================\r\n        //cell events\r\n        this.$canvas.unbind().bind(\"keydown\", function(e) {\r\n            self.handleKeyDown(e);\r\n        }).bind(\"click\", function(e) {\r\n            self.handleClick(e);\r\n        }).bind(\"dblclick\", function(e) {\r\n            self.handleDblClick(e);\r\n        }).bind(\"contextmenu\", function(e) {\r\n            self.handleContextMenu(e);\r\n        }).delegate(\".tg-cell\", \"mouseover\", function(e) {\r\n            self.handleCellNodeHover(e, true);\r\n        }).delegate(\".tg-cell\", \"mouseout\", function(e) {\r\n            self.handleCellNodeHover(e, false);\r\n        }).delegate(\".tg-cell\", \"mouseenter\", function(e) {\r\n            self.handleCellHover(e, true);\r\n        }).delegate(\".tg-cell\", \"mouseleave\", function(e) {\r\n            self.handleCellHover(e, false);\r\n        }).delegate(\".tg-row\", \"mouseenter\", function(e) {\r\n            self.handleRowHover(e, true);\r\n        }).delegate(\".tg-row\", \"mouseleave\", function(e) {\r\n            self.handleRowHover(e, false);\r\n        }).delegate(\".tg-row\", \"mousedown\", function(e) {\r\n            self.handleRowDrag(e);\r\n        });\r\n\r\n        this.$focusSink.unbind().bind(\"keydown\", function(e) {\r\n            self.handleKeyDown(e);\r\n        });\r\n\r\n    },\r\n\r\n    isEventStopped: function(e) {\r\n        var stopped = false;\r\n        if (e && e.isImmediatePropagationStopped) {\r\n            stopped = e.isImmediatePropagationStopped();\r\n        }\r\n        return stopped;\r\n    },\r\n\r\n    preventEventDefault: function(e) {\r\n        if (e && e.preventDefault) {\r\n            e.preventDefault();\r\n        }\r\n    },\r\n\r\n    //======================================================================================\r\n\r\n    handleScrollTouchStart: function(e, d) {\r\n        //hide column line when starting touch scroll\r\n        this.hideColumnLine();\r\n        //start position\r\n        this.scrollTouchLeft = this.getScrollLeft();\r\n        this.scrollTouchTop = this.getScrollTop();\r\n    },\r\n\r\n    handleScrollTouchMove: function(e, d) {\r\n\r\n        if (d.touchLength > 1) {\r\n            return;\r\n        }\r\n\r\n        var pl = this.getScrollLeft();\r\n        var pt = this.getScrollTop();\r\n\r\n        var tsl = this.scrollTouchLeft - d.touchOffsetX;\r\n        var tst = this.scrollTouchTop - d.touchOffsetY;\r\n        this.setScroll(tsl, tst);\r\n\r\n        var cl = this.getScrollLeft();\r\n        var ct = this.getScrollTop();\r\n\r\n        //console.log(\"scroll position\", pl, pt, \"new:\", cl, ct);\r\n\r\n        if (pl !== cl || pt !== ct) {\r\n            //console.log(\"preventDefault\");\r\n            this.scrollTouch.preventDefault();\r\n        }\r\n    },\r\n\r\n    handleScrollTouchInertia: function(e, d) {\r\n\r\n        if (d.touchLength > 0) {\r\n            return;\r\n        }\r\n\r\n        var cl = this.getScrollLeft();\r\n        var ct = this.getScrollTop();\r\n        var tsl = cl - d.touchInertiaX;\r\n        var tst = ct - d.touchInertiaY;\r\n        this.setScroll(tsl, tst);\r\n    },\r\n\r\n    //======================================================================================\r\n\r\n    handleColumnWidthTouchStart: function(e, d) {\r\n        this.setColumnLineActive(true);\r\n        var column = d.column;\r\n        d.index = column.tg_index;\r\n        var $node = this.getHeaderNode(column);\r\n        d.width = $node.width();\r\n        //console.log(\"touch start\", d);\r\n    },\r\n\r\n    handleColumnWidthTouchMove: function(e, d) {\r\n        var newWidth = d.width + d.touchOffsetX;\r\n        var column = d.column;\r\n        this.setColumnWidth(column, newWidth);\r\n        this.updateColumnLine();\r\n    },\r\n\r\n    handleColumnWidthTouchEnd: function(e, d) {\r\n        //console.log(\"touch end\", d);\r\n        this.setColumnLineActive(false);\r\n        this.setColumnLineHover(false);\r\n    },\r\n\r\n    /* eslint-disable complexity*/\r\n    //======================================================================================\r\n    handleHeaderEvent: function(e, eventType) {\r\n        //console.log(eventType);\r\n\r\n        var $elem = $(e.target);\r\n\r\n        var $node = $elem.closest(\".tg-column-item\", this.$headers);\r\n        var $column = $node.find(\".tg-header-column\");\r\n        var columnIndex = this.getNodeIndex($column);\r\n        var columnItem = this.getColumnItem(columnIndex);\r\n        if (!columnItem) {\r\n            return;\r\n        }\r\n\r\n        var d = {\r\n            e: e,\r\n            columnItem: columnItem,\r\n            node: $node\r\n        };\r\n\r\n        if (eventType === E.onHeaderClick) {\r\n            this.handleHeaderClick(d, $elem);\r\n            return;\r\n        }\r\n\r\n        this.trigger(eventType, d);\r\n    },\r\n\r\n    /* eslint-enable*/\r\n    handleHeaderClick: function(d, $elem) {\r\n\r\n        var currentTarget = d.e.currentTarget;\r\n\r\n        //tree icon\r\n        var inTreeIconAll = $elem.closest(\".tg-tree-icon-all\", currentTarget);\r\n        if (inTreeIconAll.length) {\r\n            d.node = $elem;\r\n            this.trigger(E.onTreeIconAllClick, d);\r\n            return;\r\n        }\r\n\r\n        //checkbox icon\r\n        var inCheckboxAll = $elem.closest(\".tg-checkbox-all\", currentTarget);\r\n        if (inCheckboxAll.length) {\r\n            d.node = $elem;\r\n            this.trigger(E.onCheckboxAllClick, d);\r\n            return;\r\n        }\r\n\r\n        //click just can cancel onSort\r\n        this.trigger(E.onHeaderClick, d);\r\n        if (this.isEventStopped(d.e)) {\r\n            return;\r\n        }\r\n\r\n        this.handleColumnSort(d, $elem, currentTarget);\r\n\r\n    },\r\n\r\n    /* eslint-disable complexity*/\r\n    handleColumnSort: function(d, $elem, currentTarget) {\r\n        //column sort\r\n        var inColumnName = $elem.closest(\".tg-column-name\", currentTarget);\r\n        var inSortablePlaceholder = $elem.closest(\".tg-sort-placeholder\", currentTarget);\r\n        var isSortElem = inColumnName.length || inSortablePlaceholder.length;\r\n        var columnItem = d.columnItem;\r\n        if (isSortElem && this.isColumnSortable(columnItem) && !columnItem.tg_group) {\r\n\r\n            if (this.sortColumn && this.sortColumn.id === columnItem.id) {\r\n                //change sortAsc if click same column\r\n                columnItem.sortAsc = !columnItem.sortAsc;\r\n            } else {\r\n\r\n                //set default sortAsc \r\n                if (typeof(columnItem.sortAsc) !== \"boolean\") {\r\n                    columnItem.sortAsc = this.option.sortAsc;\r\n                }\r\n\r\n            }\r\n\r\n            this.sortColumn = columnItem;\r\n            this.trigger(E.onSort, d);\r\n        }\r\n    },\r\n    /* eslint-enable*/\r\n    //======================================================================================\r\n    handleWheel: function(e) {\r\n        //init mouse wheel data\r\n        var originalEvent = e.originalEvent || e;\r\n        var lineHeight = this.option.rowHeight;\r\n        var pageHeight = this.bodyerHeight;\r\n        var wd = this.getWheelDelta(originalEvent, lineHeight, pageHeight);\r\n\r\n        //e.deltaMode = 0;\r\n        //console.log(\"delta\", wd);\r\n\r\n        this.trigger(E.onMouseWheel, {\r\n            e: e,\r\n            deltaX: wd.deltaX,\r\n            deltaY: wd.deltaY\r\n        });\r\n\r\n        //can cancel wheel\r\n        if (this.isEventStopped(e)) {\r\n            return;\r\n        }\r\n\r\n        var handled = this.scrollpane.mouseWheelHandler(wd);\r\n        if (handled) {\r\n            //require to prevent default for MAC OS\r\n            //it's very different default handler between windows and Mac\r\n            this.preventEventDefault(e);\r\n        }\r\n\r\n    },\r\n    /* eslint-disable complexity*/\r\n    getWheelDelta: function(e, lineHeight, pageHeight) {\r\n\r\n        //New wheel delta (wheel event)\r\n        var deltaX = e.deltaX;\r\n        var deltaY = e.deltaY;\r\n\r\n\r\n        //wheelDeltaX/wheelDeltaY is old property\r\n        if (!Util.isnum(deltaX)) {\r\n            deltaX = Util.tonum(e.wheelDeltaX);\r\n        }\r\n\r\n        /* jshint ignore:start */\r\n        if (!Util.isnum(deltaY)) {\r\n            deltaY = Util.tonum(e.wheelDeltaY || e.wheelDelta);\r\n        }\r\n        /* jshint ignore:end */\r\n\r\n        //deltaMode fixing to px\r\n        // 0 is by pixel, nothing to do\r\n        // 1 is by line\r\n        // 2 is by page\r\n        if (e.deltaMode === 1) {\r\n            deltaY *= lineHeight;\r\n            deltaX *= lineHeight;\r\n        } else if (e.deltaMode === 2) {\r\n            deltaY *= pageHeight;\r\n            deltaX *= pageHeight;\r\n        }\r\n\r\n        var wd = {\r\n            deltaX: deltaX,\r\n            deltaY: deltaY\r\n        };\r\n\r\n        return wd;\r\n    },\r\n    /* eslint-enable*/\r\n    //======================================================================================\r\n    handleScrollpaneChange: function(e, d) {\r\n        //hide column line when starting touch scroll\r\n        this.hideColumnLine();\r\n\r\n        this.scrollLeft = d.scrollLeft;\r\n        this.scrollTop = d.scrollTop;\r\n        this.scrollTopOffset = d.scrollTopOffset;\r\n        this.scrollRenderHandler();\r\n    },\r\n\r\n    //======================================================================================\r\n    handleKeyDown: function(e) {\r\n        this.trigger(E.onKeyDown, {\r\n            e: e,\r\n            row: this.activeRow,\r\n            column: this.activeColumn\r\n        });\r\n\r\n        //can cancel keydown\r\n        if (this.isEventStopped(e)) {\r\n            return;\r\n        }\r\n\r\n        var keyCode = e.keyCode;\r\n        //console.log(keyCode);\r\n        //9: tab\r\n        //13: enter\r\n        //27: esc\r\n        //33,34: page up,page down\r\n        //35,36: end,home\r\n        //37,38,39,40: left,up,right,down\r\n        var keyCodeList = {\r\n            \"9\": this.keyTabHandler,\r\n            \"13\": this.keyEnterHandler,\r\n            \"27\": this.keyEscHandler,\r\n\r\n            \"33\": this.keyPageUpHandler,\r\n            \"34\": this.keyPageDownHandler,\r\n            \"35\": this.keyEndHandler,\r\n            \"36\": this.keyHomeHandler,\r\n\r\n            \"37\": this.keyLeftHandler,\r\n            \"38\": this.keyUpHandler,\r\n            \"39\": this.keyRightHandler,\r\n            \"40\": this.keyDownHandler\r\n        };\r\n\r\n        var handler = keyCodeList[keyCode];\r\n        if (!handler) {\r\n            return;\r\n        }\r\n\r\n        var handled = handler.call(this, e);\r\n        if (handled) {\r\n            this.preventEventDefault(e);\r\n        }\r\n\r\n    },\r\n\r\n    //======================================================================================\r\n\r\n    handleCellNodeHover: function(e, hover) {\r\n        var position = this.getPositionByEvent(e);\r\n        if (!position) {\r\n            return;\r\n        }\r\n        if (!hover) {\r\n            this.trigger(E.onCellMouseOut, position);\r\n            return;\r\n        }\r\n        this.trigger(E.onCellMouseOver, position);\r\n    },\r\n\r\n    handleCellHover: function(e, hover) {\r\n        var position = this.getPositionByEvent(e);\r\n        if (!position) {\r\n            return;\r\n        }\r\n        if (!hover) {\r\n            this.trigger(E.onCellMouseLeave, position);\r\n            return;\r\n        }\r\n        this.trigger(E.onCellMouseEnter, position);\r\n    },\r\n\r\n    handleRowHover: function(e, hover) {\r\n\r\n        var rowIndex = parseInt($(e.currentTarget).attr(\"index\"), 10);\r\n        var rowItem = this.getRowItem(rowIndex);\r\n\r\n        if (!rowItem) {\r\n            return this;\r\n        }\r\n\r\n        //row class handler\r\n        this.setHoverRow(rowItem, hover);\r\n\r\n        //trigger event\r\n        var eventData = {\r\n            e: e,\r\n            row: rowIndex,\r\n            rowItem: rowItem\r\n        };\r\n        if (hover) {\r\n            this.trigger(E.onRowMouseEnter, eventData);\r\n        } else {\r\n            this.trigger(E.onRowMouseLeave, eventData);\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    setHoverRow: function(rowItem, hover) {\r\n\r\n        //remove previous hover row, both for left and right pane\r\n        var hoverRow = this.$canvas.find(\".tg-hover\");\r\n        if (hoverRow.length) {\r\n            hoverRow.removeClass(\"tg-hover\");\r\n            var hoverRowIndex = parseInt(hoverRow.attr(\"index\"), 10);\r\n            this.rowHoverCellHandler(hoverRowIndex, false);\r\n        }\r\n\r\n        if (!hover) {\r\n            return this;\r\n        }\r\n\r\n        //add hover row not frozen, both for left and right pane\r\n        if (!rowItem.tg_frozen) {\r\n            this.$canvas.find(\".tg-row[index='\" + rowItem.tg_index + \"']\").addClass('tg-hover');\r\n            this.rowHoverCellHandler(rowItem.tg_index, true);\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    //======================================================================================\r\n\r\n    handleRowDrag: function(e) {\r\n\r\n        var elem = $(e.currentTarget);\r\n        var rowIndex = this.getNodeIndex(elem);\r\n        var rowItem = this.getRowItem(rowIndex);\r\n        if (!rowItem || !rowItem.draggable) {\r\n            return;\r\n        }\r\n\r\n        //do NOT drag checkbox\r\n        var cellNode = $(e.target).closest(\".tg-cell\", elem);\r\n        var columnIndex = this.getNodeIndex(cellNode);\r\n        var columnItem = this.getColumnItem(columnIndex);\r\n        if (!columnItem || columnItem.id === \"tg_checkbox_column\") {\r\n            return;\r\n        }\r\n\r\n        this.rowDrag.start({\r\n            e: e,\r\n            target: elem,\r\n            dragRow: rowItem\r\n        });\r\n    },\r\n\r\n    //======================================================================================\r\n    /* eslint-disable max-statements,complexity */\r\n    handleClick: function(e) {\r\n\r\n        var position = this.getPositionByEvent(e);\r\n        if (!position) {\r\n            return;\r\n        }\r\n\r\n        /* jshint ignore:start */\r\n        var column = this.columns[position.column];\r\n        if (!column) {\r\n            return;\r\n        }\r\n\r\n        var target = e.target;\r\n        var $target = $(target);\r\n        var currentTarget = e.currentTarget;\r\n        //=============================================\r\n        //tree icon\r\n        var inTreeIcon = $target.closest(\".tg-tree-icon\", currentTarget);\r\n        if (inTreeIcon.length) {\r\n            position.node = $target;\r\n            this.trigger(E.onTreeIconClick, position);\r\n            return;\r\n        }\r\n\r\n        //checkbox icon\r\n        var inCheckboxIcon = $target.closest(\".tg-checkbox\", currentTarget);\r\n        if (inCheckboxIcon.length) {\r\n            position.node = $target;\r\n            this.trigger(E.onCheckboxClick, position);\r\n            return;\r\n        }\r\n\r\n        //just can cancel edit, do NOT cancel checkbox and treeicon\r\n        this.trigger(E.onClick, position);\r\n        if (this.isEventStopped(e)) {\r\n            return;\r\n        }\r\n\r\n        //=============================================\r\n        //editor\r\n\r\n        if (this.currentEditor !== null && this.activeRow === position.row && this.activeColumn === position.column) {\r\n            return;\r\n        }\r\n\r\n        if (!this.currentEditor) {\r\n            // if this click resulted in some cell child node getting focus,\r\n            // don't steal it back - keyboard events will still bubble up\r\n            // IE9+ seems to default DIVs to tabIndex=0 instead of -1, so check for cell clicks directly.\r\n            if (target !== document.activeElement || $target.hasClass(\"tg-cell\")) {\r\n                this.setFocus();\r\n            }\r\n        }\r\n\r\n        if (this.isCellEditable(position.row, position.column)) {\r\n            if (!this.currentEditor || this.commitCurrentEdit()) {\r\n                if (!this.isFrozenRow(position.row)) {\r\n                    var rowItem = this.getRowItem(position.row);\r\n                    this.scrollItemIntoView(rowItem, null);\r\n                }\r\n                var cellNode = this.getCellNode(position.row, position.column);\r\n                this.setActiveCellNode(cellNode);\r\n            }\r\n        }\r\n\r\n        /* jshint ignore:end */\r\n    },\r\n    /* eslint-enable*/\r\n    //======================================================================================\r\n    handleContextMenu: function(e) {\r\n        var position = this.getPositionByEvent(e);\r\n        if (!position) {\r\n            return;\r\n        }\r\n        this.trigger(E.onContextMenu, position);\r\n    },\r\n\r\n    //======================================================================================\r\n    /* eslint-disable complexity*/\r\n    handleDblClick: function(e) {\r\n        var position = this.getPositionByEvent(e);\r\n        if (!position) {\r\n            return;\r\n        }\r\n        this.trigger(E.onDblClick, position);\r\n        if (this.isEventStopped(e)) {\r\n            return;\r\n        }\r\n\r\n        if (this.currentEditor !== null && this.activeRow === position.row && this.activeColumn === position.column) {\r\n            return;\r\n        }\r\n\r\n        this.editCellHandler(position.row, position.column);\r\n    }\r\n    /* eslint-enable*/\r\n\r\n};\r\n\r\nmodule.exports = Events;","//var E = require(\"../../core/event-type.js\");\r\n//var Util = require(\"../../core/util.js\");\r\nvar Icon = require(\"../../core/icon.js\");\r\nvar HeaderTable = {\r\n\r\n    createAttr: function(attr) {\r\n        if (!attr) {\r\n            return \"\";\r\n        }\r\n        var arr = [];\r\n        for (var k in attr) {\r\n            if (attr.hasOwnProperty(k)) {\r\n                arr.push(k + '=\"' + attr[k] + '\"');\r\n            }\r\n        }\r\n        var str = arr.join(\" \");\r\n        return str;\r\n    },\r\n\r\n    createTag: function(name, attr, content) {\r\n        var arr = [];\r\n        arr.push('<' + name);\r\n        var str = this.createAttr(attr);\r\n        if (str) {\r\n            arr.push(' ' + str);\r\n        }\r\n        arr.push('>');\r\n        if (content) {\r\n            arr.push(content);\r\n        }\r\n        arr.push('</' + name + '>');\r\n        var s = arr.join(\"\");\r\n        return s;\r\n    },\r\n\r\n    getHeaderTableData: function(columnsList) {\r\n\r\n        var tableData = [];\r\n        var maxLevel = this.option.columnsInfo.maxLevel;\r\n        var level = 0;\r\n        while (level <= maxLevel) {\r\n            tableData.push([]);\r\n            level++;\r\n        }\r\n\r\n        var addToLevelList = function(column) {\r\n            var levelList = tableData[column.tg_tr];\r\n            if (levelList) {\r\n                levelList.push(column);\r\n            }\r\n        };\r\n\r\n        columnsList.forEach(function(column, index) {\r\n            addToLevelList(column);\r\n            if (!column.tg_parent) {\r\n                return;\r\n            }\r\n            var currentItem = column;\r\n            while (currentItem.tg_parent) {\r\n                currentItem = currentItem.tg_parent;\r\n                if (!currentItem.tg_tr_mark) {\r\n                    addToLevelList(currentItem);\r\n                    currentItem.tg_tr_mark = true;\r\n                }\r\n            }\r\n        });\r\n\r\n        return tableData;\r\n    },\r\n\r\n    createHeaderItemName: function(column) {\r\n        var value = column.name;\r\n        var content = value;\r\n        //formatter\r\n        if (typeof(column.tg_headerFormatter) === \"function\") {\r\n            //value, rowData, columnData, rowIndex, columnIndex, cellNode\r\n            content = column.tg_headerFormatter(value, null, column, -1, column.tg_index, null);\r\n        }\r\n\r\n        var headerNameClass = \"tg-column-name\";\r\n        if (column.tg_group) {\r\n            headerNameClass += \" tg-column-group-name\";\r\n        }\r\n\r\n        if (column.headerNameClass) {\r\n            headerNameClass += \" \" + column.headerNameClass;\r\n        }\r\n        var nameAttr = {\r\n            \"class\": headerNameClass\r\n        };\r\n        var name = this.createTag(\"div\", nameAttr, content);\r\n        return name;\r\n    },\r\n\r\n    createHeaderItemSort: function(column) {\r\n\r\n        if (!this.isColumnSortable(column)) {\r\n            return \"\";\r\n        }\r\n\r\n        if (column.tg_group) {\r\n            return \"\";\r\n        }\r\n\r\n        var sort_icon = Icon.getIconString(\"sort_icon\", {\r\n            width: 7,\r\n            height: 7\r\n        }, \"sort_icon\");\r\n\r\n        var icon = this.createTag(\"div\", {\r\n            \"class\": \"tg-sort-indicator-icon\"\r\n        }, sort_icon);\r\n\r\n        var indicator = this.createTag(\"div\", {\r\n            \"class\": \"tg-sort-indicator\"\r\n        }, icon);\r\n\r\n        var sort = this.createTag(\"div\", {\r\n            \"class\": \"tg-sort-placeholder\"\r\n        }, indicator);\r\n\r\n        return sort;\r\n\r\n    },\r\n\r\n    getHeaderItemClass: function(column) {\r\n\r\n        var headerCss = [\"tg-header-column\"];\r\n\r\n        if (column.tg_group) {\r\n            headerCss.push(\"tg-header-group\");\r\n        } else if (this.isColumnSortable(column)) {\r\n            headerCss.push(\"tg-header-column-sortable\");\r\n        }\r\n\r\n        if (column.align) {\r\n            headerCss.push(\"tg-align-\" + column.align);\r\n        }\r\n\r\n        if (column.headerClass) {\r\n            headerCss.push(column.headerClass);\r\n        }\r\n\r\n        var headerClass = headerCss.join(\" \");\r\n\r\n        return headerClass;\r\n    },\r\n\r\n    createHeaderItem: function(column) {\r\n\r\n        var name = this.createHeaderItemName(column);\r\n        var sort = this.createHeaderItemSort(column);\r\n\r\n        var headerClass = this.getHeaderItemClass(column);\r\n        var itemAttr = {\r\n            \"class\": headerClass,\r\n            data: column.id,\r\n            index: column.tg_index,\r\n            style: \"width:\" + column.width + \"px;\"\r\n        };\r\n\r\n        if (column.title) {\r\n            itemAttr.title = column.title;\r\n        }\r\n\r\n        var item = this.createTag(\"div\", itemAttr, name + sort);\r\n\r\n        return item;\r\n    },\r\n    /* eslint-disable complexity*/\r\n    createHeaderTd: function(column) {\r\n\r\n        var item = this.createHeaderItem(column);\r\n\r\n        var itemClass = \"tg-column-item\";\r\n        if (column.tg_group) {\r\n            itemClass += \" tg-column-group-item\";\r\n        }\r\n\r\n        if (column.headerItemClass) {\r\n            itemClass += \" \" + column.headerItemClass;\r\n        }\r\n\r\n        var tdAttr = {\r\n            \"class\": itemClass,\r\n            style: \"width:\" + column.width + \"px;\"\r\n        };\r\n\r\n        var rowspan = column.tg_rowspan;\r\n        if (rowspan && rowspan > 1) {\r\n            tdAttr.rowspan = rowspan;\r\n        }\r\n\r\n        var colspan = column.tg_colspan;\r\n        if (colspan && colspan > 1) {\r\n            tdAttr.colspan = colspan;\r\n        }\r\n\r\n        var td = this.createTag(\"td\", tdAttr, item);\r\n\r\n        return td;\r\n    },\r\n    /* eslint-enable*/\r\n    createHeaderTable: function(columnsList, container) {\r\n\r\n        var tableData = this.getHeaderTableData(columnsList);\r\n\r\n        //console.log(tableData);\r\n\r\n        var self = this;\r\n        var trList = [];\r\n        tableData.forEach(function(levelList) {\r\n            if (!levelList.length) {\r\n                return;\r\n            }\r\n            var tdList = [];\r\n            levelList.forEach(function(column) {\r\n                var td = self.createHeaderTd(column);\r\n                tdList.push(td);\r\n            });\r\n            var tds = tdList.join(\"\");\r\n            var tr = self.createTag(\"tr\", null, tds);\r\n            trList.push(tr);\r\n        });\r\n\r\n        var trs = trList.join(\"\");\r\n        var tbody = this.createTag(\"tbody\", null, trs);\r\n\r\n        var tableClass = \"tg-header-table\";\r\n        if (this.hasSortColumn) {\r\n            tableClass += \" tg-header-table-sortable\";\r\n        }\r\n        var table = this.createTag(\"table\", {\r\n            \"class\": tableClass,\r\n            cellpadding: 0,\r\n            cellspacing: 0,\r\n            border: 0\r\n        }, tbody);\r\n\r\n        container.html(table);\r\n\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = HeaderTable;","var E = require(\"../../core/event-type.js\");\r\nvar Util = require(\"../../core/util.js\");\r\nvar Headers = {\r\n\r\n    getHeaderNode: function(column) {\r\n        var index = column.tg_index;\r\n        var node = this.headerNodeCache[index];\r\n        if (!node) {\r\n            node = this.$headers.find(\".tg-header-column[index='\" + index + \"']\");\r\n            this.headerNodeCache[index] = node;\r\n        }\r\n        return node;\r\n    },\r\n\r\n    initHeaders: function() {\r\n\r\n        var self = this;\r\n\r\n        var headerL = this.$headerL.get(0);\r\n        var headerR = this.$headerR.get(0);\r\n\r\n        headerL.innerHTML = \"\";\r\n        headerR.innerHTML = \"\";\r\n\r\n        headerL.style.visibility = \"hidden\";\r\n        headerR.style.visibility = \"hidden\";\r\n\r\n        this.renderHeaderColumns();\r\n\r\n        //async render headers\r\n        Util.getRhythm(this, \"initHeaders\").debounce({\r\n            delay: 20,\r\n            callback: function() {\r\n                headerL.style.visibility = \"\";\r\n                headerR.style.visibility = \"\";\r\n                self.headersCompleteHandler();\r\n            }\r\n        });\r\n\r\n        return this;\r\n    },\r\n\r\n    headersCompleteHandler: function() {\r\n\r\n        //header completed\r\n        this.initialized = true;\r\n        //console.log(\"initialized\");\r\n\r\n        //header sort and resize\r\n        this.setSortColumn(this.sortColumn);\r\n\r\n        this.resize();\r\n\r\n    },\r\n\r\n    //render headers\r\n    renderHeaderColumns: function() {\r\n        var option = this.option;\r\n        var columns = this.columns;\r\n\r\n        this.hasSortColumn = false;\r\n        var columnsL = [];\r\n        var columnsR = [];\r\n\r\n        for (var i = 0, l = columns.length; i < l; i++) {\r\n            var column = columns[i];\r\n            if (this.isColumnSortable(column)) {\r\n                this.hasSortColumn = true;\r\n            }\r\n            if (this.hasFrozenColumns && i > option.frozenColumn) {\r\n                columnsR.push(column);\r\n            } else {\r\n                columnsL.push(column);\r\n            }\r\n        }\r\n\r\n        //console.log(this.hasSortColumn);\r\n\r\n        //left list\r\n        this.createHeaderTable(columnsL, this.$headerL);\r\n        //right list\r\n        this.createHeaderTable(columnsR, this.$headerR);\r\n\r\n        //column rendered\r\n        this.trigger(E.onHeaderRendered, {\r\n            node: this.$headers\r\n        });\r\n\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = Headers;","var Util = require(\"../../core/util.js\");\r\nvar Invalidate = {\r\n\r\n    //invalidate public API\r\n\r\n    invalidateRow: function(row) {\r\n        this.removeRowFromCache(row);\r\n    },\r\n\r\n    invalidateRows: function(rows) {\r\n        if (!Util.islist(rows)) {\r\n            return;\r\n        }\r\n        var self = this;\r\n        rows.forEach(function(row) {\r\n            self.removeRowFromCache(row);\r\n        });\r\n    },\r\n\r\n    invalidateRowsExcept: function(rows) {\r\n        if (!Util.islist(rows)) {\r\n            return;\r\n        }\r\n        var map = Util.listToMap(rows);\r\n        var allCacheRows = this.getAllCacheRows();\r\n        var self = this;\r\n        allCacheRows.forEach(function(row) {\r\n            if (!map[row]) {\r\n                self.removeRowFromCache(row);\r\n            }\r\n        });\r\n    },\r\n\r\n    invalidateRowsFrom: function(fromRow) {\r\n        if (!Util.isnum(fromRow)) {\r\n            return;\r\n        }\r\n        var allCacheRows = this.getAllCacheRows();\r\n        var self = this;\r\n        allCacheRows.forEach(function(row) {\r\n            if (row >= fromRow) {\r\n                self.removeRowFromCache(row);\r\n            }\r\n        });\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    invalidateColumn: function(column) {\r\n        var allCacheRows = this.getAllCacheRows();\r\n        var self = this;\r\n        allCacheRows.forEach(function(row) {\r\n            self.removeCellFromCache(row, column);\r\n        });\r\n    },\r\n\r\n    invalidateColumns: function(columns) {\r\n        if (!Util.islist(columns)) {\r\n            return;\r\n        }\r\n        var allCacheRows = this.getAllCacheRows();\r\n        var self = this;\r\n        allCacheRows.forEach(function(row) {\r\n            columns.forEach(function(column) {\r\n                self.removeCellFromCache(row, column);\r\n            });\r\n        });\r\n    },\r\n\r\n    invalidateColumnsExcept: function(columns) {\r\n        if (!Util.islist(columns)) {\r\n            return;\r\n        }\r\n        var map = Util.listToMap(columns);\r\n        var allCacheRows = this.getAllCacheRows();\r\n        var self = this;\r\n        allCacheRows.forEach(function(row) {\r\n            var cellNodes = self.getCellNodes(row);\r\n            if (!cellNodes) {\r\n                return;\r\n            }\r\n            cellNodes.forEach(function(node, column) {\r\n                if (!map[column]) {\r\n                    self.removeCellFromCache(row, column);\r\n                }\r\n            });\r\n        });\r\n    },\r\n\r\n    invalidateColumnsFrom: function(fromColumn) {\r\n        if (!Util.isnum(fromColumn)) {\r\n            return;\r\n        }\r\n        var allCacheRows = this.getAllCacheRows();\r\n        var self = this;\r\n        allCacheRows.forEach(function(row) {\r\n            var cellNodes = self.getCellNodes(row);\r\n            if (!cellNodes) {\r\n                return;\r\n            }\r\n            cellNodes.forEach(function(node, column) {\r\n                if (column >= fromColumn) {\r\n                    self.removeCellFromCache(row, column);\r\n                }\r\n            });\r\n        });\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    invalidateCell: function(row, column) {\r\n        this.removeCellFromCache(row, column);\r\n    },\r\n\r\n    invalidateCells: function(rows, columns) {\r\n        if (!Util.islist(rows) || !Util.islist(columns)) {\r\n            return;\r\n        }\r\n        var self = this;\r\n        rows.forEach(function(row) {\r\n            columns.forEach(function(column) {\r\n                self.removeCellFromCache(row, column);\r\n            });\r\n        });\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    invalidateAll: function() {\r\n        var allCacheRows = this.getAllCacheRows();\r\n        this.invalidateRows(allCacheRows);\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = Invalidate;","var Navigate = {\r\n\r\n    keyTabHandler: function(e) {\r\n        if (e.shiftKey) {\r\n            return this.navigate(\"prev\");\r\n        }\r\n        return this.navigate(\"next\");\r\n    },\r\n\r\n    keyEnterHandler: function(e) {\r\n\r\n        if (this.currentEditor) {\r\n            if (this.currentEditor.toString() !== \"text\") {\r\n                return false;\r\n            }\r\n            this.commitEditAndSetFocus();\r\n            return true;\r\n        }\r\n\r\n        if (this.commitCurrentEdit()) {\r\n            this.createCellEditor();\r\n            return true;\r\n        }\r\n    },\r\n\r\n    keyEscHandler: function(e) {\r\n        this.cancelEditAndSetFocus();\r\n        return false;\r\n    },\r\n\r\n    //============================================================================================\r\n\r\n    keyPageUpHandler: function(e) {\r\n        return this.scrollpane.keyPageUpHandler(e);\r\n    },\r\n\r\n    keyPageDownHandler: function(e) {\r\n        return this.scrollpane.keyPageDownHandler(e);\r\n    },\r\n\r\n    keyEndHandler: function(e) {\r\n        return this.scrollpane.keyEndHandler(e);\r\n    },\r\n\r\n    keyHomeHandler: function(e) {\r\n        return this.scrollpane.keyHomeHandler(e);\r\n    },\r\n\r\n    //============================================================================================\r\n\r\n    keyLeftHandler: function(e) {\r\n        if (this.currentEditor) {\r\n            return this.navigate(\"left\");\r\n        }\r\n        if (this.hideScrollPane) {\r\n            return this.scrollpaneFrozen.keyLeftHandler(e);\r\n        }\r\n        return this.scrollpane.keyLeftHandler(e);\r\n    },\r\n\r\n    keyUpHandler: function(e) {\r\n        if (this.currentEditor) {\r\n            return this.navigate(\"up\");\r\n        }\r\n        return this.scrollpane.keyUpHandler(e);\r\n    },\r\n\r\n    keyRightHandler: function(e) {\r\n        if (this.currentEditor) {\r\n            return this.navigate(\"right\");\r\n        }\r\n        if (this.hideScrollPane) {\r\n            return this.scrollpaneFrozen.keyRightHandler(e);\r\n        }\r\n        return this.scrollpane.keyRightHandler(e);\r\n    },\r\n\r\n    keyDownHandler: function(e) {\r\n        if (this.currentEditor || e.autoEditNextOnEnter) {\r\n            return this.navigate(\"down\");\r\n        }\r\n        return this.scrollpane.keyDownHandler(e);\r\n    },\r\n\r\n    //============================================================================================\r\n\r\n    gotoRight: function(row, column, posX) {\r\n        var columns = this.columns;\r\n        if (column >= columns.length) {\r\n            return null;\r\n        }\r\n\r\n        do {\r\n            column += 1;\r\n        } while (column < columns.length && !this.isCellEditable(row, column));\r\n\r\n        if (column < columns.length) {\r\n            return {\r\n                \"row\": row,\r\n                \"column\": column,\r\n                \"posX\": column\r\n            };\r\n        }\r\n        return null;\r\n    },\r\n    /* eslint-disable complexity*/\r\n    gotoLeft: function(row, column, posX) {\r\n\r\n        if (column <= 0) {\r\n            return null;\r\n        }\r\n\r\n        var firstFocusableCell = this.findFirstFocusableCell(row);\r\n        if (firstFocusableCell === null || firstFocusableCell >= column) {\r\n            return null;\r\n        }\r\n\r\n        /* jshint ignore:start */\r\n        var prev = {\r\n            \"row\": row,\r\n            \"column\": firstFocusableCell,\r\n            \"posX\": firstFocusableCell\r\n        };\r\n\r\n        var pos;\r\n        while (true) {\r\n            pos = this.gotoRight(prev.row, prev.column, prev.posX);\r\n            if (!pos) {\r\n                return null;\r\n            }\r\n            if (pos.column >= column) {\r\n                return prev;\r\n            }\r\n            prev = pos;\r\n        }\r\n        /* jshint ignore:end */\r\n    },\r\n    /* eslint-enable*/\r\n    gotoDown: function(row, column, posX) {\r\n        var prevCell;\r\n        var dataLength = this.getRowsLength();\r\n        while (true) {\r\n            if (++row >= dataLength) {\r\n                return null;\r\n            }\r\n\r\n            prevCell = column = 0;\r\n            while (column <= posX) {\r\n                prevCell = column;\r\n                column += 1;\r\n            }\r\n\r\n            if (this.isCellEditable(row, prevCell)) {\r\n                return {\r\n                    \"row\": row,\r\n                    \"column\": prevCell,\r\n                    \"posX\": posX\r\n                };\r\n            }\r\n        }\r\n    },\r\n\r\n    gotoUp: function(row, column, posX) {\r\n        var prevCell;\r\n        while (true) {\r\n            if (--row < 0) {\r\n                return null;\r\n            }\r\n\r\n            prevCell = column = 0;\r\n            while (column <= posX) {\r\n                prevCell = column;\r\n                column += 1;\r\n            }\r\n\r\n            if (this.isCellEditable(row, prevCell)) {\r\n                return {\r\n                    \"row\": row,\r\n                    \"column\": prevCell,\r\n                    \"posX\": posX\r\n                };\r\n            }\r\n        }\r\n    },\r\n    /* eslint-disable complexity*/\r\n    gotoNext: function(row, column, posX) {\r\n        /* jshint ignore:start */\r\n        if (row === null && column === null) {\r\n            row = column = posX = 0;\r\n            if (this.isCellEditable(row, column)) {\r\n                return {\r\n                    \"row\": row,\r\n                    \"column\": column,\r\n                    \"posX\": column\r\n                };\r\n            }\r\n        }\r\n        /* jshint ignore:end */\r\n        var pos = this.gotoRight(row, column, posX);\r\n        if (pos) {\r\n            return pos;\r\n        }\r\n\r\n        var firstFocusableCell;\r\n        var dataLength = this.getRowsLength();\r\n        while (++row < dataLength) {\r\n            firstFocusableCell = this.findFirstFocusableCell(row);\r\n            if (firstFocusableCell !== null) {\r\n                return {\r\n                    \"row\": row,\r\n                    \"column\": firstFocusableCell,\r\n                    \"posX\": firstFocusableCell\r\n                };\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n\r\n    gotoPrev: function(row, column, posX) {\r\n\r\n        /* jshint ignore:start */\r\n        if (row === null && column === null) {\r\n            row = this.getRowsLength() - 1;\r\n            column = posX = this.columns.length - 1;\r\n            if (this.isCellEditable(row, column)) {\r\n                return {\r\n                    \"row\": row,\r\n                    \"column\": column,\r\n                    \"posX\": column\r\n                };\r\n            }\r\n        }\r\n        /* jshint ignore:end */\r\n\r\n        var pos;\r\n        var lastSelectableCell;\r\n        while (!pos) {\r\n            pos = this.gotoLeft(row, column, posX);\r\n            if (pos) {\r\n                break;\r\n            }\r\n            if (--row < 0) {\r\n                return null;\r\n            }\r\n\r\n            column = 0;\r\n            lastSelectableCell = this.findLastFocusableCell(row);\r\n            if (lastSelectableCell !== null) {\r\n                pos = {\r\n                    \"row\": row,\r\n                    \"column\": lastSelectableCell,\r\n                    \"posX\": lastSelectableCell\r\n                };\r\n            }\r\n        }\r\n        return pos;\r\n    },\r\n\r\n\r\n    navigate: function(dir) {\r\n\r\n        if (!this.activeNode && dir !== \"prev\" && dir !== \"next\") {\r\n            return false;\r\n        }\r\n\r\n        if (this.currentEditor && !this.commitCurrentEdit()) {\r\n            return true;\r\n        }\r\n\r\n        this.setFocus();\r\n\r\n        var tabbingDirections = {\r\n            \"up\": -1,\r\n            \"down\": 1,\r\n            \"left\": -1,\r\n            \"right\": 1,\r\n            \"prev\": -1,\r\n            \"next\": 1\r\n        };\r\n        this.tabbingDirection = tabbingDirections[dir];\r\n\r\n        /* jshint ignore:start */\r\n        var stepFunctions = {\r\n            \"up\": this.gotoUp,\r\n            \"down\": this.gotoDown,\r\n            \"left\": this.gotoLeft,\r\n            \"right\": this.gotoRight,\r\n            \"prev\": this.gotoPrev,\r\n            \"next\": this.gotoNext\r\n        };\r\n\r\n        var stepFn = stepFunctions[dir];\r\n        if (stepFn) {\r\n            var pos = stepFn.call(this, this.activeRow, this.activeColumn, this.activePosX);\r\n            if (pos) {\r\n                if (this.hasFrozenRows && this.option.frozenBottom && pos.row === this.getRowsLength()) {\r\n                    return false;\r\n                }\r\n                this.setActiveCell(pos.row, pos.column);\r\n                return true;\r\n            }\r\n        }\r\n        /* jshint ignore:end */\r\n\r\n        this.setActiveCell(this.activeRow, this.activeColumn);\r\n        return false;\r\n\r\n    }\r\n    /* eslint-enable*/\r\n};\r\n\r\nmodule.exports = Navigate;","var $ = require(\"../../core/query.js\");\r\n\r\nvar CssRules = {\r\n\r\n    removeNode: function(node) {\r\n        if (node && node.parentNode) {\r\n            node.parentNode.removeChild(node);\r\n        }\r\n    },\r\n\r\n    appendNode: function(parentNode, node) {\r\n        if (parentNode && node) {\r\n            parentNode.appendChild(node);\r\n        }\r\n    },\r\n\r\n    find: function(context, container) {\r\n        return $(container || this.$container).find(context);\r\n    },\r\n\r\n    getNodeIndex: function(node) {\r\n        var index = parseInt($(node).attr(\"index\"), 10);\r\n        return index;\r\n    },\r\n\r\n    getTextWidth: function(text) {\r\n\r\n        var $text = $(\"<span/>\").css(\"visibility\", \"hidden\").html(text).appendTo(this.$container);\r\n        var width = $text.width();\r\n        $text.remove();\r\n\r\n        return width;\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = CssRules;","var ViewResize = {\r\n\r\n    resize: function(w, h) {\r\n        if (!this.initialized) {\r\n            return;\r\n        }\r\n\r\n        if (arguments.length === 1) {\r\n            if (typeof(w) === \"object\") {\r\n                this.$container.css(w);\r\n            } else {\r\n                this.$container.css({\r\n                    width: w\r\n                });\r\n            }\r\n        } else if (arguments.length === 2) {\r\n            this.$container.css({\r\n                width: w,\r\n                height: h\r\n            });\r\n        }\r\n\r\n        this.updateContainerSize();\r\n\r\n        this.updateHeaderSize();\r\n        this.updateBodyerSize();\r\n\r\n        this.render();\r\n    },\r\n\r\n    //=======================================================================================\r\n\r\n    updateContainerSize: function() {\r\n        this.containerWidth = this.$container.width();\r\n        this.containerHeight = this.$container.height();\r\n        //same width\r\n        this.headerWidth = this.containerWidth;\r\n        this.bodyerWidth = this.containerWidth;\r\n    },\r\n\r\n    //==========================================================================================\r\n    //only height need update, width is same as container always\r\n    updateHeaderSize: function() {\r\n\r\n        //update width\r\n        this.$paneHeader.width(this.headerWidth);\r\n\r\n        //update height\r\n        this.headerHeight = 0;\r\n        //require a valid container height\r\n        if (this.option.showHeader) {\r\n            if (this.containerHeight > 0 || this.option.autoHeight) {\r\n                this.updateHeaderTableHeight();\r\n            }\r\n        }\r\n\r\n        this.$paneHeader.height(this.headerHeight);\r\n\r\n    },\r\n\r\n    updateHeaderTableHeight: function() {\r\n        //set header table same height\r\n        var TL = this.$headerL.find(\".tg-header-table\");\r\n        var TR = this.$headerR.find(\".tg-header-table\");\r\n\r\n        //reset height\r\n        TL.css({\r\n            display: \"block\",\r\n            height: \"\"\r\n        });\r\n        TR.css({\r\n            display: \"block\",\r\n            height: \"\"\r\n        });\r\n\r\n        var TLH = TL.height();\r\n        var TRH = TR.height();\r\n        var TH = Math.max(TLH, TRH);\r\n\r\n        //fixed height\r\n        TL.css({\r\n            display: \"\",\r\n            height: TH\r\n        });\r\n        TR.css({\r\n            display: \"\",\r\n            height: TH\r\n        });\r\n\r\n        this.headerHeight = TH;\r\n\r\n    },\r\n\r\n    //=======================================================================================\r\n\r\n    // update pane height for all rows\r\n    // for collapse and expand too\r\n    updateBodyerSize: function(updateCssRules) {\r\n\r\n        //update 3 status: h/v scrollbar and hide scrollpane\r\n        this.updateScrollStatus();\r\n\r\n        //update bodyer size\r\n        //bodyer height depends on header height and auto height\r\n        this.bodyerHeight = this.containerHeight - this.headerHeight;\r\n        this.$paneBodyer.width(this.bodyerWidth);\r\n        this.$paneBodyer.height(this.bodyerHeight);\r\n\r\n        //for update css rules\r\n        this.canvasWidthChanged = false;\r\n\r\n        //update pane size\r\n        this.updatePaneWidth();\r\n        this.updatePaneHeight();\r\n\r\n        // update width first\r\n        this.updateCanvasWidth();\r\n        // then update height\r\n        this.updateCanvasHeight();\r\n\r\n        // update scrollpane\r\n        this.updateScrollpane();\r\n\r\n        //update css rules cache if canvas width changed\r\n        if (updateCssRules || this.canvasWidthChanged) {\r\n            this.updateCssRules();\r\n        }\r\n\r\n    },\r\n\r\n    //=======================================================================================\r\n\r\n    updatePaneWidth: function() {\r\n\r\n        this.updateScrollHeaderVisibility();\r\n\r\n        //no frozen pane\r\n        var paneWidthL = this.bodyerWidth;\r\n        var paneWidthR = 0;\r\n\r\n        //has frozen pane\r\n        if (this.hasFrozenColumns) {\r\n            paneWidthL = this.columnsWidthL;\r\n            paneWidthR = this.bodyerWidth - paneWidthL;\r\n\r\n            if (this.hideScrollPane) {\r\n                var scrollbarW = this.getScrollBarWidth();\r\n                if (paneWidthR < scrollbarW) {\r\n                    paneWidthR = scrollbarW;\r\n                }\r\n                paneWidthL = Math.max(0, this.bodyerWidth - paneWidthR);\r\n            }\r\n        }\r\n\r\n        this.paneWidthL = paneWidthL;\r\n        this.paneWidthR = paneWidthR;\r\n\r\n        //console.log(\"paneWidthL: \" + paneWidthL, \"paneWidthR: \" + paneWidthR);\r\n\r\n        this.$paneHeaderL.css({\r\n            left: 0,\r\n            width: this.paneWidthL\r\n        });\r\n        this.$paneHeaderR.css({\r\n            left: this.paneWidthL,\r\n            width: this.paneWidthR\r\n        });\r\n\r\n        this.$paneTopL.css({\r\n            left: 0,\r\n            width: this.paneWidthL\r\n        });\r\n        this.$paneTopR.css({\r\n            left: this.paneWidthL,\r\n            width: this.paneWidthR\r\n        });\r\n\r\n        this.$paneBottomL.css({\r\n            left: 0,\r\n            width: this.paneWidthL\r\n        });\r\n        this.$paneBottomR.css({\r\n            left: this.paneWidthL,\r\n            width: this.paneWidthR\r\n        });\r\n\r\n    },\r\n\r\n    updateScrollHeaderVisibility: function() {\r\n        if (this.previousHasScrollHeader === this.hideScrollPane) {\r\n            return;\r\n        }\r\n        this.previousHasScrollHeader = this.hideScrollPane;\r\n\r\n        //update header pane right\r\n        var headerR = this.$headerR.get(0);\r\n        if (this.hideScrollPane) {\r\n            headerR.style.visibility = \"hidden\";\r\n        } else {\r\n            headerR.style.visibility = \"\";\r\n        }\r\n\r\n        //update hidden columns\r\n        this.updateScrollPaneColumnsHidden(this.hideScrollPane);\r\n\r\n        //always changed if hide/show scroll header\r\n        this.canvasWidthChanged = true;\r\n\r\n    },\r\n\r\n    //update tg_hidden to set display to none in css rule \r\n    updateScrollPaneColumnsHidden: function(hidden) {\r\n        var frozenColumn = this.option.frozenColumn;\r\n        var columns = this.columns;\r\n        for (var i = frozenColumn + 1, l = columns.length - 1; i < l; i++) {\r\n            var column = columns[i];\r\n            column.tg_hidden = hidden;\r\n        }\r\n    },\r\n\r\n    //=======================================================================================\r\n\r\n    updatePaneHeight: function() {\r\n\r\n        var paneHeightT = this.bodyerHeight;\r\n        var paneHeightB = 0;\r\n\r\n        if (this.hasFrozenRows) {\r\n            if (this.option.frozenBottom) {\r\n                var scrollbarH = this.getScrollBarHeight();\r\n                paneHeightT = this.bodyerHeight - this.frozenRowsHeight - scrollbarH;\r\n                paneHeightB = this.frozenRowsHeight + scrollbarH;\r\n            } else {\r\n                paneHeightT = this.frozenRowsHeight;\r\n                paneHeightB = this.bodyerHeight - this.frozenRowsHeight;\r\n            }\r\n        }\r\n\r\n        this.paneHeightT = paneHeightT;\r\n        this.paneHeightB = paneHeightB;\r\n\r\n        //resize pane\r\n        this.$paneTopL.css({\r\n            top: 0,\r\n            height: this.paneHeightT\r\n        });\r\n        this.$paneTopR.css({\r\n            top: 0,\r\n            height: this.paneHeightT\r\n        });\r\n        this.$paneBottomL.css({\r\n            top: this.paneHeightT,\r\n            height: this.paneHeightB\r\n        });\r\n        this.$paneBottomR.css({\r\n            top: this.paneHeightT,\r\n            height: this.paneHeightB\r\n        });\r\n\r\n    },\r\n\r\n    //=======================================================================================\r\n\r\n    updateCanvasWidth: function() {\r\n\r\n        //new canvas width\r\n        var canvasWidthL = this.columnsWidthL;\r\n        var canvasWidthR = this.columnsWidthR;\r\n\r\n        if (canvasWidthL !== this.canvasWidthL || canvasWidthR !== this.canvasWidthR) {\r\n            this.canvasWidthL = canvasWidthL;\r\n            this.canvasWidthR = canvasWidthR;\r\n            this.canvasWidthChanged = true;\r\n        }\r\n\r\n        //console.log(\"canvasWidthL: \" + this.canvasWidthL, \"canvasWidthR: \" + this.canvasWidthR);\r\n\r\n        //scrollStatusChanged to fix frozen row right blank\r\n        if (this.canvasWidthChanged || this.scrollStatusChanged) {\r\n            this.updateHeaderCanvasWidth();\r\n            this.updateBodyerCanvasWidth();\r\n        }\r\n\r\n    },\r\n\r\n    updateCanvasHeight: function() {\r\n\r\n        var option = this.option;\r\n\r\n        //new canvas height\r\n        var canvasHeightT;\r\n        var canvasHeightB;\r\n\r\n        if (this.hasFrozenRows) {\r\n            if (option.frozenBottom) {\r\n                canvasHeightT = this.scrollRowsHeight;\r\n                canvasHeightB = this.frozenRowsHeight;\r\n            } else {\r\n                canvasHeightT = this.frozenRowsHeight;\r\n                canvasHeightB = this.scrollRowsHeight;\r\n            }\r\n        } else {\r\n            canvasHeightT = this.totalRowsHeight;\r\n            canvasHeightB = 0;\r\n        }\r\n\r\n        this.canvasHeightT = canvasHeightT;\r\n        this.canvasHeightB = canvasHeightB;\r\n\r\n        this.updateBodyerCanvasHeight();\r\n\r\n    },\r\n\r\n    //=======================================================================================\r\n\r\n    updateHeaderCanvasWidth: function() {\r\n        //always add scroll bar width\r\n        this.$headerL.width(this.canvasWidthL);\r\n        this.$headerR.width(this.canvasWidthR);\r\n    },\r\n\r\n    updateBodyerCanvasWidth: function() {\r\n        this.$canvasTopL.width(this.canvasWidthL);\r\n        this.$canvasBottomL.width(this.canvasWidthL);\r\n        this.$canvasTopR.width(this.canvasWidthR);\r\n        this.$canvasBottomR.width(this.canvasWidthR);\r\n    },\r\n\r\n    updateBodyerCanvasHeight: function() {\r\n        this.$canvasTopL.height(this.canvasHeightT);\r\n        this.$canvasTopR.height(this.canvasHeightT);\r\n        this.$canvasBottomL.height(this.canvasHeightB);\r\n        this.$canvasBottomR.height(this.canvasHeightB);\r\n    }\r\n\r\n\r\n};\r\n\r\nmodule.exports = ViewResize;","var RowCache = {\r\n\r\n    createRowCache: function(rowIndex) {\r\n        var rowCache = {\r\n            rowNodes: null,\r\n            cellNodes: []\r\n        };\r\n        this.rowsCache[rowIndex] = rowCache;\r\n        return rowCache;\r\n    },\r\n\r\n    getRowCache: function(rowIndex) {\r\n        var rowsCache = this.rowsCache[rowIndex];\r\n        return rowsCache;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    //there are 2 rows if hasFrozenRows (left and right)\r\n    getRowNodes: function(rowIndex) {\r\n        var rowCache = this.getRowCache(rowIndex);\r\n        if (rowCache) {\r\n            return rowCache.rowNodes;\r\n        }\r\n        return null;\r\n    },\r\n\r\n    getAllCacheRows: function() {\r\n        var allCacheRows = Object.keys(this.rowsCache);\r\n        return allCacheRows;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    getCellNodes: function(rowIndex) {\r\n        var rowCache = this.getRowCache(rowIndex);\r\n        if (rowCache) {\r\n            return rowCache.cellNodes;\r\n        }\r\n        return null;\r\n    },\r\n\r\n    getCellNode: function(rowIndex, columnIndex) {\r\n        var cellNodes = this.getCellNodes(rowIndex);\r\n        if (cellNodes) {\r\n            return cellNodes[columnIndex];\r\n        }\r\n        return null;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    removeRowFromCache: function(rowIndex) {\r\n        var rowNodes = this.getRowNodes(rowIndex);\r\n        if (rowNodes) {\r\n            this.removeNode(rowNodes[0]);\r\n            this.removeNode(rowNodes[1]);\r\n        }\r\n        delete this.rowsCache[rowIndex];\r\n    },\r\n\r\n    removeCellFromCache: function(rowIndex, columnIndex) {\r\n        var cellNodes = this.getCellNodes(rowIndex);\r\n        if (cellNodes) {\r\n            this.removeNode(cellNodes[columnIndex]);\r\n            delete cellNodes[columnIndex];\r\n        }\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    //clean handler, remove out of range\r\n    clearRowCacheByRange: function(range) {\r\n        var rowInfo = range.rowInfo;\r\n        var columnInfo = range.columnInfo;\r\n\r\n        var allCacheRows = this.getAllCacheRows();\r\n        var self = this;\r\n\r\n        allCacheRows.forEach(function(rowIndex) {\r\n            if (rowInfo[rowIndex]) {\r\n                //remove out of columns\r\n                var cellNodes = self.getCellNodes(rowIndex);\r\n                if (cellNodes) {\r\n                    for (var i = 0, l = cellNodes.length; i < l; i++) {\r\n                        if (!columnInfo[i]) {\r\n                            self.removeNode(cellNodes[i]);\r\n                            delete cellNodes[i];\r\n                        }\r\n                    }\r\n                }\r\n                return;\r\n            }\r\n            //remove out of rows (include all columns)\r\n            self.removeRowFromCache(rowIndex);\r\n        });\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = RowCache;","var $ = require(\"../../core/query.js\");\r\nvar Util = require(\"../../core/util.js\");\r\nvar Rows = {\r\n\r\n    setRows: function(rows) {\r\n        if (!Util.islist(rows)) {\r\n            rows = [];\r\n        }\r\n        this.rows = rows;\r\n        return this;\r\n    },\r\n\r\n    getRows: function() {\r\n        return this.rows;\r\n    },\r\n\r\n    //==========================================================================\r\n\r\n    getRowsLength: function() {\r\n        return this.rows.length;\r\n    },\r\n\r\n    getRowItem: function(rowIndex) {\r\n        var rowData = this.rows[rowIndex];\r\n        return rowData;\r\n    },\r\n\r\n    getCellValue: function(rowItem, columnItem) {\r\n        return rowItem[columnItem.id];\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    isFrozenRow: function(rowIndex) {\r\n        if (this.hasFrozenRows && rowIndex <= this.option.frozenRow) {\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n\r\n    //==========================================================================\r\n\r\n    getPreRenderRowList: function(rowList) {\r\n        var list = [];\r\n        if (!rowList.length) {\r\n            return list;\r\n        }\r\n        for (var i = 0, l = rowList.length; i < l; i++) {\r\n            var rowIndex = rowList[i];\r\n            if (this.getRowCache(rowIndex)) {\r\n                continue;\r\n            }\r\n            this.createRowCache(rowIndex);\r\n            list.push(rowIndex);\r\n        }\r\n        return list;\r\n    },\r\n\r\n    renderRows: function(rowList) {\r\n\r\n        var rows = this.getPreRenderRowList(rowList);\r\n        if (!rows.length) {\r\n            return;\r\n        }\r\n\r\n        var needToReselectCell = false;\r\n\r\n        var self = this;\r\n        rows.forEach(function(rowIndex) {\r\n\r\n            self.renderRowNodes(rowIndex);\r\n\r\n            if (self.activeNode && self.activeRow === rowIndex) {\r\n                needToReselectCell = true;\r\n            }\r\n        });\r\n\r\n        if (needToReselectCell) {\r\n            this.activeNode = this.getCellNode(this.activeRow, this.activeColumn);\r\n        }\r\n\r\n    },\r\n\r\n    createRowNode: function(rowData, rowClass, rowTop) {\r\n        var rowNode = document.createElement(\"div\");\r\n        rowNode.className = rowClass;\r\n        rowNode.style.top = rowTop + \"px\";\r\n        rowNode.setAttribute(\"index\", rowData.tg_index);\r\n        return rowNode;\r\n    },\r\n\r\n    renderRowNodes: function(rowIndex) {\r\n\r\n        var rowData = this.getRowItem(rowIndex);\r\n        if (!rowData) {\r\n            return;\r\n        }\r\n\r\n        var rowNodes = $();\r\n\r\n        var vPos = this.getRowVPos(rowIndex);\r\n        var rowClass = this.getRowClass(rowData);\r\n        var rowTop = this.getRowTop(rowIndex);\r\n\r\n        //left\r\n        var rowNodeL = this.createRowNode(rowData, rowClass, rowTop);\r\n        var $canvasL = this.getRowCanvas(vPos, \"left\");\r\n        $canvasL.append(rowNodeL);\r\n        rowNodes = rowNodes.add(rowNodeL);\r\n\r\n        //right\r\n        if (this.hasFrozenColumns) {\r\n            var rowNodeR = this.createRowNode(rowData, rowClass, rowTop);\r\n            var $canvasR = this.getRowCanvas(vPos, \"right\");\r\n            $canvasR.append(rowNodeR);\r\n            rowNodes = rowNodes.add(rowNodeR);\r\n        }\r\n\r\n        var rowCache = this.getRowCache(rowIndex);\r\n        if (rowCache) {\r\n            rowCache.rowNodes = rowNodes;\r\n        }\r\n\r\n    },\r\n\r\n    //==========================================================================\r\n    /* eslint-disable max-statements,complexity */\r\n    getRowClass: function(rowData) {\r\n\r\n        var rowIndex = rowData.tg_index;\r\n\r\n        var rowCss = [\"tg-row\"];\r\n\r\n        //level class\r\n        rowCss.push(\"tg-level-\" + rowData.tg_level);\r\n\r\n        //odd/even line, can NOT use :nth-child(even/odd), because not all rows are rendered\r\n        rowCss.push(rowIndex % 2 === 1 ? \"tg-odd\" : \"tg-even\");\r\n\r\n        /* jshint ignore:start */\r\n        //pane index first and last\r\n        if (rowIndex === this.option.frozenRow + 1) {\r\n            rowCss.push(\"tg-pane-first\");\r\n        }\r\n        //not else, if only one line\r\n        if (rowIndex === this.rows.length - 1) {\r\n            rowCss.push(\"tg-pane-last\");\r\n        }\r\n\r\n        //list index first and last\r\n        if (rowData.tg_list_index === 0) {\r\n            rowCss.push(\"tg-list-first\");\r\n        }\r\n        if (rowData.tg_list_index === rowData.tg_list_length - 1) {\r\n            rowCss.push(\"tg-list-last\");\r\n        }\r\n\r\n        //group, has subs\r\n        if (rowData.tg_group || rowData.rowType === \"group\") {\r\n            rowCss.push(\"tg-group\");\r\n\r\n            //collapsed and expanded status for group\r\n            if (rowData.collapsed || !rowData.tg_subs_length) {\r\n                rowCss.push(\"tg-collapsed\");\r\n            } else {\r\n                rowCss.push(\"tg-expanded\");\r\n            }\r\n\r\n        }\r\n        /* jshint ignore:end */\r\n\r\n        //custom type class name\r\n        if (rowData.rowType) {\r\n            rowCss.push(\"tg-\" + rowData.rowType);\r\n        }\r\n\r\n        //custom class name\r\n        if (rowData.rowClass) {\r\n            rowCss.push(rowData.rowClass);\r\n        }\r\n\r\n        //all row status\r\n        var rowStatus = [\r\n            \"selected\",\r\n            \"focused\",\r\n            \"highlight\",\r\n            \"draggable\",\r\n            \"waiting\"\r\n        ];\r\n\r\n        rowStatus.forEach(function(status) {\r\n            if (rowData[status]) {\r\n                rowCss.push(\"tg-\" + status);\r\n            }\r\n        });\r\n\r\n        //active row\r\n        if (rowIndex === this.activeRow) {\r\n            rowCss.push(\"tg-active\");\r\n        }\r\n\r\n        var rowClass = rowCss.join(\" \");\r\n\r\n        return rowClass;\r\n    },\r\n    /* eslint-enable*/\r\n    getRowTop: function(rowIndex) {\r\n        var o = this.option;\r\n\r\n        var top = o.rowHeight * rowIndex;\r\n\r\n        top -= this.scrollTopOffset;\r\n\r\n        if (this.hasFrozenRows && rowIndex > o.frozenRow) {\r\n            top -= this.frozenRowsHeight;\r\n        }\r\n\r\n        return top;\r\n\r\n    },\r\n\r\n    getRowVPos: function(rowIndex) {\r\n        var option = this.option;\r\n        var vPos = \"top\";\r\n        //frozen rows\r\n        if (this.hasFrozenRows) {\r\n            //frozened\r\n            if (rowIndex <= option.frozenRow) {\r\n                if (option.frozenBottom) {\r\n                    vPos = \"bottom\";\r\n                }\r\n            } else {\r\n                if (!option.frozenBottom) {\r\n                    vPos = \"bottom\";\r\n                }\r\n            }\r\n        }\r\n        return vPos;\r\n    },\r\n\r\n    getRowCanvas: function(vPos, hPos) {\r\n        if (vPos === \"top\") {\r\n            if (hPos === \"left\") {\r\n                return this.$canvasTopL;\r\n            } else {\r\n                return this.$canvasTopR;\r\n            }\r\n        } else {\r\n            if (hPos === \"left\") {\r\n                return this.$canvasBottomL;\r\n            } else {\r\n                return this.$canvasBottomR;\r\n            }\r\n        }\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = Rows;","var E = require(\"../../core/event-type.js\");\r\nvar Util = require(\"../../core/util.js\");\r\nvar Scroll = {\r\n    //scroll public API\r\n\r\n    //========================================================================================\r\n    //set scroll by postion\r\n\r\n    setScroll: function(x, y) {\r\n        if (x === this.scrollLeft && y === this.scrollTop) {\r\n            return this;\r\n        }\r\n        this.scrollLeft = x;\r\n        this.scrollTop = y;\r\n        this.scrollHandler();\r\n        return this;\r\n    },\r\n\r\n    setScrollLeft: function(x) {\r\n        if (x === this.scrollLeft) {\r\n            return this;\r\n        }\r\n        this.scrollLeft = x;\r\n        this.scrollHandler();\r\n        return this;\r\n    },\r\n\r\n    setScrollTop: function(y) {\r\n        if (y === this.scrollTop) {\r\n            return this;\r\n        }\r\n        this.scrollTop = y;\r\n        this.scrollHandler();\r\n        return this;\r\n    },\r\n\r\n    //========================================================================================\r\n    //get scroll position\r\n\r\n    getScrollRowPosition: function(rowItem) {\r\n        if (!rowItem) {\r\n            return null;\r\n        }\r\n        var o = this.option;\r\n        var rowIndex = rowItem.tg_index;\r\n        if (this.hasFrozenRows) {\r\n            rowIndex -= o.frozenRow + 1;\r\n        }\r\n        if (rowIndex >= 0) {\r\n            var rowPosition = rowIndex * o.rowHeight;\r\n            return rowPosition;\r\n        }\r\n        return null;\r\n    },\r\n\r\n    getScrollColumnPosition: function(columnItem) {\r\n        if (!columnItem) {\r\n            return null;\r\n        }\r\n        var x = columnItem.tg_left;\r\n        if (this.hasFrozenColumns) {\r\n            x -= this.canvasWidthL;\r\n        }\r\n        //console.log(columnItem);\r\n        if (x >= 0) {\r\n            return x;\r\n        }\r\n        return null;\r\n    },\r\n\r\n    //========================================================================================\r\n    //scroll to item\r\n\r\n    scrollToItem: function(rowItem, columnItem) {\r\n        this.scrollToChanged = false;\r\n        this.scrollToRowHandler(rowItem);\r\n        this.scrollToColumnHandler(columnItem);\r\n        if (!this.scrollToChanged) {\r\n            return this;\r\n        }\r\n        this.scrollHandler();\r\n        return this;\r\n    },\r\n\r\n    scrollToRowHandler: function(rowItem) {\r\n        if (!rowItem) {\r\n            return;\r\n        }\r\n        var rowPosition = this.getScrollRowPosition(rowItem);\r\n        if (!Util.isnum(rowPosition)) {\r\n            return;\r\n        }\r\n        if (rowPosition === this.scrollTop) {\r\n            return;\r\n        }\r\n        this.scrollTop = rowPosition;\r\n        this.scrollToChanged = true;\r\n    },\r\n\r\n    scrollToColumnHandler: function(columnItem) {\r\n        if (!columnItem) {\r\n            return;\r\n        }\r\n        var columnPosition = this.getScrollColumnPosition(columnItem);\r\n        if (!Util.isnum(columnPosition)) {\r\n            return;\r\n        }\r\n        if (columnPosition === this.scrollLeft) {\r\n            return;\r\n        }\r\n        this.scrollLeft = columnPosition;\r\n        this.scrollToChanged = true;\r\n    },\r\n\r\n    //========================================================================================\r\n    //scroll item into view\r\n\r\n    scrollItemIntoView: function(rowItem, columnItem) {\r\n        this.scrollIntoViewChanged = false;\r\n        this.scrollRowIntoViewHandler(rowItem);\r\n        this.scrollColumnIntoViewHandler(columnItem);\r\n        if (!this.scrollIntoViewChanged) {\r\n            return this;\r\n        }\r\n        this.scrollHandler();\r\n        return this;\r\n    },\r\n\r\n    scrollRowIntoViewHandler: function(rowItem) {\r\n        if (!rowItem) {\r\n            return;\r\n        }\r\n        var rowPosition = this.getScrollRowPosition(rowItem);\r\n        if (!Util.isnum(rowPosition)) {\r\n            return;\r\n        }\r\n\r\n        //top in view\r\n        if (rowPosition < this.scrollTop) {\r\n            this.scrollTop = rowPosition;\r\n            this.scrollIntoViewChanged = true;\r\n            return;\r\n        }\r\n\r\n        //bottom in view\r\n        var rowHeight = this.option.rowHeight;\r\n        var scrollViewHeight = this.getScrollViewHeight();\r\n\r\n        if (rowPosition + rowHeight > this.scrollTop + scrollViewHeight) {\r\n            var top = rowPosition - (scrollViewHeight - rowHeight);\r\n            this.scrollTop = top;\r\n            this.scrollIntoViewChanged = true;\r\n            return;\r\n        }\r\n\r\n    },\r\n\r\n    scrollColumnIntoViewHandler: function(columnItem) {\r\n        if (!columnItem) {\r\n            return;\r\n        }\r\n        var columnPosition = this.getScrollColumnPosition(columnItem);\r\n        if (!Util.isnum(columnPosition)) {\r\n            return;\r\n        }\r\n\r\n        //left in view\r\n        if (columnPosition < this.scrollLeft) {\r\n            this.scrollLeft = columnPosition;\r\n            this.scrollIntoViewChanged = true;\r\n            return;\r\n        }\r\n\r\n        //right in view\r\n        var columnWidth = columnItem.width;\r\n        var scrollViewWidth = this.getScrollViewWidth();\r\n        if (columnPosition + columnWidth > this.scrollLeft + scrollViewWidth) {\r\n            var left = columnPosition - (scrollViewWidth - columnWidth);\r\n            this.scrollLeft = left;\r\n            this.scrollIntoViewChanged = true;\r\n            return;\r\n        }\r\n\r\n    },\r\n\r\n    //========================================================================================\r\n    //scroll handler by scrollLeft and scrollTop\r\n\r\n    scrollHandler: function() {\r\n\r\n        //sets new position with team sync\r\n        this.scrollpane.setPosition(this.scrollLeft, this.scrollTop);\r\n        //require update scrollTopOffset when scrollTop changed\r\n        this.scrollTopOffset = this.scrollpane.getScrollTopOffset();\r\n\r\n        this.scrollRenderHandler();\r\n    },\r\n\r\n    scrollRenderHandler: function() {\r\n\r\n        if (this.previousScrollTopOffset !== this.scrollTopOffset) {\r\n            this.previousScrollTopOffset = this.scrollTopOffset;\r\n            this.updateCacheTopOffset();\r\n        }\r\n\r\n        if (this.previousScrollLeft === this.scrollLeft && this.previousScrollTop === this.scrollTop) {\r\n            return;\r\n        }\r\n\r\n        var distanceLeft = Math.abs(Util.tonum(this.scrollLeft - this.previousScrollLeft));\r\n        var distanceTop = Math.abs(Util.tonum(this.scrollTop - this.previousScrollTop));\r\n\r\n        this.previousScrollLeft = this.scrollLeft;\r\n        this.previousScrollTop = this.scrollTop;\r\n\r\n        this.debonceRenderHandler(distanceLeft, distanceTop);\r\n\r\n        this.trigger(E.onScroll, {\r\n            scrollLeft: this.scrollLeft,\r\n            scrollTop: this.scrollTop\r\n        });\r\n\r\n    },\r\n\r\n    debonceRenderHandler: function(distanceLeft, distanceTop) {\r\n        //check if need render\r\n        //time < 20ms\r\n        //distance < 20px\r\n        var timestamp_now = new Date().getTime();\r\n        var d = timestamp_now - this.timestamp_render;\r\n        if (d < 20 || (distanceLeft < 20 && distanceTop < 20)) {\r\n            //console.log(\"< 20\");\r\n            this.render();\r\n            return false;\r\n        }\r\n\r\n        this.renderNow();\r\n        return true;\r\n    },\r\n\r\n    //max height fixing\r\n    updateCacheTopOffset: function() {\r\n        //console.log(\"updateCacheTopOffset\", this.scrollTopOffset);\r\n        var self = this;\r\n        var allCacheRows = this.getAllCacheRows();\r\n        allCacheRows.forEach(function(rowIndex) {\r\n            //do NOT update frozen row\r\n            if (rowIndex <= self.option.frozenRow) {\r\n                return;\r\n            }\r\n            var rowNodes = self.getRowNodes(rowIndex);\r\n            if (rowNodes) {\r\n                var rowTop = self.getRowTop(rowIndex);\r\n                rowNodes.css(\"top\", rowTop);\r\n            }\r\n        });\r\n\r\n    },\r\n\r\n    //====================================================================================\r\n\r\n    getScrollViewWidth: function() {\r\n        var scrollViewWidth = this.getScrollPaneWidth();\r\n        scrollViewWidth -= this.getScrollBarWidth();\r\n        return scrollViewWidth;\r\n    },\r\n\r\n    getScrollViewHeight: function() {\r\n        var scrollViewHeight = this.getScrollPaneHeight();\r\n        if (!this.option.frozenBottom) {\r\n            scrollViewHeight -= this.getScrollBarHeight();\r\n        }\r\n        return scrollViewHeight;\r\n    },\r\n\r\n    getScrollPaneWidth: function() {\r\n        var scrollPaneWidth = this.scrollpane.width();\r\n        return scrollPaneWidth;\r\n    },\r\n\r\n    getScrollPaneHeight: function() {\r\n        var scrollpaneHeight = this.scrollpane.height();\r\n        return scrollpaneHeight;\r\n    },\r\n\r\n    getScrollBarWidth: function() {\r\n        if (this.hasVScroll) {\r\n            return this.scrollbarSizeV;\r\n        }\r\n        return 0;\r\n    },\r\n\r\n    getScrollBarHeight: function() {\r\n        if (this.hasHScroll) {\r\n            return this.scrollbarSizeH;\r\n        }\r\n        return 0;\r\n    },\r\n\r\n    getScrollLeft: function() {\r\n        var scrollLeft = this.scrollpane.getScrollLeft();\r\n        return scrollLeft;\r\n    },\r\n\r\n    getScrollTop: function() {\r\n        var scrollTop = this.scrollpane.getScrollTop();\r\n        return scrollTop;\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = Scroll;","var E = require(\"../../core/event-type.js\");\r\nvar Util = require(\"../../core/util.js\");\r\nvar ViewLayout = {\r\n\r\n    //update all scroll bar status first\r\n    //h scroll depends on blank column\r\n    //v scroll depends on rows num\r\n    updateScrollStatus: function() {\r\n\r\n        //global info, reset blank column\r\n        this.updateGlobalScrollInfo();\r\n\r\n        //update scroll status\r\n        this.updateHScrollStatus();\r\n        this.updateVScrollStatus();\r\n\r\n        //h scroll fix again if has v scroll\r\n        this.updateBlankColumnWidth();\r\n\r\n        this.scrollStatusChanged = false;\r\n\r\n        if (this.previousHasHScroll !== this.hasHScroll || this.previousHasVScroll !== this.hasVScroll) {\r\n            this.scrollStatusChanged = true;\r\n\r\n            this.previousHasHScroll = this.hasHScroll;\r\n            this.previousHasVScroll = this.hasVScroll;\r\n\r\n            this.trigger(E.onScrollStatusChanged, {\r\n                hasHScroll: this.hasHScroll,\r\n                hasVScroll: this.hasVScroll\r\n            });\r\n\r\n        }\r\n\r\n        //console.log(\"scrollStatusChanged\", this.scrollStatusChanged);\r\n\r\n        //all for update those 3 status\r\n        //console.log(\"hasHScroll: \" + this.hasHScroll, \"hasVScroll: \" + this.hasVScroll, \"hideScrollPane: \" + this.hideScrollPane);\r\n\r\n    },\r\n\r\n    //=======================================================================================\r\n\r\n    updateGlobalScrollInfo: function() {\r\n\r\n        //all rows height\r\n        this.totalRowsLength = this.getRowsLength();\r\n        this.totalRowsHeight = this.totalRowsLength * this.option.rowHeight;\r\n\r\n        //scroll rows height, require frozenRowsHeight on init pane\r\n        this.scrollRowsHeight = this.totalRowsHeight - this.frozenRowsHeight;\r\n\r\n        //zero height fixing\r\n        this.totalRowsHeight = Math.max(this.totalRowsHeight, 1);\r\n        this.scrollRowsHeight = Math.max(this.scrollRowsHeight, 1);\r\n\r\n        //clean if outside of the data range\r\n        this.invalidateRowsFrom(this.totalRowsLength);\r\n        if (this.activeNode && this.activeRow > this.totalRowsLength - 1) {\r\n            this.resetActiveCell();\r\n        }\r\n\r\n    },\r\n\r\n    //=======================================================================================\r\n\r\n    updateHScrollStatus: function() {\r\n        //h scroll status\r\n        this.hasHScroll = true;\r\n\r\n        //reset column width and update width again\r\n        this.updateColumnsWidth();\r\n\r\n        this.updateHideScrollPaneStatus();\r\n\r\n        if (this.hideScrollPane) {\r\n            return;\r\n        }\r\n\r\n        //console.log(\"containerWidth: \" + this.containerWidth, \"columnsWidth: \" + this.columnsWidth);\r\n\r\n        var blankColumnWidth = this.containerWidth - this.columnsWidth;\r\n\r\n        //console.log(\"blankColumnWidth: \" + blankColumnWidth, \"blankColumn.width: \" + this.blankColumn.width);\r\n\r\n        if (blankColumnWidth >= 0) {\r\n            this.hasHScroll = false;\r\n        }\r\n\r\n    },\r\n\r\n    updateHideScrollPaneStatus: function() {\r\n\r\n        this.hideScrollPane = false;\r\n\r\n        if (this.hasFrozenColumns) {\r\n            //has frozen pane\r\n            var scrollPanewidth = this.bodyerWidth - this.columnsWidthL;\r\n            var scrollPaneMinWidth = this.getScrollPaneMinWidth();\r\n            if (scrollPanewidth < scrollPaneMinWidth) {\r\n                //hide right scrollpane\r\n                this.hideScrollPane = true;\r\n                this.hasHScroll = false;\r\n                var scrollbarW = this.getScrollBarWidth();\r\n                if (scrollPanewidth < scrollbarW) {\r\n                    //has left h scroll\r\n                    this.hasHScroll = true;\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    getScrollPaneMinWidth: function() {\r\n        var scrollPaneMinWidth = this.option.scrollPaneMinWidth;\r\n        if (!Util.isnum(scrollPaneMinWidth) || scrollPaneMinWidth < 0) {\r\n            scrollPaneMinWidth = this.scrollbarSizeV;\r\n        }\r\n        return scrollPaneMinWidth;\r\n    },\r\n\r\n    //=======================================================================================\r\n\r\n    updateVScrollStatus: function() {\r\n        //v scroll status\r\n        this.hasVScroll = true;\r\n\r\n        var scrollbarH = this.getScrollBarHeight();\r\n\r\n        if (this.option.autoHeight) {\r\n            this.hasVScroll = false;\r\n\r\n            //update container height again\r\n            this.containerHeight = this.headerHeight + this.totalRowsHeight + scrollbarH;\r\n            this.$container.height(this.containerHeight);\r\n\r\n        } else {\r\n\r\n            var tempBodyerHeight = this.containerHeight - this.headerHeight - scrollbarH;\r\n            if (tempBodyerHeight >= this.totalRowsHeight) {\r\n                this.hasVScroll = false;\r\n            }\r\n\r\n        }\r\n\r\n    },\r\n\r\n    //=======================================================================================\r\n\r\n    updateColumnsWidth: function() {\r\n\r\n        //reset blank column\r\n        this.blankColumn.width = 0;\r\n\r\n        var option = this.option;\r\n        var columns = this.columns;\r\n\r\n        //update left right total width\r\n        var columnsWidthL = 0;\r\n        var columnsWidthR = 0;\r\n\r\n        var len = columns.length;\r\n        //x position\r\n        var left = 0;\r\n        for (var i = 0; i < len; i++) {\r\n            var column = columns[i];\r\n            column.tg_left = left;\r\n            var width = column.width;\r\n            if (width > 0) {\r\n                left += width;\r\n                if (this.hasFrozenColumns && i > option.frozenColumn) {\r\n                    columnsWidthR += width;\r\n                } else {\r\n                    columnsWidthL += width;\r\n                }\r\n            }\r\n        }\r\n\r\n        this.columnsWidthL = columnsWidthL;\r\n        this.columnsWidthR = columnsWidthR;\r\n\r\n        //total width\r\n        this.columnsWidth = columnsWidthL + columnsWidthR;\r\n\r\n    },\r\n\r\n    /* eslint-disable complexity */\r\n    updateBlankColumnWidth: function() {\r\n\r\n        var blankColumnWidth = this.containerWidth - this.columnsWidth;\r\n        if (this.hasVScroll && !this.hasHScroll) {\r\n            blankColumnWidth = this.containerWidth - this.columnsWidth - this.scrollbarSizeV;\r\n        }\r\n\r\n        //console.log(blankColumnWidth);\r\n\r\n        //fix h scroll status again, and fix columns width \r\n        if (!this.hasHScroll) {\r\n\r\n            if (blankColumnWidth >= 0) {\r\n\r\n                //no h scroll, has blank or blank = 0\r\n                if (this.hasFrozenColumns) {\r\n                    this.columnsWidthR += blankColumnWidth;\r\n                } else {\r\n                    this.columnsWidthL += blankColumnWidth;\r\n                }\r\n                this.blankColumn.width = blankColumnWidth;\r\n\r\n            } else {\r\n                //has h scroll, fix status again\r\n                this.hasHScroll = true;\r\n            }\r\n\r\n        }\r\n\r\n        //console.log(\"columnsWidthL: \" + this.columnsWidthL, \"columnsWidthR: \" + this.columnsWidthR);\r\n\r\n    }\r\n    /* eslint-enable */\r\n\r\n};\r\n\r\nmodule.exports = ViewLayout;","var Util = require(\"../../core/util.js\");\r\nvar ScrollPane = require(\"../ui/scroll-pane/scroll-pane.js\");\r\n\r\nvar ViewScrollpane = {\r\n\r\n    //=============================================================================================\r\n\r\n    initScrollbarSize: function() {\r\n        var o = this.option;\r\n        var size = Util.tonum(o.scrollbarSize);\r\n        this.scrollbarSizeH = size;\r\n        if (Util.isnum(o.scrollbarSizeH)) {\r\n            this.scrollbarSizeH = o.scrollbarSizeH;\r\n        }\r\n\r\n        this.scrollbarSizeV = size;\r\n        if (Util.isnum(o.scrollbarSizeV)) {\r\n            this.scrollbarSizeV = o.scrollbarSizeV;\r\n        }\r\n    },\r\n\r\n    //init all pane \r\n    initScrollpane: function() {\r\n        this.initFrozenInfo();\r\n        this.initFrozenStyle();\r\n\r\n        this.createScrollpane();\r\n    },\r\n\r\n    initFrozenInfo: function() {\r\n        var o = this.option;\r\n\r\n        if (o.frozenColumn > -1) {\r\n            this.hasFrozenColumns = true;\r\n            o.frozenColumns = Math.max(0, o.frozenColumn + 1);\r\n        } else {\r\n            this.hasFrozenColumns = false;\r\n            o.frozenColumns = 0;\r\n        }\r\n\r\n        if (o.frozenRow > -1) {\r\n            this.hasFrozenRows = true;\r\n            o.frozenRows = Math.max(0, o.frozenRow + 1);\r\n            this.frozenRowsHeight = o.frozenRows * o.rowHeight;\r\n        } else {\r\n            this.hasFrozenRows = false;\r\n            o.frozenRows = 0;\r\n            this.frozenRowsHeight = 0;\r\n        }\r\n    },\r\n\r\n    initFrozenStyle: function() {\r\n\r\n        var map = {\r\n            TL: \"\",\r\n            TR: \"\",\r\n            BL: \"\",\r\n            BR: \"\"\r\n        };\r\n\r\n        if (this.hasFrozenRows) {\r\n            if (this.option.frozenBottom) {\r\n                map.BL = \"tg-frozen tg-frozen-h\";\r\n                map.BR = \"tg-frozen tg-frozen-h\";\r\n            } else {\r\n                map.TL = \"tg-frozen tg-frozen-h\";\r\n                map.TR = \"tg-frozen tg-frozen-h\";\r\n            }\r\n        }\r\n\r\n        if (this.hasFrozenColumns) {\r\n            map.TL += \" tg-frozen tg-frozen-v\";\r\n            map.BL += \" tg-frozen tg-frozen-v\";\r\n        }\r\n\r\n        //frozen row style\r\n        this.$canvasTopL.addClass(map.TL);\r\n        this.$canvasTopR.addClass(map.TR);\r\n        this.$canvasBottomL.addClass(map.BL);\r\n        this.$canvasBottomR.addClass(map.BR);\r\n\r\n    },\r\n\r\n    //=============================================================================================\r\n\r\n    removeScrollpane: function() {\r\n        if (!this.scrollpaneList) {\r\n            return this;\r\n        }\r\n        this.scrollpaneList.forEach(function(scrollpane) {\r\n            if (scrollpane) {\r\n                scrollpane.destroy();\r\n            }\r\n        });\r\n        this.scrollpaneList = null;\r\n    },\r\n\r\n    //init all scrollpane \r\n    createScrollpane: function() {\r\n\r\n        //remove previous scrollpane\r\n        this.removeScrollpane();\r\n\r\n        //create new scrollpane\r\n        this.scrollpaneHeaderL = new ScrollPane(this.$paneHeaderL, \"header_left\");\r\n        this.scrollpaneHeaderR = new ScrollPane(this.$paneHeaderR, \"header_right\");\r\n        this.scrollpaneTopL = new ScrollPane(this.$paneTopL, \"top_left\");\r\n        this.scrollpaneTopR = new ScrollPane(this.$paneTopR, \"top_right\");\r\n        this.scrollpaneBottomL = new ScrollPane(this.$paneBottomL, \"bottom_left\");\r\n        this.scrollpaneBottomR = new ScrollPane(this.$paneBottomR, \"bottom_right\");\r\n\r\n        this.scrollpaneList = [\r\n            this.scrollpaneHeaderL,\r\n            this.scrollpaneHeaderR,\r\n            this.scrollpaneTopL,\r\n            this.scrollpaneTopR,\r\n            this.scrollpaneBottomL,\r\n            this.scrollpaneBottomR\r\n        ];\r\n\r\n        //sync scrollpane team\r\n        //h sync handler, with header\r\n        //for right\r\n        this.scrollpaneBottomR.setGroupH([this.scrollpaneHeaderR, this.scrollpaneTopR]);\r\n        this.scrollpaneTopR.setGroupH([this.scrollpaneHeaderR, this.scrollpaneBottomR]);\r\n        //for left \r\n        this.scrollpaneBottomL.setGroupH([this.scrollpaneHeaderL, this.scrollpaneTopL]);\r\n        this.scrollpaneTopL.setGroupH([this.scrollpaneHeaderL, this.scrollpaneBottomL]);\r\n\r\n        //v sync handler\r\n        //for bottom\r\n        this.scrollpaneBottomR.setGroupV(this.scrollpaneBottomL);\r\n        this.scrollpaneBottomL.setGroupV(this.scrollpaneBottomR);\r\n        //for top frozen bottom case\r\n        this.scrollpaneTopR.setGroupV(this.scrollpaneTopL);\r\n        this.scrollpaneTopL.setGroupV(this.scrollpaneTopR);\r\n\r\n        this.initActiveScrollpane();\r\n        this.initPaneVisibility();\r\n\r\n    },\r\n\r\n    //active scrollpane and frozen scrollpane (for hideScrollPane key left/right handler)\r\n    initActiveScrollpane: function() {\r\n        if (this.hasFrozenRows && !this.option.frozenBottom) {\r\n            if (this.hasFrozenColumns) {\r\n                this.scrollpane = this.scrollpaneBottomR;\r\n            } else {\r\n                this.scrollpane = this.scrollpaneBottomL;\r\n            }\r\n            this.scrollpaneFrozen = this.scrollpaneBottomL;\r\n        } else {\r\n            if (this.hasFrozenColumns) {\r\n                this.scrollpane = this.scrollpaneTopR;\r\n            } else {\r\n                this.scrollpane = this.scrollpaneTopL;\r\n            }\r\n            this.scrollpaneFrozen = this.scrollpaneTopL;\r\n        }\r\n    },\r\n\r\n    initPaneVisibility: function() {\r\n\r\n        this.scrollpaneHeaderL.show();\r\n        this.scrollpaneTopL.show();\r\n\r\n        if (this.hasFrozenColumns) {\r\n\r\n            this.scrollpaneHeaderR.show();\r\n            this.scrollpaneTopR.show();\r\n\r\n            if (this.hasFrozenRows) {\r\n                this.scrollpaneBottomL.show();\r\n                this.scrollpaneBottomR.show();\r\n            } else {\r\n                this.scrollpaneBottomL.hide();\r\n                this.scrollpaneBottomR.hide();\r\n            }\r\n        } else {\r\n\r\n            this.scrollpaneHeaderR.hide();\r\n            this.scrollpaneTopR.hide();\r\n            this.scrollpaneBottomR.hide();\r\n\r\n            if (this.hasFrozenRows) {\r\n                this.scrollpaneBottomL.show();\r\n            } else {\r\n                this.scrollpaneBottomL.hide();\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    //=============================================================================================\r\n    //update \r\n\r\n    updateScrollpane: function() {\r\n\r\n        var scrollpaneOption = this.getScrollpaneOption();\r\n\r\n        this.scrollpaneHeaderL.render({\r\n            scrollpaneW: this.paneWidthL,\r\n            scrollpaneH: this.headerHeight,\r\n            scrollbodyW: this.canvasWidthL,\r\n            scrollbodyH: this.headerHeight,\r\n            scrollBarV: scrollpaneOption.HLV,\r\n            scrollBarH: scrollpaneOption.HLH\r\n        });\r\n        this.scrollpaneHeaderR.render({\r\n            scrollpaneW: this.paneWidthR,\r\n            scrollpaneH: this.headerHeight,\r\n            scrollbodyW: this.canvasWidthR,\r\n            scrollbodyH: this.headerHeight,\r\n            scrollBarV: scrollpaneOption.HRV,\r\n            scrollBarH: scrollpaneOption.HRH\r\n        });\r\n\r\n        this.scrollpaneTopL.render({\r\n            scrollpaneW: this.paneWidthL,\r\n            scrollpaneH: this.paneHeightT,\r\n            scrollbodyW: this.canvasWidthL,\r\n            scrollbodyH: this.canvasHeightT,\r\n            scrollBarV: scrollpaneOption.TLV,\r\n            scrollBarH: scrollpaneOption.TLH\r\n        });\r\n        this.scrollpaneTopR.render({\r\n            scrollpaneW: this.paneWidthR,\r\n            scrollpaneH: this.paneHeightT,\r\n            scrollbodyW: this.canvasWidthR,\r\n            scrollbodyH: this.canvasHeightT,\r\n            scrollBarV: scrollpaneOption.TRV,\r\n            scrollBarH: scrollpaneOption.TRH\r\n        });\r\n\r\n        this.scrollpaneBottomL.render({\r\n            scrollpaneW: this.paneWidthL,\r\n            scrollpaneH: this.paneHeightB,\r\n            scrollbodyW: this.canvasWidthL,\r\n            scrollbodyH: this.canvasHeightB,\r\n            scrollBarV: scrollpaneOption.BLV,\r\n            scrollBarH: scrollpaneOption.BLH\r\n        });\r\n        this.scrollpaneBottomR.render({\r\n            scrollpaneW: this.paneWidthR,\r\n            scrollpaneH: this.paneHeightB,\r\n            scrollbodyW: this.canvasWidthR,\r\n            scrollbodyH: this.canvasHeightB,\r\n            scrollBarV: scrollpaneOption.BRV,\r\n            scrollBarH: scrollpaneOption.BRH\r\n        });\r\n\r\n        //update scroll position if column resize and scroll position is max right or bottom\r\n        this.scrollLeft = this.getScrollLeft();\r\n        this.scrollTop = this.getScrollTop();\r\n    },\r\n\r\n    getScrollpaneOption: function() {\r\n\r\n        //blank:\r\n        //false: without blank (default)\r\n        //true: with blank, without scroll view extension\r\n        //1: with blank, with scroll view extension\r\n\r\n        //default scrollpane option\r\n        var spo = {\r\n            HLH: {\r\n                size: 0,\r\n                blank: false\r\n            },\r\n            HLV: {\r\n                size: 0,\r\n                blank: false\r\n            },\r\n\r\n            HRH: {\r\n                size: 0,\r\n                blank: false\r\n            },\r\n            HRV: {\r\n                size: 0,\r\n                blank: false\r\n            },\r\n\r\n            TLH: {\r\n                size: 0,\r\n                blank: false\r\n            },\r\n            TLV: {\r\n                size: 0,\r\n                blank: false\r\n            },\r\n\r\n            TRH: {\r\n                size: 0,\r\n                blank: false\r\n            },\r\n            TRV: {\r\n                size: 0,\r\n                blank: false\r\n            },\r\n\r\n            BLH: {\r\n                size: 0,\r\n                blank: false\r\n            },\r\n            BLV: {\r\n                size: 0,\r\n                blank: false\r\n            },\r\n\r\n            BRH: {\r\n                size: 0,\r\n                blank: false\r\n            },\r\n            BRV: {\r\n                size: 0,\r\n                blank: false\r\n            }\r\n        };\r\n\r\n        this.scrollbarOptionHandler(spo);\r\n        //console.log(spo);\r\n\r\n        return spo;\r\n    },\r\n\r\n    scrollbarOptionHandler: function(spo) {\r\n\r\n        var sizeH = this.scrollbarSizeH;\r\n        var sizeV = this.scrollbarSizeV;\r\n\r\n        //always handle header\r\n        this.scrollbarHeaderHandler(spo, sizeH, sizeV);\r\n\r\n        if (this.hasFrozenColumns) {\r\n            if (this.hasFrozenRows) {\r\n                this.scrollbarC1R1Handler(spo, sizeH, sizeV);\r\n            } else {\r\n                this.scrollbarC1R0Handler(spo, sizeH, sizeV);\r\n            }\r\n        } else {\r\n            if (this.hasFrozenRows) {\r\n                this.scrollbarC0R1Handler(spo, sizeH, sizeV);\r\n            } else {\r\n                this.scrollbarC0R0Handler(spo, sizeH, sizeV);\r\n            }\r\n        }\r\n    },\r\n\r\n    //===============================================\r\n    scrollbarHeaderHandler: function(spo, sizeH, sizeV) {\r\n        if (this.hasVScroll) {\r\n            if (this.hasFrozenColumns) {\r\n                spo.HRV.size = sizeV;\r\n                spo.HRV.blank = 1;\r\n            } else {\r\n                spo.HLV.size = sizeV;\r\n                spo.HLV.blank = 1;\r\n            }\r\n        }\r\n    },\r\n\r\n    //===============================================\r\n    //frozen column 0, frozen row 0\r\n    scrollbarC0R0Handler: function(spo, sizeH, sizeV) {\r\n        spo.TLH.size = sizeH;\r\n        spo.TLV.size = sizeV;\r\n    },\r\n\r\n    //===============================================\r\n    //frozen column 0, frozen row 1\r\n    scrollbarC0R1Handler: function(spo, sizeH, sizeV) {\r\n        if (this.option.frozenBottom) {\r\n            this.scrollbarC0R1B1Handler(spo, sizeH, sizeV);\r\n        } else {\r\n            this.scrollbarC0R1B0Handler(spo, sizeH, sizeV);\r\n        }\r\n    },\r\n\r\n    //frozen column 0, frozen row 1, bottom\r\n    scrollbarC0R1B1Handler: function(spo, sizeH, sizeV) {\r\n        spo.BLH.size = sizeH;\r\n        spo.TLV.size = sizeV;\r\n        if (this.hasVScroll) {\r\n            spo.BLV.size = sizeV;\r\n            spo.BLV.blank = 1;\r\n        }\r\n    },\r\n\r\n    //frozen column 0, frozen row 1, top\r\n    scrollbarC0R1B0Handler: function(spo, sizeH, sizeV) {\r\n        spo.BLH.size = sizeH;\r\n        spo.BLV.size = sizeV;\r\n        if (this.hasVScroll) {\r\n            spo.TLV.size = sizeV;\r\n            spo.TLV.blank = 1;\r\n        }\r\n    },\r\n\r\n    //===============================================\r\n    //frozen column 1, frozen row 0\r\n    scrollbarC1R0Handler: function(spo, sizeH, sizeV) {\r\n        spo.TRH.size = sizeH;\r\n        spo.TRV.size = sizeV;\r\n        if (this.hasHScroll) {\r\n            if (this.hideScrollPane) {\r\n                spo.TLH.size = sizeH;\r\n                spo.TRH.size = sizeH;\r\n                spo.TRH.blank = true;\r\n            } else {\r\n                spo.TLH.size = sizeH;\r\n                spo.TLH.blank = true;\r\n            }\r\n        }\r\n    },\r\n\r\n    //===============================================\r\n    //frozen column 1, frozen row 1\r\n    scrollbarC1R1Handler: function(spo, sizeH, sizeV) {\r\n        if (this.option.frozenBottom) {\r\n            this.scrollbarC1R1B1Handler(spo, sizeH, sizeV);\r\n        } else {\r\n            this.scrollbarC1R1B0Handler(spo, sizeH, sizeV);\r\n        }\r\n    },\r\n\r\n    //frozen column 1, frozen row 1, bottom\r\n    scrollbarC1R1B1Handler: function(spo, sizeH, sizeV) {\r\n        spo.BRH.size = sizeH;\r\n        spo.TRV.size = sizeV;\r\n        if (this.hasVScroll) {\r\n            spo.BRV.size = sizeV;\r\n            spo.BRV.blank = 1;\r\n        }\r\n        if (this.hasHScroll) {\r\n            if (this.hideScrollPane) {\r\n                spo.BLH.size = sizeH;\r\n                spo.BRH.blank = true;\r\n            }\r\n        }\r\n    },\r\n\r\n    //frozen column 1, frozen row 1, top\r\n    scrollbarC1R1B0Handler: function(spo, sizeH, sizeV) {\r\n        spo.BRH.size = sizeH;\r\n        spo.BRV.size = sizeV;\r\n        if (this.hasVScroll) {\r\n            spo.TRV.size = sizeV;\r\n            spo.TRV.blank = 1;\r\n        }\r\n        if (this.hasHScroll) {\r\n            if (this.hideScrollPane) {\r\n                spo.BLH.size = sizeH;\r\n                spo.BRH.blank = true;\r\n            } else {\r\n                spo.BLH.size = sizeH;\r\n                spo.BLH.blank = true;\r\n            }\r\n        }\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = ViewScrollpane;","var Util = require(\"../../core/util.js\");\r\nvar ViewVisibleRange = {\r\n\r\n    getVisibleRange: function() {\r\n\r\n        //update scroll position\r\n        this.scrollLeft = this.getScrollLeft();\r\n        this.scrollTop = this.getScrollTop();\r\n\r\n        var rowList = this.getVisibleRowList();\r\n        var columnList = this.getVisibleColumnList();\r\n\r\n        var rowInfo = {};\r\n        rowList.forEach(function(index) {\r\n            rowInfo[index] = true;\r\n        });\r\n\r\n        var columnInfo = {};\r\n        columnList.forEach(function(index) {\r\n            columnInfo[index] = true;\r\n        });\r\n\r\n        var range = {\r\n            rowList: rowList,\r\n            rowInfo: rowInfo,\r\n            columnList: columnList,\r\n            columnInfo: columnInfo\r\n        };\r\n\r\n        //console.log(range);\r\n\r\n        return range;\r\n    },\r\n\r\n    getVisibleRowList: function() {\r\n\r\n        var list = [];\r\n\r\n        //distance for scroll render cache\r\n        var distance = 20;\r\n        var rowsLength = this.getRowsLength();\r\n\r\n        var rowHeight = this.option.rowHeight;\r\n\r\n        // > 0 and < max row length\r\n        var rowCacheLength = this.option.rowCacheLength;\r\n        rowCacheLength = Util.clamp(Util.tonum(rowCacheLength, true), 0, rowsLength);\r\n\r\n        //console.log(rowCacheLength);\r\n\r\n        var from = Math.floor((this.scrollTop - distance) / rowHeight);\r\n        from = Math.max(from - rowCacheLength, 0);\r\n\r\n        var till = Math.ceil((this.scrollTop + this.bodyerHeight + distance) / rowHeight);\r\n        till = Math.min(till + rowCacheLength, rowsLength);\r\n\r\n        if (this.hasFrozenRows) {\r\n            var frozenRows = this.option.frozenRows;\r\n            var index = 0;\r\n            while (index < frozenRows) {\r\n                list.push(index);\r\n                index++;\r\n            }\r\n            from += frozenRows;\r\n        }\r\n\r\n        if (from < till) {\r\n            for (var i = from; i < till; i++) {\r\n                list.push(i);\r\n            }\r\n        }\r\n\r\n        //console.log(\"visible row list:\", list);\r\n\r\n        return list;\r\n    },\r\n\r\n    getVisibleColumnList: function() {\r\n\r\n        var list = [];\r\n\r\n        //distance for scroll render cache\r\n        var distance = 20;\r\n\r\n        //normal case, no frozen list\r\n        var from = this.scrollLeft - distance;\r\n        from = Math.max(from, 0);\r\n\r\n        var till = this.scrollLeft + this.bodyerWidth + distance;\r\n        till = Math.min(till, this.columnsWidth);\r\n\r\n        var index = 0;\r\n        if (this.hasFrozenColumns) {\r\n            var frozenColumns = this.option.frozenColumns;\r\n            while (index < frozenColumns) {\r\n                list.push(index);\r\n                index++;\r\n            }\r\n            from += this.columnsWidthL;\r\n        }\r\n\r\n        //console.log(\"from: \" + from, \"till: \" + till);\r\n        if (from < till) {\r\n            this.getColumnListFromRange(list, index, from, till);\r\n        }\r\n\r\n        //console.log(list);\r\n\r\n        return list;\r\n    },\r\n\r\n    getColumnListFromRange: function(list, index, from, till) {\r\n\r\n        var columns = this.columns;\r\n        for (var i = index, l = columns.length; i < l; i++) {\r\n            var column = columns[i];\r\n            if (this.isColumnInRange(column, from, till)) {\r\n                list.push(i);\r\n            }\r\n        }\r\n    },\r\n\r\n    isColumnInRange: function(column, from, till) {\r\n\r\n        //remove hidden column\r\n        if (column.tg_hidden) {\r\n            return false;\r\n        }\r\n\r\n        var left = column.tg_left;\r\n        var right = left + column.width;\r\n\r\n        //out of range\r\n        if (left > till) {\r\n            return false;\r\n        }\r\n        if (right < from) {\r\n            return false;\r\n        }\r\n\r\n        //in range\r\n        return true;\r\n\r\n    }\r\n\r\n\r\n};\r\n\r\nmodule.exports = ViewVisibleRange;","var editor = {\r\n    text: require(\"./editor/text.js\"),\r\n    list: require(\"./editor/list.js\")\r\n};\r\n\r\nmodule.exports = editor;","var formatter = {\r\n\r\n    //header formatter\r\n    header: function(value, rowData, columnData, rowIndex, columnIndex, cellNode) {\r\n        return value;\r\n    },\r\n\r\n    //====================================================================================\r\n    //cell title formatter\r\n    title: function(value, rowData, columnData, rowIndex, columnIndex, cellNode) {\r\n        return value;\r\n    },\r\n\r\n    //====================================================================================\r\n    //cell formatter by dataType\r\n\r\n    string: function(value, rowData, columnData, rowIndex, columnIndex, cellNode) {\r\n        var valueFormat = this.getValueFormat(value, rowData, columnData);\r\n        var formatedValue = valueFormat.apply(this, arguments);\r\n        return formatedValue;\r\n    },\r\n\r\n    number: function(value, rowData, columnData, rowIndex, columnIndex, cellNode) {\r\n        var valueFormat = this.getValueFormat(value, rowData, columnData);\r\n        var formatedValue = valueFormat.apply(this, arguments);\r\n\r\n        //for Negative Number Align\r\n        if (formatedValue) {\r\n            var reg = /^\\(.*\\)$/g;\r\n            var isNegative = reg.test(formatedValue + \"\");\r\n            if (isNegative && cellNode) {\r\n                cellNode.className += \" tg-cell-negative\";\r\n            }\r\n        }\r\n\r\n        return formatedValue;\r\n    },\r\n\r\n    date: function(value, rowData, columnData, rowIndex, columnIndex, cellNode) {\r\n        var valueFormat = this.getValueFormat(value, rowData, columnData);\r\n        var formatedValue = valueFormat.apply(this, arguments);\r\n        return formatedValue;\r\n    },\r\n\r\n    icon: function(value, rowData, columnData, rowIndex, columnIndex, cellNode) {\r\n        var valueFormat = this.getValueFormat(value, rowData, columnData);\r\n        var formatedValue = valueFormat.apply(this, arguments);\r\n        return formatedValue;\r\n    },\r\n\r\n    //====================================================================================\r\n\r\n    checkbox: function(value, rowData, columnData, rowIndex, columnIndex, cellNode) {\r\n        if (!this.isRowSelectable(rowData)) {\r\n            return \"\";\r\n        }\r\n        var html = this.getCheckboxFormatterContent(rowData);\r\n        return html;\r\n    },\r\n\r\n    //====================================================================================\r\n\r\n    blank: function(value, rowData, columnData, rowIndex, columnIndex, cellNode) {\r\n        return \"\";\r\n    },\r\n\r\n    //====================================================================================\r\n    tree: function(value, rowData, columnData, rowIndex, columnIndex, cellNode) {\r\n        var valueFormat = this.getValueFormat(value, rowData, columnData);\r\n        var formatedValue = valueFormat.apply(this, arguments);\r\n        var html = this.getTreeFormatterContent(rowData, formatedValue);\r\n        return html;\r\n    },\r\n\r\n    //===================================================================================\r\n    // editor\r\n    text: function(value, rowData, columnData, rowIndex, columnIndex, cellNode) {\r\n\r\n        var valueFormat = this.getValueFormat(value, rowData, columnData);\r\n        var formatedValue = valueFormat.apply(this, arguments);\r\n\r\n        var editable = this.isCellEditable(rowIndex, columnIndex);\r\n\r\n        var domStr = \"\";\r\n        if (editable) {\r\n            domStr += \"<div class='tg-editor-cell-text'>\" + formatedValue + \"</div>\";\r\n        } else {\r\n            domStr += \"<div class='tg-editor-cell-normal'>\" + formatedValue + \"</div>\";\r\n        }\r\n        return domStr;\r\n    },\r\n\r\n    list: function(value, rowData, columnData, rowIndex, columnIndex, cellNode) {\r\n        var valueFormat = this.getValueFormat(value, rowData, columnData);\r\n        var formatedValue = valueFormat.apply(this, arguments);\r\n\r\n        var editable = this.isCellEditable(rowIndex, columnIndex);\r\n\r\n        if (editable) {\r\n            var str = '<div class=\"tg-editor-cell-list\">';\r\n            str += '<span class=\"select2-container select2-container--default select2-container--focus><span class=\"selection\">';\r\n            str += '<span class=\"select2-selection select2-selection--single\"><span class=\"select2-selection__rendered\" title=\"' + formatedValue + '\">' + formatedValue + '</span>';\r\n            str += '<span class=\"select2-selection__arrow\"><b role=\"presentation\"></b></span></span></span></span></div>';\r\n            return str;\r\n        } else {\r\n            return \"<div class='tg-editor-cell-normal'>\" + formatedValue + \"</div>\";\r\n        }\r\n    },\r\n\r\n    arrow: function(value, rowData, columnData, rowIndex, columnIndex, cellNode) {\r\n        return \"\";\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = formatter;","var option = {\r\n    //==========================================================\r\n    className: \"tg-mbg\",\r\n\r\n    //namespace for theme class name\r\n    theme: \"mds\",\r\n\r\n    rowHeight: 23,\r\n    rowCacheLength: 0,\r\n\r\n    autoHeight: false,\r\n\r\n    showHeader: true,\r\n\r\n    //==========================================================\r\n    // true/false, or a custom icon handler\r\n    showCollapseAllIcon: true,\r\n    collapseAll: false,\r\n\r\n    //==========================================================\r\n    // select\r\n\r\n    showCheckbox: false,\r\n    showCheckboxAll: false,\r\n\r\n    // true: select all, false: unselect all, or do nothing\r\n    selectedAll: null,\r\n\r\n    multiSelect: true,\r\n    //\"shift\" or none: always keeping existing selections\r\n    //\"ctrl,shift\" or \"ctrl\": hold ctrl/shift key for keeping existing selections\r\n    multiSelectKey: \"shift\",\r\n\r\n    //==========================================================\r\n    // true for default handler, or a handler function(rowData, listNumber, leafNumber)\r\n    showRowNumber: true,\r\n    // list or leaf (default is leaf)\r\n    rowNumberType: \"leaf\",\r\n\r\n    //==========================================================\r\n\r\n    rowDragDropMultiLevel: false,\r\n\r\n    //columnDragDropMultiLevel: false,\r\n\r\n    rowsInfo: {},\r\n\r\n    //==========================================================\r\n\r\n    // single field, or a list for multiple compare\r\n    sortField: \"\",\r\n    sortAsc: true,\r\n\r\n    //Configuration for Sort Blank Value Logic\r\n    //true: Rows with blank values should always be at the bottom of the grid\r\n    //false: Rows with blank values sort at the bottom for Descending Sort and at the Top for Ascending Sort\r\n    sortBlankValueBottom: true,\r\n\r\n    sortFast: false,\r\n    sortOnInit: false,\r\n    //customize own sort comparers, check sort-comparers.js for default comparers \r\n    sortComparers: null,\r\n    //if convert rows value by column's dataType\r\n    convertDataType: false,\r\n\r\n    //==========================================================\r\n    //Sets column default option\r\n    columnDefaults: {\r\n\r\n        //id is require\r\n        //id : \"\",\r\n\r\n        //title: \"\",\r\n\r\n        // dataType expect to be a string, for example: \"string\", \"number\", \"date\" etc.\r\n        // be used for sorting, value formatting\r\n        //dataType: \"\",\r\n\r\n        // formatter expect to be a function, but also can be a string like dataType\r\n        // priority is higher than dataType\r\n        // be used for cell formatting\r\n        //formatter: null,\r\n\r\n        //align: undefined,\r\n\r\n        //Customize class name\r\n        //headerItemClass: \"\",\r\n        //headerClass: \"\",\r\n        //headerNameClass: \"\",\r\n        //cellClass: \"\"\r\n\r\n        //able\r\n        //titleable: false,\r\n        //sortable: true,\r\n        //resizable: true,\r\n        //exportable: false,\r\n\r\n        minWidth: 73,\r\n        maxWidth: 300,\r\n        //width: Number,\r\n        //originalWidth: Number,\r\n\r\n        //name is require\r\n        name: \"\"\r\n    },\r\n\r\n    //Sets special formatter defaults\r\n    columnFormatterDefaults: {\r\n        tree: {\r\n            dataType: \"tree\",\r\n            formatter: \"tree\",\r\n            width: 300,\r\n            minWidth: 120,\r\n            maxWidth: 500\r\n        },\r\n        number: {\r\n            align: \"right\"\r\n        },\r\n        date: {\r\n            align: \"right\"\r\n        }\r\n    },\r\n\r\n    //Sets column default formatter by id\r\n    columnDefaultFormatter: {\r\n        name: \"tree\"\r\n    },\r\n\r\n    //==========================================================\r\n    //editor, click to edit\r\n    autoEditNextOnEnter: true,\r\n\r\n    //==========================================================\r\n    //frozen\r\n    frozenColumn: -1,\r\n    frozenRow: -1,\r\n    frozenBottom: false,\r\n    frozenRowTypeList: null,\r\n    frozenColumnMax: 10,\r\n    frozenRowMax: 10,\r\n\r\n    //==========================================================\r\n    //other\r\n\r\n    //correct data, set false for huge data with higher performance\r\n    correctable: true,\r\n\r\n    //for conditional formatting, for example: [\"background\", \"border\", \"color\"]\r\n    conditionalStyleList: null,\r\n\r\n    //==========================================================\r\n    //scroll\r\n\r\n    scrollbarSize: 15,\r\n    scrollbarSizeH: null,\r\n    scrollbarSizeV: null,\r\n\r\n    //scroll pane min width and will be auto hide if less than it\r\n    //two scrollbarSize\r\n    scrollPaneMinWidth: 30,\r\n\r\n    //==========================================================\r\n\r\n    //return true:visible or false:invisible\r\n    rowFilter: function(rowItem) {\r\n        return true;\r\n    },\r\n\r\n    //==========================================================\r\n    //for global value format\r\n    stringFormat: function(value) {\r\n        return value;\r\n    },\r\n\r\n    numberFormat: function(value) {\r\n        return value;\r\n    },\r\n\r\n    dateFormat: function(value) {\r\n        return value;\r\n    },\r\n\r\n    iconFormat: function(value) {\r\n        var v = '<span class=\"tg-symbols\">' + value + '</span>';\r\n        return v;\r\n    },\r\n\r\n    treeFormat: function(value) {\r\n        return value;\r\n    },\r\n\r\n    //==========================================================\r\n    nullMatch: function(value) {\r\n        if (value === null || typeof(value) === \"undefined\") {\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n\r\n    nullFormat: function(value) {\r\n        var v = \"—\";\r\n        return v;\r\n    }\r\n\r\n};\r\n\r\n\r\nmodule.exports = option;","var Util = require(\"../../core/util.js\");\r\n\r\n//=======================================================================\r\n\r\nvar emptyMatch = function(value) {\r\n    if (!value && value !== 0) {\r\n        return true;\r\n    }\r\n    return false;\r\n};\r\n\r\nvar emptyComparer = function(av, bv, o) {\r\n    var ae = emptyMatch(av);\r\n    var be = emptyMatch(bv);\r\n\r\n    if (ae && be) {\r\n        return 0;\r\n    }\r\n\r\n    if (ae) {\r\n        return 1;\r\n    }\r\n\r\n    if (be) {\r\n        return -1;\r\n    }\r\n\r\n};\r\n\r\n//=======================================================================\r\n\r\nvar nullMatch = function(value) {\r\n    if (value === null || typeof(value) === \"undefined\") {\r\n        return true;\r\n    }\r\n    return false;\r\n};\r\n\r\nvar blankComparer = function(av, bv, o) {\r\n    var an = nullMatch(av);\r\n    var bn = nullMatch(bv);\r\n\r\n    if (an && bn) {\r\n        return 0;\r\n    }\r\n\r\n    if (an) {\r\n        return 1;\r\n    }\r\n\r\n    if (bn) {\r\n        return -1;\r\n    }\r\n\r\n    return emptyComparer(av, bv, o);\r\n\r\n};\r\n\r\n//=======================================================================\r\n/* eslint-disable max-statements,complexity */\r\nvar stringComparer = function(av, bv, o) {\r\n    var ai = typeof(av) === \"string\";\r\n    var bi = typeof(bv) === \"string\";\r\n    //both are string\r\n    if (ai && bi) {\r\n        // ignore case sort\r\n        var au = av.toUpperCase();\r\n        var bu = bv.toUpperCase();\r\n        if (au !== bu) {\r\n            return au > bu ? -1 : 1;\r\n        }\r\n    }\r\n    return av > bv ? -1 : 1;\r\n};\r\n/* eslint-enable*/\r\n\r\nvar diffTypeComparer = function(ai, bi, av, bv, o) {\r\n    if (ai) {\r\n        return -1;\r\n    }\r\n    if (bi) {\r\n        return 1;\r\n    }\r\n    return stringComparer(av, bv, o);\r\n};\r\n\r\nvar numberComparer = function(av, bv, o) {\r\n    var ai = typeof(av) === \"number\";\r\n    var bi = typeof(bv) === \"number\";\r\n    //both are number\r\n    if (ai && bi) {\r\n        return av > bv ? -1 : 1;\r\n    }\r\n    return diffTypeComparer(ai, bi, av, bv, o);\r\n};\r\n\r\nvar dateComparer = function(av, bv, o) {\r\n    var ad = new Date(av);\r\n    var bd = new Date(bv);\r\n    var ai = Util.isdate(ad);\r\n    var bi = Util.isdate(bd);\r\n    //both are date\r\n    if (ai && bi) {\r\n        var am = ad.getTime();\r\n        var bm = bd.getTime();\r\n        if (am === bm) {\r\n            return;\r\n        } else {\r\n            return am > bm ? -1 : 1;\r\n        }\r\n    }\r\n    return diffTypeComparer(ai, bi, av, bv, o);\r\n};\r\n\r\n//=======================================================================\r\n\r\n// tg_index is require be created every time\r\nvar indexComparer = function(a, b, o) {\r\n    //There is no tg_index in first time, set tg_sort_index every time\r\n    var ci = a.tg_sort_index > b.tg_sort_index ? 1 : -1;\r\n    return ci;\r\n};\r\n\r\n// multiple comparers handler if value equal\r\nvar equalComparer = function(a, b, o, comparers) {\r\n\r\n    if (comparers.length) {\r\n        //next sort\r\n        var sortNextIndex = o.sortNextIndex || 0;\r\n        var sortItem = comparers[sortNextIndex];\r\n        if (sortItem) {\r\n            //for next index\r\n            o.sortNextIndex = sortNextIndex + 1;\r\n            //for new sortField\r\n            o.sortField = sortItem.sortField;\r\n            //console.log(o.sortField);\r\n            return sortItem.comparer(a, b, o, comparers);\r\n        }\r\n    }\r\n\r\n    return indexComparer(a, b, o);\r\n};\r\n\r\n//=======================================================================\r\n\r\nvar defaultSortComparers = {\r\n\r\n    string: function(a, b, o, comparers) {\r\n        var av = a[o.sortField];\r\n        var bv = b[o.sortField];\r\n\r\n        var cb = blankComparer(av, bv, o);\r\n        if (cb) {\r\n            return o.sortBlankFactor * cb;\r\n        }\r\n\r\n        if (cb !== 0 && av !== bv) {\r\n            var cs = stringComparer(av, bv, o);\r\n            if (typeof(cs) === \"number\") {\r\n                return o.sortFactor * cs;\r\n            }\r\n        }\r\n\r\n        return equalComparer(a, b, o, comparers);\r\n    },\r\n\r\n    number: function(a, b, o, comparers) {\r\n        var av = a[o.sortField];\r\n        var bv = b[o.sortField];\r\n\r\n        var cb = blankComparer(av, bv, o);\r\n        if (cb) {\r\n            return o.sortBlankFactor * cb;\r\n        }\r\n\r\n        if (cb !== 0 && av !== bv) {\r\n            var cn = numberComparer(av, bv, o);\r\n            if (typeof(cn) === \"number\") {\r\n                return o.sortFactor * cn;\r\n            }\r\n        }\r\n\r\n        return equalComparer(a, b, o, comparers);\r\n    },\r\n\r\n    date: function(a, b, o, comparers) {\r\n        var av = a[o.sortField];\r\n        var bv = b[o.sortField];\r\n\r\n        var cb = blankComparer(av, bv, o);\r\n        if (cb) {\r\n            return o.sortBlankFactor * cb;\r\n        }\r\n\r\n        if (cb !== 0 && av !== bv) {\r\n            var cd = dateComparer(av, bv, o);\r\n            if (typeof(cd) === \"number\") {\r\n                return o.sortFactor * cd;\r\n            }\r\n        }\r\n\r\n        return equalComparer(a, b, o, comparers);\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = defaultSortComparers;","//var Util = require('../../core/util.js');\r\n\r\nvar EventBase = require(\"../../../core/event-base.js\");\r\n\r\nvar EditorBase = EventBase.extend({\r\n\r\n    type: \"\",\r\n\r\n    completed: false,\r\n\r\n    constructor: function(option) {\r\n        this.holder = option.holder;\r\n        this.rowItem = option.rowItem;\r\n        this.columnItem = option.columnItem;\r\n        this.initData();\r\n    },\r\n\r\n    initData: function() {\r\n        //init\r\n        this.id = this.columnItem.id;\r\n        this.dataType = this.columnItem.dataType;\r\n        //original value\r\n        this.value = this.rowItem[this.id] || \"\";\r\n    },\r\n\r\n    updateData: function(rowItem, columnItem) {\r\n        this.rowItem = rowItem;\r\n        this.columnItem = columnItem;\r\n        this.initData();\r\n        this.updateValue();\r\n    },\r\n\r\n    render: function() {\r\n\r\n    },\r\n\r\n    focus: function() {\r\n\r\n    },\r\n\r\n    updateValue: function() {\r\n\r\n    },\r\n\r\n    getValue: function() {\r\n        return this.value;\r\n    },\r\n\r\n    applyValue: function() {\r\n        var newValue = this.getValue();\r\n        this.rowItem[this.columnItem.id] = newValue;\r\n    },\r\n\r\n    isValueChanged: function() {\r\n        var newValue = this.getValue();\r\n        if (newValue === this.value) {\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n\r\n    validate: function(value) {\r\n        return {\r\n            valid: true,\r\n            msg: \"\"\r\n        };\r\n    },\r\n\r\n    commit: function(e) {\r\n        if (this.completed) {\r\n            return this;\r\n        }\r\n        this.completed = true;\r\n        this.trigger(\"onCommit\", e);\r\n    },\r\n\r\n    destroy: function() {\r\n        if (this.container) {\r\n            this.container.remove();\r\n            this.container = null;\r\n        }\r\n    },\r\n\r\n    toString: function() {\r\n        return this.type;\r\n    }\r\n\r\n});\r\n\r\nmodule.exports = EditorBase;","var $ = require(\"../../../core/query.js\");\r\nvar EditorBase = require(\"./editor-base.js\");\r\n\r\nvar ListEditor = EditorBase.extend({\r\n\r\n    type: \"list\",\r\n\r\n    render: function() {\r\n\r\n        this.container = $(\"<div class='tg-editor-list-container'></div>\").appendTo(this.holder);\r\n\r\n        var listOptions = this.columnItem.editorData || [{\r\n            id: \"true\",\r\n            name: \"True\"\r\n        }, {\r\n            id: \"false\",\r\n            name: \"False\"\r\n        }];\r\n\r\n        var html = \"<select tabIndex='0' class='tg-editor-list'><option value=''>–</option>\";\r\n        listOptions.forEach(function(item) {\r\n            html += \"<option value='\" + item.id + \"'>\" + item.name + \"</option>\";\r\n        });\r\n        html += \"</select>\";\r\n\r\n        //jquery select\r\n        this.$select = $(html).appendTo(this.container);\r\n        this.$select.val(this.value);\r\n\r\n        //select2\r\n        if (this.$select.select2) {\r\n            this.supportSelect2 = true;\r\n            this.renderSelect2();\r\n        } else {\r\n            //normal select\r\n            var self = this;\r\n            this.$select.on(\"change\", function(e) {\r\n                self.commit(e);\r\n            });\r\n            this.focus();\r\n        }\r\n\r\n        this.trigger(\"onRendered\");\r\n\r\n    },\r\n\r\n    renderSelect2: function() {\r\n\r\n        this.$select.select2({\r\n            selectOnClose: true,\r\n            width: \"100%\"\r\n        });\r\n\r\n        var self = this;\r\n        this.$select.on(\"select2:open\", function(e) {\r\n            //console.log(e);\r\n        }).on(\"select2:close\", function(e) {\r\n            //console.log(e);\r\n            self.commit(e);\r\n        }).on(\"select2:select\", function(e) {\r\n            //console.log(e);\r\n        }).on(\"select2:unselect\", function(e) {\r\n            //console.log(e);\r\n        });\r\n\r\n        this.$select.select2(\"open\");\r\n\r\n    },\r\n\r\n    focus: function() {\r\n        //console.log(\"select2 focus\");\r\n        this.$select.focus();\r\n    },\r\n\r\n    updateValue: function() {\r\n        this.$select.val(this.value);\r\n    },\r\n\r\n    getValue: function() {\r\n        return this.$select.val();\r\n    },\r\n\r\n    validate: function(value) {\r\n        if (value === \"\" || value === null) {\r\n            return {\r\n                valid: false,\r\n                msg: \"Please choose one\"\r\n            };\r\n        }\r\n        return {\r\n            valid: true,\r\n            msg: \"\"\r\n        };\r\n    },\r\n\r\n    destroy: function() {\r\n        if (this.supportSelect2) {\r\n            this.$select.select2(\"destroy\");\r\n        }\r\n        this.$select.remove();\r\n        EditorBase.prototype.destroy.apply(this, arguments);\r\n    }\r\n\r\n});\r\n\r\nmodule.exports = ListEditor;","var $ = require(\"../../../core/query.js\");\r\nvar EditorBase = require(\"./editor-base.js\");\r\n\r\nvar TextEditor = EditorBase.extend({\r\n\r\n    type: \"text\",\r\n\r\n    render: function() {\r\n\r\n        this.container = $(\"<div class='tg-editor-text-container'></div>\").appendTo(this.holder);\r\n\r\n        this.$input = $(\"<input type='text' class='tg-editor-text' />\").appendTo(this.container);\r\n\r\n        if (this.columnItem.align) {\r\n            this.$input.addClass(\"tg-align-\" + this.columnItem.align);\r\n        }\r\n\r\n        var self = this;\r\n        this.$input.bind(\"keydown\", function(e) {\r\n            if (e.keyCode === 37 || e.keyCode === 39) {\r\n                e.stopImmediatePropagation();\r\n            }\r\n        }).bind(\"keyup\", function(e) {\r\n            self.trigger(\"onChanging\", e);\r\n        }).bind(\"blur\", function(e) {\r\n            self.commit(e);\r\n        });\r\n\r\n        this.focus();\r\n        this.updateValue();\r\n        this.$input.select();\r\n\r\n        this.trigger(\"onRendered\");\r\n\r\n    },\r\n\r\n    focus: function() {\r\n        this.$input.focus();\r\n    },\r\n\r\n    updateValue: function() {\r\n        this.$input.val(this.value);\r\n    },\r\n\r\n    getValue: function() {\r\n        var value = this.$input.val();\r\n        if (this.dataType === \"number\") {\r\n            if (value) {\r\n                value = Number(value);\r\n            }\r\n        }\r\n        return value;\r\n    },\r\n\r\n    validate: function(value) {\r\n        if (this.dataType === \"number\") {\r\n\r\n            if (typeof(value) !== \"number\" || isNaN(value)) {\r\n                return {\r\n                    valid: false,\r\n                    msg: \"Please enter a valid number\"\r\n                };\r\n            }\r\n\r\n        }\r\n        return {\r\n            valid: true,\r\n            msg: \"\"\r\n        };\r\n    },\r\n\r\n    destroy: function() {\r\n        this.$input.remove();\r\n        EditorBase.prototype.destroy.apply(this, arguments);\r\n    },\r\n\r\n    toString: function() {\r\n        return \"text\";\r\n    }\r\n\r\n});\r\n\r\nmodule.exports = TextEditor;","var E = require(\"../core/event-type.js\");\r\nvar Util = require(\"../core/util.js\");\r\nvar Cache = require(\"../core/cache.js\");\r\n\r\nvar GridView = require(\"../grid-view/grid-view.js\");\r\n\r\n//=============================================================================\r\n// config\r\nvar defaultOption = require(\"./config/default-option.js\");\r\nvar defaultEditor = require(\"./config/default-editor.js\");\r\nvar defaultFormatter = require(\"./config/default-formatter.js\");\r\n\r\n//=============================================================================\r\n// service\r\nvar ServiceExport = require(\"./service/service-export.js\");\r\n\r\n//=============================================================================\r\n//model extend\r\nvar ModelBase = require(\"./model/model-base.js\");\r\n\r\n//=============================================================================\r\n\r\nvar Grid = ModelBase.extend({\r\n\r\n    constructor: function(container) {\r\n        this.create(container);\r\n    },\r\n\r\n    create: function(container) {\r\n        if (!container) {\r\n            return this;\r\n        }\r\n\r\n        //cache server\r\n        this.cache = new Cache({\r\n            //maxSize: 1000,\r\n            //default expires time 1 hour\r\n            expiresTime: 1 * 60 * 60 * 1000\r\n        });\r\n\r\n        //init\r\n        this.gridAllColumnsData = [];\r\n        this.gridColumnsData = [];\r\n        this.gridRowsData = [];\r\n\r\n        var self = this;\r\n\r\n        //bind default events\r\n        //defaultEvent for isDefaultPrevented\r\n        var defaultEvent = {\r\n            defaultEvent: true\r\n        };\r\n        this.bind(E.onTreeIconClick, function(e, d) {\r\n            self.toggleItem(d.row);\r\n        }, defaultEvent).bind(E.onTreeIconAllClick, function(e, d) {\r\n            self.toggleAll();\r\n        }, defaultEvent);\r\n\r\n        this.bind(E.onSort, function(e, d) {\r\n            self.setSortColumn(d.columnItem);\r\n        }, defaultEvent).bind(E.onHeaderRendered, function(e, d) {\r\n            self.initCollapseAllHandler(e, d);\r\n            self.initCheckboxAllHandler(e, d);\r\n        }, defaultEvent).bind(E.onCheckboxClick, function(e, d) {\r\n            self.setSelectedRow(d.row, d.e);\r\n        }, defaultEvent).bind(E.onCheckboxAllClick, function(e, d) {\r\n            self.checkboxAllClickHandler(e, d);\r\n        }, defaultEvent);\r\n\r\n        this.bind(E.onHeadersMouseMove, function(e, d) {\r\n            self.columnResizingHandler(e, d);\r\n        }, defaultEvent).bind(E.onHeadersMouseLeave, function(e, d) {\r\n            self.columnResizingHandler(e, d);\r\n        }, defaultEvent).bind(E.onHeadersTouchStart, function(e, d) {\r\n            self.columnTouchResizingHandler(e, d);\r\n        }, defaultEvent);\r\n\r\n        this.bind(E.onColumnWidthDragStart, function(e, d) {\r\n            self.columnWidthDragStartHandler(e, d);\r\n        }, defaultEvent).bind(E.onColumnWidthDragUpdate, function(e, d) {\r\n            self.columnWidthDragUpdateHandler(e, d);\r\n        }, defaultEvent).bind(E.onColumnWidthDragComplete, function(e, d) {\r\n            self.columnWidthDragCompleteHandler(e, d);\r\n        }, defaultEvent);\r\n\r\n        this.bind(E.onRowDragStart, function(e, d) {\r\n            self.rowDragStartHandler(e, d);\r\n        }, defaultEvent).bind(E.onRowDragUpdate, function(e, d) {\r\n            self.rowDragUpdateHandler(e, d);\r\n        }, defaultEvent).bind(E.onRowDragComplete, function(e, d) {\r\n            self.rowDragCompleteHandler(e, d);\r\n        }, defaultEvent);\r\n\r\n        //create grid view\r\n        this.gridView = new Grid.GridView(container);\r\n        //proxy all events from grid view\r\n        var events = this.getAllEvents();\r\n        events.forEach(function(type) {\r\n            self.gridView.bind(type, function(e, d) {\r\n                self.trigger(type, d);\r\n                //console.log(type, d);\r\n            });\r\n        });\r\n\r\n        //default config\r\n        this.setEditor();\r\n        this.setFormatter();\r\n        this.setOption();\r\n        this.setData();\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    getAllEvents: function() {\r\n        var events = Object.keys(E);\r\n        return events;\r\n    },\r\n\r\n    getGridView: function() {\r\n        return this.gridView;\r\n    },\r\n\r\n    getGridViewValue: function(name) {\r\n        return this.gridView[name];\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    //tree format rows data\r\n    getRowsData: function(reload) {\r\n        if (reload) {\r\n            this.rows = null;\r\n        }\r\n        if (this.rows) {\r\n            return this.rows;\r\n        }\r\n        this.rows = Util.getValue(this.data, \"rows\", []);\r\n\r\n        //dynamic length rows\r\n        if (Util.isnum(this.data.rowsLength)) {\r\n            this.rows.length = this.data.rowsLength;\r\n            this.initDynamicRowsData(this.rows);\r\n        }\r\n\r\n        this.correctTreeData(this.rows);\r\n        this.initRowsData();\r\n        return this.rows;\r\n    },\r\n\r\n    //grid list format rows data;\r\n    getGridRowsData: function() {\r\n        return this.gridRowsData;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    //tree format columns data\r\n    getColumnsData: function(reload) {\r\n        if (reload) {\r\n            this.columns = null;\r\n        }\r\n        if (this.columns) {\r\n            return this.columns;\r\n        }\r\n        var columns = Util.getValue(this.data, \"columns\", []);\r\n        this.correctTreeData(columns);\r\n        this.columns = this.createColumns(columns);\r\n        this.initColumnsData();\r\n        return this.columns;\r\n    },\r\n\r\n    createColumns: function(columns) {\r\n\r\n        //use new array reference, reduce external operation\r\n        //sometimes grid1, grid2 use same columns and render at same time\r\n        var columnList = [];\r\n\r\n        //private columns and remove from user columns\r\n        var checkbox = this.gridPrivateColumns.checkbox;\r\n        var blank = this.gridPrivateColumns.blank;\r\n        Util.delListItem(columns, {\r\n            id: checkbox.id\r\n        });\r\n        Util.delListItem(columns, {\r\n            id: blank.id\r\n        });\r\n\r\n        //first, add checkbox column if option showCheckbox\r\n        if (this.option.showCheckbox) {\r\n            columnList.push(checkbox);\r\n        }\r\n\r\n        columns.forEach(function(item) {\r\n            columnList.push(item);\r\n        });\r\n\r\n        //last, add blank column always\r\n        columnList.push(blank);\r\n\r\n        return columnList;\r\n    },\r\n\r\n    //grid list format columns data\r\n    getGridColumnsData: function() {\r\n        return this.gridColumnsData;\r\n    },\r\n\r\n    //========================================================================================\r\n    //update API\r\n\r\n    updateGridView: function() {\r\n        if (!this.gridView.initialized) {\r\n            return;\r\n        }\r\n\r\n        this.gridRowsDataHandler();\r\n        this.gridView.setRows(this.gridRowsData);\r\n\r\n        this.gridView.updateBodyerSize();\r\n\r\n        //invalid row handler\r\n        this.invalidRowHandler();\r\n\r\n        return this;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    initDynamicRowsData: function(treeList) {\r\n        var initTree = function(list, parent) {\r\n            if (!Util.islist(list)) {\r\n                return;\r\n            }\r\n            for (var i = 0, l = list.length; i < l; i++) {\r\n                var item = list[i];\r\n                //create dynamic data item\r\n                if (!item) {\r\n                    item = {};\r\n                    list[i] = item;\r\n                    continue;\r\n                }\r\n                initTree(item.subs, item);\r\n            }\r\n        };\r\n        initTree(treeList);\r\n\r\n        return this;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    initRowsData: function() {\r\n        var o = this.option;\r\n\r\n        //init frozen row\r\n        var frozenRow = o.frozenRow;\r\n        if (!Util.isnum(frozenRow)) {\r\n            frozenRow = -1;\r\n        }\r\n        var frozenRowMax = Math.min(o.frozenRowMax, this.rows.length - 1);\r\n        frozenRow = Util.clamp(Util.tonum(frozenRow, true), -1, frozenRowMax);\r\n        if (Util.islist(o.frozenRowTypeList)) {\r\n            this.sortRowsByRowTypeList(this.rows, o.frozenRowTypeList);\r\n            if (frozenRow === -1) {\r\n                frozenRow = this.getFrozenRowByRowTypeList(this.rows, o.frozenRowTypeList);\r\n            }\r\n        }\r\n        this.option.frozenRow = frozenRow;\r\n\r\n        this.option.rowsInfo = this.initTreeData(this.rows, this.option.frozenRow);\r\n    },\r\n\r\n    initColumnsData: function() {\r\n        var o = this.option;\r\n\r\n        //init forzen column\r\n        var frozenColumn = o.frozenColumn;\r\n        if (!Util.isnum(frozenColumn)) {\r\n            frozenColumn = -1;\r\n        }\r\n        var frozenColumnMax = Math.min(o.frozenColumnMax, this.columns.length - 1);\r\n        frozenColumn = Util.clamp(Util.tonum(frozenColumn, true), -1, frozenColumnMax);\r\n        this.option.frozenColumn = frozenColumn;\r\n\r\n        this.option.columnsInfo = this.initTreeData(this.columns, this.option.frozenColumn);\r\n    },\r\n\r\n    //=============================================================================\r\n    //option API\r\n\r\n    defaultOption: function() {\r\n        return defaultOption;\r\n    },\r\n\r\n    initOption: function() {\r\n        if (!this.data.option) {\r\n            return this;\r\n        }\r\n        // merge option from data.option\r\n        this.option = Util.merge(this.option, this.data.option);\r\n        return this;\r\n    },\r\n\r\n    setOption: function(option) {\r\n        this.option = Util.merge(this.defaultOption(), option);\r\n        this.resetAll = true;\r\n        return this;\r\n    },\r\n\r\n    getOption: function() {\r\n        return this.option;\r\n    },\r\n\r\n    //=============================================================================\r\n    //editor API\r\n\r\n    defaultEditor: function() {\r\n        return defaultEditor;\r\n    },\r\n\r\n    setEditor: function(editors) {\r\n        this.editors = Util.merge(this.defaultEditor(), editors);\r\n        this.resetAll = true;\r\n        return this;\r\n    },\r\n\r\n    getEditor: function(type) {\r\n        if (arguments.length) {\r\n            return this.editors[type];\r\n        }\r\n        return this.editors;\r\n    },\r\n\r\n    //=============================================================================\r\n    //formatter API\r\n\r\n    defaultFormatter: function() {\r\n        return defaultFormatter;\r\n    },\r\n\r\n    setFormatter: function(formatters) {\r\n        this.formatters = Util.merge(this.defaultFormatter(), formatters);\r\n        this.resetAll = true;\r\n        return this;\r\n    },\r\n\r\n    getFormatter: function(type) {\r\n        if (arguments.length) {\r\n            return this.formatters[type];\r\n        }\r\n        return this.formatters;\r\n    },\r\n\r\n    //for value, global setting\r\n    getValueFormat: function(value, rowData, columnData) {\r\n        var type = this.getColumnType(columnData);\r\n        var format = this.option[type + \"Format\"];\r\n        var nullMatch = this.option.nullMatch;\r\n        if (typeof(nullMatch) !== \"function\") {\r\n            nullMatch = function(v) {\r\n                return v === null;\r\n            };\r\n        }\r\n        if (nullMatch(value, rowData, columnData)) {\r\n            format = this.option.nullFormat;\r\n        }\r\n        format = format || this.option.stringFormat;\r\n        if (typeof(format) !== \"function\") {\r\n            format = function(v) {\r\n                return v;\r\n            };\r\n        }\r\n        return format;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    setData: function(data) {\r\n        this.data = data || {};\r\n        this.resetAll = true;\r\n        return this;\r\n    },\r\n\r\n    getData: function() {\r\n        return this.data;\r\n    },\r\n\r\n    //=============================================================================\r\n    //get column item\r\n    getColumnItem: function(context) {\r\n        if (Util.isnum(context)) {\r\n            return this.gridAllColumnsData[context];\r\n        }\r\n        if (!context) {\r\n            return null;\r\n        }\r\n        if (Util.isnum(context.tg_index)) {\r\n            return this.gridAllColumnsData[context.tg_index];\r\n        }\r\n        return this.getColumnItemById(context.id || context);\r\n    },\r\n\r\n    getColumnItemById: function(id) {\r\n        if (!id) {\r\n            return null;\r\n        }\r\n        return this.getColumnItemBy({\r\n            id: id\r\n        });\r\n    },\r\n\r\n    getColumnItemBy: function(condition) {\r\n        var columnItem = Util.getListItem(this.gridAllColumnsData, condition);\r\n        return columnItem;\r\n    },\r\n\r\n    //=============================================================================\r\n    //get row item\r\n\r\n    getRowItem: function(context) {\r\n        if (Util.isnum(context)) {\r\n            return this.gridRowsData[context];\r\n        }\r\n        if (!context) {\r\n            return null;\r\n        }\r\n        if (Util.isnum(context.tg_index)) {\r\n            return this.gridRowsData[context.tg_index];\r\n        }\r\n        return this.getRowItemById(context.id || context);\r\n    },\r\n\r\n    getRowItemById: function(id) {\r\n        if (!id) {\r\n            return null;\r\n        }\r\n        return this.getRowItemBy({\r\n            id: id\r\n        });\r\n    },\r\n\r\n    getRowItemBy: function(condition) {\r\n        var rowItem = Util.getListItem(this.gridRowsData, condition);\r\n        return rowItem;\r\n    },\r\n\r\n    //=============================================================================\r\n    //data snapshot for export excel\r\n    getExportData: function(customData) {\r\n        var data = customData || this.getData();\r\n        var exportData = ServiceExport.getExportData(data);\r\n        return exportData;\r\n    },\r\n\r\n    getItemSnapshot: function(item) {\r\n        var itemSnapshot = ServiceExport.getItemSnapshot(item);\r\n        return itemSnapshot;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    render: function(resetAll) {\r\n        Util.getRhythm(this, \"render\").debounce({\r\n            delay: 20,\r\n            callback: this.renderNow,\r\n            arguments: arguments\r\n        });\r\n        return this;\r\n    },\r\n\r\n    renderNow: function(resetAll) {\r\n\r\n        if (resetAll) {\r\n            this.resetAll = true;\r\n        }\r\n\r\n        //merge data.option\r\n        this.initOption();\r\n\r\n        if (this.resetAll) {\r\n            this.initGridView();\r\n        } else {\r\n            this.updateGridView();\r\n        }\r\n\r\n        this.gridView.renderNow();\r\n\r\n        //do not reset again\r\n        this.resetAll = false;\r\n\r\n        return this;\r\n    },\r\n\r\n    initGridView: function() {\r\n\r\n        this.clean();\r\n\r\n        this.gridColumnsDataHandler();\r\n\r\n        this.gridInitRowsDataHandler();\r\n        this.gridRowsDataHandler();\r\n\r\n        //init columns and rows data\r\n        this.gridView.setColumns(this.gridColumnsData, this.gridAllColumnsData);\r\n        this.gridView.setRows(this.gridRowsData);\r\n\r\n        //init option\r\n        this.gridView.init(this.option);\r\n\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    //reset all\r\n    reset: function() {\r\n        this.render(true);\r\n        return this;\r\n    },\r\n\r\n    //update all rows\r\n    update: function() {\r\n        this.gridView.invalidateAll();\r\n        this.render();\r\n        return this;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    resize: function() {\r\n        Util.getRhythm(this, \"resize\").throttle({\r\n            delay: 200,\r\n            callback: this.resizeNow,\r\n            arguments: arguments\r\n        });\r\n        return this;\r\n    },\r\n\r\n    resizeNow: function() {\r\n        //console.log(\"grid resize now \" + this.gridView.uid);\r\n        if (this.gridView) {\r\n            this.gridView.resize.apply(this.gridView, arguments);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    clean: function() {\r\n        Util.getRhythm(this).destroy();\r\n        Util.removePrevious(this);\r\n        this.removeSortStatus();\r\n\r\n        this.rows = null;\r\n        this.columns = null;\r\n\r\n        return this;\r\n    },\r\n\r\n    destroy: function() {\r\n\r\n        this.clean();\r\n        this.unbind();\r\n\r\n        if (this.cache) {\r\n            this.cache.destroy();\r\n            this.cache = null;\r\n        }\r\n\r\n        if (this.gridView) {\r\n            this.gridView.unbind();\r\n            this.gridView.destroy();\r\n            this.gridView = null;\r\n        }\r\n\r\n        //require for GC after destroy\r\n        this.gridPrivateColumns = null;\r\n        this.gridAllColumnsData = null;\r\n        this.gridColumnsData = null;\r\n        this.gridRowsData = null;\r\n        this.formatters = null;\r\n        this.editors = null;\r\n        this.option = null;\r\n        this.data = null;\r\n\r\n        return this;\r\n    },\r\n\r\n    //=============================================================================\r\n    toString: function() {\r\n        return \"[object Grid]\";\r\n    }\r\n\r\n}, {\r\n    GridView: GridView\r\n});\r\n\r\nmodule.exports = Grid;","var EventBase = require(\"../../core/event-base.js\");\r\n\r\n\r\nvar ModelColumnHeader = require(\"./model-column-header.js\");\r\nvar ModelColumnPrivate = require(\"./model-column-private.js\");\r\nvar ModelColumnResizing = require(\"./model-column-resizing.js\");\r\nvar ModelColumn = require(\"./model-column.js\");\r\n\r\n\r\nvar ModelCommon = require(\"./model-common.js\");\r\nvar ModelCopy = require(\"./model-copy.js\");\r\nvar ModelFormatter = require(\"./model-formatter.js\");\r\nvar ModelProxy = require(\"./model-proxy.js\");\r\n\r\n\r\nvar ModelRowCollapse = require(\"./model-row-collapse.js\");\r\nvar ModelRowDragDrop = require(\"./model-row-dragdrop.js\");\r\nvar ModelRowFocus = require(\"./model-row-focus.js\");\r\nvar ModelRowNumber = require(\"./model-row-number.js\");\r\nvar ModelRowSelect = require(\"./model-row-select.js\");\r\nvar ModelRow = require(\"./model-row.js\");\r\n\r\n\r\nvar ModelScroll = require(\"./model-scroll.js\");\r\nvar ModelSort = require(\"./model-sort.js\");\r\n\r\n\r\nvar ModelBase = EventBase.mixin(\r\n\r\n    ModelColumnHeader,\r\n    ModelColumnPrivate,\r\n    ModelColumnResizing,\r\n    ModelColumn,\r\n\r\n    ModelCommon,\r\n    ModelCopy,\r\n    ModelFormatter,\r\n    ModelProxy,\r\n\r\n    ModelRowCollapse,\r\n    ModelRowDragDrop,\r\n    ModelRowFocus,\r\n    ModelRowNumber,\r\n    ModelRowSelect,\r\n    ModelRow,\r\n\r\n    ModelScroll,\r\n    ModelSort\r\n);\r\n\r\nmodule.exports = ModelBase;","var ModelColumnHeader = {\r\n\r\n    //grid column header\r\n    initColumnHeaderHandler: function(columns, gridColumnsData, gridColumnGroupsData) {\r\n\r\n        //console.log(gridColumnsData);\r\n\r\n        //output:\r\n\r\n        //tg_tr_mark: sets to false, add group only one time for tableData\r\n        //tg_colspan: td col span\r\n        //width: sets group width\r\n\r\n        //tg_tr: push \"td\" to which \"tr\" in table\r\n        //tg_rowspan: td row span\r\n\r\n        //tg_deep: reverse level\r\n        //tg_top_offset: first level sets tg_top_offset for top offset\r\n\r\n        var maxLevel = this.option.columnsInfo.maxLevel;\r\n\r\n        //init column\r\n        gridColumnsData.forEach(function(column) {\r\n            //column colspan always 1, not require\r\n            //column.tg_colspan = 1;\r\n\r\n            column.tg_deep = maxLevel;\r\n            if (column.tg_parent) {\r\n                column.tg_parent.tg_deep = maxLevel - 1;\r\n            }\r\n\r\n        });\r\n\r\n        //init group, colspan and width, depends on subs\r\n        var groupLength = gridColumnGroupsData.length;\r\n        if (groupLength) {\r\n            //from last to first, for best performance\r\n            for (var i = groupLength - 1; i >= 0; i--) {\r\n                var group = gridColumnGroupsData[i];\r\n                group.tg_tr_mark = false;\r\n                group.tg_colspan = this.getColumnGroupColspan(group);\r\n                group.width = this.getColumnGroupSubsWidth(group);\r\n\r\n                if (group.tg_parent) {\r\n                    group.tg_parent.tg_deep = group.tg_deep - 1;\r\n                } else {\r\n                    //top level offset\r\n                    group.tg_top_offset = group.tg_deep;\r\n                    //console.log(group.tg_deep);\r\n                }\r\n            }\r\n        }\r\n\r\n        //column tr, rowspan, depends on maxLevel\r\n        this.initHeaderRowspanHandler(columns);\r\n\r\n    },\r\n\r\n    initHeaderRowspanHandler: function(columns) {\r\n\r\n        var maxLevel = this.option.columnsInfo.maxLevel;\r\n\r\n        this.initColumnRowspanHandler(columns, 0, maxLevel, 0);\r\n\r\n    },\r\n\r\n    initColumnRowspanHandler: function(columns, rowLevel, maxLevel, trOffset) {\r\n\r\n        var self = this;\r\n        //init column\r\n        columns.forEach(function(column) {\r\n\r\n            column.tg_tr = rowLevel + trOffset;\r\n            //is group, has child\r\n            if (column.tg_group) {\r\n\r\n                //top level offset\r\n                var offset = column.tg_top_offset;\r\n                if (offset) {\r\n                    column.tg_rowspan = offset + 1;\r\n                } else {\r\n                    //all subs have offset from parent\r\n                    offset = trOffset;\r\n                }\r\n\r\n                self.initColumnRowspanHandler(column.subs, rowLevel + 1, maxLevel, offset);\r\n            } else {\r\n                //last leaf\r\n                var rowspan = maxLevel + 1 - rowLevel - trOffset;\r\n                if (rowspan > 1) {\r\n                    column.tg_rowspan = rowspan;\r\n                }\r\n            }\r\n\r\n        });\r\n\r\n    },\r\n\r\n    getColumnGroupColspan: function(column) {\r\n        if (!column || !column.subs) {\r\n            return 0;\r\n        }\r\n        var colspan = 0;\r\n        column.subs.forEach(function(item) {\r\n            colspan += item.tg_colspan || 1;\r\n        });\r\n        return colspan;\r\n    },\r\n\r\n    getColumnGroupSubsWidth: function(column) {\r\n        if (!column || !column.subs) {\r\n            return 0;\r\n        }\r\n        var w = 0;\r\n        column.subs.forEach(function(item) {\r\n            w += item.width;\r\n        });\r\n        return w;\r\n    },\r\n\r\n    getHeaderNode: function(columnIndex) {\r\n        var columnItem = this.getColumnItem(columnIndex);\r\n        var node = this.gridView.getHeaderNode(columnItem);\r\n        return node;\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = ModelColumnHeader;","var ModelColumnPrivate = {\r\n\r\n    getPrivateColumns: function() {\r\n        var privateColumns = {\r\n\r\n            // for selection checkbox\r\n            checkbox: {\r\n                id: \"tg_checkbox_column\",\r\n                name: \"\",\r\n                formatter: \"checkbox\",\r\n                headerClass: \"tg-header-checkbox\",\r\n                headerNameClass: \"tg-header-name-checkbox\",\r\n                cellClass: \"tg-cell-checkbox\",\r\n                width: 30,\r\n                resizable: false,\r\n                sortable: false,\r\n                exportable: false\r\n            },\r\n\r\n            // for last blank fixing\r\n            blank: {\r\n                id: \"tg_blank_column\",\r\n                name: \"\",\r\n                formatter: \"blank\",\r\n                headerClass: \"tg-header-blank\",\r\n                headerNameClass: \"tg-header-name-blank\",\r\n                cellClass: \"tg-cell-blank\",\r\n                width: 0,\r\n                minWidth: 0,\r\n                maxWidth: 2000,\r\n                resizable: false,\r\n                sortable: false,\r\n                exportable: false\r\n            }\r\n\r\n        };\r\n\r\n        return privateColumns;\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = ModelColumnPrivate;","var E = require(\"../../core/event-type.js\");\r\n\r\nvar ModelColumnResizing = {\r\n\r\n    setResizingColumn: function(columnItem) {\r\n        //allow null, means remove resize column\r\n        if (this.previousResizingColumn === columnItem) {\r\n            return;\r\n        }\r\n        this.previousResizingColumn = columnItem;\r\n        this.gridView.setResizingColumn(columnItem);\r\n        return this;\r\n    },\r\n\r\n    getResizingColumnItem: function(x, d) {\r\n        var columnItem = d.columnItem;\r\n        var currentIndex = columnItem.tg_index;\r\n        var columnIndex = currentIndex;\r\n        //get best resize column\r\n        if (x < columnItem.width * 0.5) {\r\n            var visibleRange = this.getVisibleRange();\r\n            var columnList = visibleRange.columnList;\r\n            var index = columnList.indexOf(columnIndex);\r\n            index -= 1;\r\n            if (index >= 0) {\r\n                columnIndex = columnList[index];\r\n                columnItem = this.getColumnItem(columnIndex);\r\n            }\r\n        }\r\n        return columnItem;\r\n    },\r\n\r\n    columnResizingHandler: function(e, d) {\r\n        //console.log(e.type);\r\n        if (e.type === E.onHeadersMouseLeave) {\r\n            this.setResizingColumn(null);\r\n            return;\r\n        }\r\n        //if touch started\r\n        if (this.columnTouchStarted) {\r\n            return;\r\n        }\r\n        //get best column by mouse offset x\r\n        var columnItem = this.getResizingColumnItem(d.e.offsetX, d);\r\n        //console.log(columnIndex);\r\n        this.setResizingColumn(columnItem);\r\n    },\r\n\r\n    columnTouchResizingHandler: function(e, d) {\r\n        //console.log(e.type);\r\n        //for disable onHeadersMouseMove event after touchstart \r\n        this.columnTouchStarted = true;\r\n\r\n        //before setResizingColumn for hide item if resizable = false\r\n        this.gridView.setColumnLineHover(true);\r\n\r\n        //no need cache previousResizingColumn\r\n        this.gridView.setResizingColumn(d.columnItem);\r\n    },\r\n\r\n    columnWidthDragStartHandler: function(e, d) {\r\n        this.gridView.$headers.addClass(\"tg-ew-resize\");\r\n        var column = d.column;\r\n        d.index = column.tg_index;\r\n        var $node = this.getHeaderNode(column);\r\n        d.width = $node.width();\r\n    },\r\n\r\n    columnWidthDragUpdateHandler: function(e, d) {\r\n        var newWidth = d.width + d.mouseOffsetX;\r\n        var column = d.column;\r\n        this.gridView.setColumnWidth(column, newWidth);\r\n        this.gridView.updateColumnLine();\r\n    },\r\n\r\n    columnWidthDragCompleteHandler: function(e, d) {\r\n        if (!d.valid) {\r\n            return;\r\n        }\r\n        this.gridView.$headers.removeClass(\"tg-ew-resize\");\r\n        this.gridView.resize();\r\n        this.gridView.updateColumnLine();\r\n        this.gridView.setColumnLineActive(false);\r\n        this.trigger(E.onColumnWidthDropped, d);\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = ModelColumnResizing;","var Util = require(\"../../core/util.js\");\r\n\r\nvar ModelColumn = {\r\n\r\n    //grid columns data handler\r\n\r\n    gridColumnsDataHandler: function() {\r\n\r\n        this.gridPrivateColumns = this.getPrivateColumns();\r\n\r\n        //reset list\r\n        this.gridAllColumnsData.length = 0;\r\n        this.gridColumnsData.length = 0;\r\n\r\n        var gridColumnGroupsData = [];\r\n\r\n        var columns = this.getColumnsData();\r\n        var self = this;\r\n        var appendColumns = function(columns) {\r\n            if (!Util.islist(columns)) {\r\n                return;\r\n            }\r\n            var list_length = columns.length;\r\n            var list_index = 0;\r\n            columns.forEach(function(column) {\r\n\r\n                //for last, 0 is first\r\n                column.tg_list_length = list_length;\r\n                //update list index\r\n                column.tg_list_index = list_index;\r\n                list_index++;\r\n\r\n                self.gridColumnItemHandler(column);\r\n\r\n                if (column.tg_group) {\r\n                    //column group item\r\n                    gridColumnGroupsData.push(column);\r\n                    //next subs\r\n                    appendColumns(column.subs);\r\n                } else {\r\n                    //column item\r\n                    self.gridColumnsData.push(column);\r\n                }\r\n\r\n            });\r\n        };\r\n        appendColumns(columns);\r\n\r\n        //grid column list include all columns and groups\r\n        this.gridAllColumnsData = this.gridAllColumnsData.concat(this.gridColumnsData).concat(gridColumnGroupsData);\r\n\r\n        //update column and column group index\r\n        this.initListData(this.gridAllColumnsData);\r\n\r\n        //init column header data\r\n        this.initColumnHeaderHandler(columns, this.gridColumnsData, gridColumnGroupsData);\r\n\r\n        //console.log(this.gridColumnsData);\r\n\r\n        return this;\r\n    },\r\n\r\n    gridColumnItemHandler: function(column) {\r\n        //option handler\r\n        this.initColumnOption(column);\r\n        //editor handler\r\n        this.initColumnEditor(column);\r\n        //formatter handler\r\n        this.initColumnFormatter(column);\r\n        //width handler\r\n        this.initColumnWidth(column);\r\n    },\r\n\r\n    //=============================================================================\r\n    initColumnOption: function(column) {\r\n\r\n        //require id\r\n        if (!column.id) {\r\n            column.id = \"tg_\" + Util.token(5);\r\n        }\r\n\r\n        //init formatter and dataType\r\n        this.initColumnDefaultFormatter(column);\r\n\r\n        //init default option\r\n        this.initColumnDefaultOption(column);\r\n\r\n    },\r\n\r\n    initColumnDefaultFormatter: function(column) {\r\n        if (column.formatter) {\r\n            return;\r\n        }\r\n        //set tree formatter by id name\r\n        var defaultFormatter = this.option.columnDefaultFormatter[column.id];\r\n        if (defaultFormatter) {\r\n            column.formatter = defaultFormatter;\r\n        }\r\n        //Do NOT set formatter to dataType, Editor will set new formatter\r\n    },\r\n\r\n    initColumnDefaultOption: function(column) {\r\n        if (column.tg_group) {\r\n            return;\r\n        }\r\n        var columnDefaults = this.option.columnDefaults;\r\n        var columnFormatterDefaults = this.option.columnFormatterDefaults;\r\n        var columnFormatter = this.getColumnFormatter(column);\r\n        var formatterOption = columnFormatterDefaults[columnFormatter];\r\n        if (formatterOption) {\r\n            columnDefaults = Util.merge(columnDefaults, formatterOption);\r\n        }\r\n        //sets default column option\r\n        for (var k in columnDefaults) {\r\n            if (!column.hasOwnProperty(k)) {\r\n                column[k] = columnDefaults[k];\r\n            }\r\n        }\r\n    },\r\n\r\n    //=============================================================================\r\n    /* eslint-disable max-statements,complexity*/\r\n    //editor handler\r\n    initColumnEditor: function(column) {\r\n        if (column.tg_group) {\r\n            return;\r\n        }\r\n        var editor = column.editor;\r\n        if (editor && typeof(editor) === \"string\") {\r\n            var editorHandler = this.getEditor(editor);\r\n            if (editorHandler) {\r\n                column.tg_editor = editorHandler;\r\n                if (!column.formatter) {\r\n                    column.formatter = editor;\r\n                }\r\n            } else {\r\n                column.editor = null;\r\n                column.tg_editor = null;\r\n            }\r\n        }\r\n    },\r\n    /* eslint-enable*/\r\n    //=============================================================================\r\n    //formatter handler\r\n    initColumnFormatter: function(column) {\r\n\r\n        //header formatter\r\n        this.initColumnFormatterByType(column, \"headerFormatter\", \"header\");\r\n\r\n        //cell title formatter\r\n        this.initColumnFormatterByType(column, \"titleFormatter\", \"title\");\r\n\r\n        //cell formatter\r\n        var columnFormatter = this.getColumnFormatter(column);\r\n        this.initColumnFormatterByType(column, \"formatter\", columnFormatter);\r\n\r\n        return column;\r\n    },\r\n\r\n    initColumnFormatterByType: function(column, name, type) {\r\n\r\n        var formatter;\r\n        if (typeof(column[name]) === \"function\") {\r\n            formatter = column[name];\r\n        } else {\r\n            formatter = this.getFormatter(type);\r\n        }\r\n\r\n        //string is default formatter\r\n        if (!formatter) {\r\n            formatter = this.formatters.string;\r\n        }\r\n\r\n        column[\"tg_\" + name] = formatter.bind(this);\r\n        return this;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    initColumnWidth: function(column) {\r\n        if (column.tg_group) {\r\n            return;\r\n        }\r\n        //do NOT change blank column width\r\n        if (column.id === this.gridPrivateColumns.blank.id) {\r\n            column.width = 0;\r\n            return;\r\n        }\r\n\r\n        //fix min and max width\r\n        if (Util.isnum(column.width) && column.width >= 0) {\r\n            column.minWidth = Math.min(column.minWidth, column.width);\r\n            column.maxWidth = Math.max(column.maxWidth, column.width);\r\n            return;\r\n        }\r\n\r\n        //calculate width by text\r\n        this.initColumnWidthByName(column);\r\n\r\n    },\r\n\r\n    initColumnWidthByName: function(column) {\r\n        var name = column.name;\r\n        var len = name.length;\r\n        var charWidth = 15;\r\n        if (len > 50) {\r\n            charWidth = 8;\r\n        } else if (len > 25) {\r\n            charWidth = 10;\r\n        }\r\n        var width = Math.ceil((len * charWidth) / 3);\r\n        width = Util.clamp(width, column.minWidth, column.maxWidth);\r\n        column.width = width;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    setColumnWidth: function(columnIndex, width, keepRange, resize) {\r\n        var column = this.getColumnItem(columnIndex);\r\n        if (!column) {\r\n            return this;\r\n        }\r\n        if (!Util.isnum(width)) {\r\n            return this;\r\n        }\r\n\r\n        width = Math.max(0, width);\r\n        width = Math.round(width);\r\n\r\n        if (!keepRange) {\r\n            column.minWidth = Math.min(column.minWidth, width);\r\n            column.maxWidth = Math.max(column.maxWidth, width);\r\n        }\r\n\r\n        this.gridView.setColumnWidth(column, width);\r\n\r\n        if (resize) {\r\n            this.resize();\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    showColumn: function(columnIndex, newWidth, resize) {\r\n        var columnItem = this.getColumnItem(columnIndex);\r\n        if (!columnItem) {\r\n            return this;\r\n        }\r\n        var node = this.getHeaderNode(columnItem);\r\n        var nodeWidth = node.width();\r\n        var width = columnItem.originalWidth || columnItem.width || nodeWidth;\r\n        if (Util.isnum(newWidth)) {\r\n            width = newWidth;\r\n            columnItem.originalWidth = newWidth;\r\n        }\r\n        this.setColumnWidth(columnItem.tg_index, width, resize);\r\n        return this;\r\n    },\r\n\r\n    hideColumn: function(columnIndex, resize) {\r\n        var columnItem = this.getColumnItem(columnIndex);\r\n        if (!columnItem) {\r\n            return this;\r\n        }\r\n        var node = this.getHeaderNode(columnItem);\r\n        var nodeWidth = node.width();\r\n        if (!Util.isnum(columnItem.originalWidth)) {\r\n            columnItem.originalWidth = columnItem.width || nodeWidth;\r\n        }\r\n        this.setColumnWidth(columnItem.tg_index, 0, resize);\r\n        return this;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    showColumns: function(columnList, newWidth, resize) {\r\n        if (!Util.islist(columnList)) {\r\n            return this;\r\n        }\r\n        for (var i = 0, l = columnList.length; i < l; i++) {\r\n            this.showColumn(columnList[i], newWidth);\r\n        }\r\n        if (resize) {\r\n            this.resize();\r\n        }\r\n        return this;\r\n    },\r\n\r\n    hideColumns: function(columnList, resize) {\r\n        if (!Util.islist(columnList)) {\r\n            return this;\r\n        }\r\n        for (var i = 0, l = columnList.length; i < l; i++) {\r\n            this.hideColumn(columnList[i]);\r\n        }\r\n        if (resize) {\r\n            this.resize();\r\n        }\r\n        return this;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    getColumnType: function(column) {\r\n        if (!column) {\r\n            return \"\";\r\n        }\r\n        var type = column.dataType;\r\n        if (!type && typeof(column.formatter) === \"string\") {\r\n            type = column.formatter;\r\n        }\r\n        return type;\r\n    },\r\n\r\n    getColumnFormatter: function(column) {\r\n        if (!column) {\r\n            return \"\";\r\n        }\r\n        var formatter = column.formatter;\r\n        if (!formatter && column.dataType) {\r\n            formatter = column.dataType;\r\n        }\r\n        return formatter;\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = ModelColumn;","var Util = require(\"../../core/util.js\");\r\n\r\nvar ModelCommon = {\r\n\r\n    // correct tree item, remove tg_, init null item\r\n    correctTreeData: function(treeList) {\r\n        //set false for huge data with higher performance\r\n        if (!this.option.correctable) {\r\n            return this;\r\n        }\r\n\r\n        //do NOT correct if length great than 5w\r\n        if (treeList.length > 50000) {\r\n            return this;\r\n        }\r\n\r\n        var cleanItem = function(item) {\r\n            //remove all tg_ properties\r\n            for (var k in item) {\r\n                if (k.indexOf(\"tg_\") === 0) {\r\n                    delete item[k];\r\n                }\r\n            }\r\n        };\r\n\r\n        var initTree = function(list, parent) {\r\n\r\n            for (var i = 0, l = list.length; i < l; i++) {\r\n                var item = list[i];\r\n                //correct invalid data item\r\n                if (!item || typeof(item) !== \"object\") {\r\n                    item = {};\r\n                    list[i] = item;\r\n                    continue;\r\n                }\r\n\r\n                cleanItem(item);\r\n\r\n                //correct subs, require type is Array\r\n                if (!Util.isarr(item.subs)) {\r\n                    delete item.subs;\r\n                    continue;\r\n                }\r\n\r\n                initTree(item.subs, item);\r\n            }\r\n        };\r\n\r\n        initTree(treeList);\r\n\r\n        return this;\r\n    },\r\n\r\n    // init tree data, frozen, group, level, parent, subs_length\r\n    initTreeData: function(treeList, frozenIndex) {\r\n        var level = 0;\r\n        var index = 0;\r\n        /* eslint-disable max-statements,complexity*/\r\n        var initItem = function(item, parent) {\r\n            //frozen handler\r\n            item.tg_frozen = false;\r\n            if (frozenIndex > -1 && index <= frozenIndex) {\r\n                item.tg_frozen = true;\r\n            }\r\n\r\n            //allow length === 0;\r\n            item.tg_group = false;\r\n            item.tg_subs_length = 0;\r\n            if (item.subs) {\r\n                item.tg_group = true;\r\n                item.tg_subs_length = item.subs.length;\r\n            }\r\n\r\n            //root tg_parent = undefined and tg_level = 0\r\n            item.tg_parent = parent;\r\n            var tg_level = 0;\r\n            if (parent) {\r\n                tg_level = parent.tg_level + 1;\r\n                if (tg_level > level) {\r\n                    level = tg_level;\r\n                }\r\n            }\r\n            item.tg_level = tg_level;\r\n\r\n            //next frozen index\r\n            index += 1;\r\n        };\r\n        /* eslint-enable*/\r\n        var initTree = function(list, parent) {\r\n            //do NOT use forEach, because it doesn't support [].length = num\r\n            var i = 0;\r\n            var l = list.length;\r\n            while (i < l) {\r\n                var item = list[i];\r\n                initItem(item, parent);\r\n                if (item.subs) {\r\n                    initTree(item.subs, item);\r\n                }\r\n                i++;\r\n            }\r\n        };\r\n\r\n        initTree(treeList);\r\n\r\n        // if is tree\r\n        var isTree = false;\r\n        var i = 0;\r\n        var l = treeList.length;\r\n        while (i < l) {\r\n            var item = treeList[i];\r\n            if (item.tg_group || item.rowType === \"group\") {\r\n                isTree = true;\r\n                break;\r\n            }\r\n            i++;\r\n        }\r\n\r\n        var treeInfo = {\r\n            isTree: isTree,\r\n            //for render column header\r\n            maxLevel: level,\r\n            maxIndex: index\r\n        };\r\n\r\n        return treeInfo;\r\n    },\r\n\r\n    // init list related, index\r\n    initListData: function(list) {\r\n        var i = 0;\r\n        var l = list.length;\r\n        while (i < l) {\r\n            var item = list[i];\r\n            item.tg_index = i;\r\n            i++;\r\n        }\r\n        return this;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    forEachTree: function(tree, callback) {\r\n        if (typeof(callback) !== \"function\") {\r\n            return this;\r\n        }\r\n        var forEachAll = function(tree, parent) {\r\n            if (!Util.islist(tree)) {\r\n                return;\r\n            }\r\n            for (var i = 0, l = tree.length; i < l; i++) {\r\n                var item = tree[i];\r\n                var result = callback.call(this, item, i, parent);\r\n                if (result === false) {\r\n                    return false;\r\n                }\r\n                var subResult = forEachAll(item.subs, item);\r\n                if (subResult === false) {\r\n                    return false;\r\n                }\r\n            }\r\n        };\r\n        forEachAll(tree);\r\n        return this;\r\n    },\r\n\r\n    forEachRow: function(callback) {\r\n        var rows = this.getRowsData();\r\n        this.forEachTree(rows, callback);\r\n        return this;\r\n    },\r\n\r\n    forEachColumn: function(callback) {\r\n        var columns = this.getColumnsData();\r\n        this.forEachTree(columns, callback);\r\n        return this;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    isRowFrozen: function(rowData) {\r\n        if (!rowData) {\r\n            return false;\r\n        }\r\n        var frozen = rowData.tg_frozen ? true : false;\r\n        return frozen;\r\n    },\r\n\r\n    //=============================================================================\r\n    //1,group\r\n    isRowGroup: function(rowData) {\r\n        if (!rowData) {\r\n            return false;\r\n        }\r\n        if (rowData.tg_group || rowData.rowType === \"group\") {\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n\r\n    //2,empty group: no icon\r\n    isRowEmptyGroup: function(rowData) {\r\n        if (this.isRowGroup(rowData)) {\r\n            if (rowData.subs && rowData.tg_subs_length === 0) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n\r\n    //3,dynamic group, with icon\r\n    isRowDynamicGroup: function(rowData) {\r\n        if (this.isRowGroup(rowData)) {\r\n            if (!rowData.subs) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    isRowLeaf: function(rowData) {\r\n        if (!rowData) {\r\n            return false;\r\n        }\r\n        if (rowData.rowType === \"blank\") {\r\n            return false;\r\n        }\r\n        if (this.isRowFrozen(rowData) || this.isRowGroup(rowData)) {\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n\r\n    isRowSelectable: function(rowData) {\r\n        if (!rowData) {\r\n            return false;\r\n        }\r\n\r\n        if (rowData.hasOwnProperty(\"selectable\")) {\r\n            var selectable = rowData.selectable ? true : false;\r\n            return selectable;\r\n        }\r\n\r\n        return this.isRowLeaf(rowData);\r\n    },\r\n\r\n    isCellEditable: function(rowIndex, columnIndex) {\r\n        var rowItem = this.getRowItem(rowIndex);\r\n        if (!rowItem) {\r\n            return false;\r\n        }\r\n        var columnItem = this.getColumnItem(columnIndex);\r\n        if (!columnItem) {\r\n            return false;\r\n        }\r\n        return this.gridView.isCellEditable(rowItem.tg_index, columnItem.tg_index);\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    getActiveCell: function() {\r\n        var ac = {\r\n            row: this.gridView.activeRow,\r\n            column: this.gridView.activeColumn,\r\n            node: this.gridView.activeNode\r\n        };\r\n        return ac;\r\n    },\r\n\r\n    //=============================================================================\r\n    //edit api\r\n\r\n    updateRow: function(rowIndex, rowData) {\r\n        var rowItem = this.getRowItem(rowIndex);\r\n        if (!rowItem) {\r\n            return this;\r\n        }\r\n        if (rowData && typeof(rowData) === \"object\") {\r\n            Object.keys(rowData).forEach(function(k) {\r\n                rowItem[k] = rowData[k];\r\n            });\r\n        }\r\n        this.gridView.updateRow(rowItem.tg_index);\r\n        return this;\r\n    },\r\n\r\n    updateCell: function(rowIndex, columnIndex, value) {\r\n        var rowItem = this.getRowItem(rowIndex);\r\n        if (!rowItem) {\r\n            return this;\r\n        }\r\n        var columnItem = this.getColumnItem(columnIndex);\r\n        if (!columnItem) {\r\n            return this;\r\n        }\r\n        if (arguments.length > 2) {\r\n            rowItem[columnItem.id] = value;\r\n        }\r\n        this.gridView.updateCell(rowItem.tg_index, columnItem.tg_index);\r\n        return this;\r\n    }\r\n\r\n\r\n\r\n};\r\n\r\nmodule.exports = ModelCommon;","var ModelCopy = {\r\n\r\n    copyContent: function(content) {\r\n        var container = this.gridView.$container.get(0);\r\n        if (!container) {\r\n            return false;\r\n        }\r\n        var textarea = document.createElement(\"textarea\");\r\n        textarea.style.position = \"absolute\";\r\n        textarea.style.top = \"-1000px\";\r\n        textarea.value = content;\r\n        container.appendChild(textarea);\r\n\r\n        textarea.focus();\r\n        textarea.select();\r\n\r\n        var succeeded = false;\r\n        try {\r\n            succeeded = document.execCommand(\"copy\");\r\n        } catch (e) {}\r\n\r\n        container.removeChild(textarea);\r\n\r\n        return succeeded;\r\n    },\r\n\r\n    copyCellText: function(rowIndex, columnIndex) {\r\n        var cellNode = this.getCellNode(rowIndex, columnIndex);\r\n        if (!cellNode) {\r\n            return false;\r\n        }\r\n        return this.copyContent(cellNode.innerText);\r\n    },\r\n\r\n    copyCellHTML: function(rowIndex, columnIndex) {\r\n        var cellNode = this.getCellNode(rowIndex, columnIndex);\r\n        if (!cellNode) {\r\n            return false;\r\n        }\r\n        return this.copyContent(cellNode.innerHTML);\r\n    },\r\n\r\n    copyCellValue: function(rowIndex, columnIndex) {\r\n        var rowData = this.getRowItem(rowIndex);\r\n        var columnData = this.getColumnItem(columnIndex);\r\n        if (!rowData || !columnData) {\r\n            return false;\r\n        }\r\n        var value = this.gridView.getCellValue(rowData, columnData);\r\n        return this.copyContent(value);\r\n    },\r\n\r\n    copyRowJSON: function(rowIndex) {\r\n        var json = this.getRowJSON(rowIndex);\r\n        if (!json) {\r\n            return false;\r\n        }\r\n        var str = JSON.stringify(json);\r\n        return this.copyContent(str);\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = ModelCopy;","var Icon = require(\"../../core/icon.js\");\r\nvar Util = require(\"../../core/util.js\");\r\n\r\nvar ModelFormatter = {\r\n\r\n    //======================================================================================\r\n    //checkbox\r\n\r\n    getCheckboxFormatterContent: function(rowData) {\r\n\r\n        var height = this.option.rowHeight;\r\n        var selected = rowData.selected;\r\n\r\n        var key = this.cache.key([\"formatter\", \"checkbox\", height, selected]);\r\n        var html = this.cache.get(key);\r\n        if (html) {\r\n            return html;\r\n        }\r\n\r\n        var icon = Icon.getIconString(\"checkbox\", {\r\n            width: 20,\r\n            height: height\r\n        }, \"checkbox_20_\" + height);\r\n\r\n        var htmlList = [];\r\n        htmlList.push('<div class=\"tg-checkbox');\r\n        if (selected) {\r\n            htmlList.push(' tg-selected');\r\n        }\r\n        htmlList.push('\">');\r\n        htmlList.push(icon);\r\n        htmlList.push('</div>');\r\n\r\n        var content = htmlList.join(\"\");\r\n        this.cache.set(key, content);\r\n\r\n        return content;\r\n    },\r\n\r\n    //======================================================================================\r\n    //tree\r\n\r\n    getTreeFormatterContent: function(rowData, formatedValue) {\r\n\r\n        var template = this.getTreeFormatterItemTemplate(rowData);\r\n\r\n        var content = Util.replace(template, {\r\n            value: formatedValue,\r\n            rowNumber: rowData.tg_row_number\r\n        });\r\n\r\n        return content;\r\n    },\r\n\r\n    getTreeFormatterItemTemplate: function(rowData) {\r\n        var o = this.option;\r\n        var showRowNumber = o.showRowNumber;\r\n        var indentWidth = this.getCurrentIndentWidth();\r\n        //console.log(\"getTreeFormatterItemTemplate\", indentWidth);\r\n        var isTree = o.rowsInfo.isTree;\r\n        var isGroup = this.isRowGroup(rowData);\r\n        var isEmptyGroup = this.isRowEmptyGroup(rowData);\r\n        var isDynamicGroup = this.isRowDynamicGroup(rowData);\r\n        if (isDynamicGroup) {\r\n            //only for dynamic group\r\n            rowData.collapsed = true;\r\n        }\r\n        var isCollapsed = rowData.collapsed;\r\n        var rowLevel = Util.tonum(rowData.tg_level);\r\n\r\n        var key = this.cache.key([\r\n            \"formatter\",\r\n            \"tree\",\r\n            showRowNumber,\r\n            indentWidth,\r\n            isTree,\r\n            isGroup,\r\n            isEmptyGroup,\r\n            isCollapsed,\r\n            rowLevel\r\n        ]);\r\n        var html = this.cache.get(key);\r\n        if (html) {\r\n            return html;\r\n        }\r\n\r\n        var template = this.generateTreeFormatterItemTemplate(\r\n            showRowNumber,\r\n            indentWidth,\r\n            isTree,\r\n            isGroup,\r\n            isEmptyGroup,\r\n            isCollapsed,\r\n            rowLevel\r\n        );\r\n\r\n        this.cache.set(key, template);\r\n\r\n        return template;\r\n    },\r\n\r\n    generateTreeFormatterItemTemplate: function(\r\n        showRowNumber,\r\n        indentWidth,\r\n        isTree,\r\n        isGroup,\r\n        isEmptyGroup,\r\n        isCollapsed,\r\n        rowLevel\r\n    ) {\r\n        // icon and level width\r\n        var leftWidth = 15;\r\n        // 5 space and 4px arrow center width\r\n        var spaceWidth = 5;\r\n        var arrowWidth = 4;\r\n\r\n        var htmlList = [];\r\n        var paddingLeft = indentWidth - leftWidth;\r\n        //console.log(\"paddingLeft\", paddingLeft);\r\n\r\n        // add tree item first\r\n        var itemHandler = function() {\r\n            var itemHtmlList = [];\r\n            var groupClass = \"\";\r\n            var iconElem = \"\";\r\n\r\n            if (isGroup) {\r\n                groupClass = \" tg-tree-group\";\r\n\r\n                var iconType = isCollapsed ? \"tg-tree-icon-collapsed\" : \"tg-tree-icon-expanded\";\r\n                if (isEmptyGroup) {\r\n                    iconType = \"\";\r\n                }\r\n                var icon = Icon.getIconString(\"tree_icon\", {\r\n                    width: 9,\r\n                    height: 9\r\n                }, \"tree_icon\");\r\n                iconElem = '<div class=\"tg-tree-icon ' + iconType + '\">' + icon + '</div>';\r\n\r\n            }\r\n\r\n            itemHtmlList.push('<div class=\"tg-tree-item' + groupClass + '\" ');\r\n            if (paddingLeft < 0) {\r\n                itemHtmlList.push('style=\"padding-left:' + (leftWidth + paddingLeft) + 'px;\"');\r\n            }\r\n            itemHtmlList.push('>');\r\n            itemHtmlList.push(iconElem);\r\n            itemHtmlList.push(\"{value}\");\r\n            itemHtmlList.push('</div>');\r\n\r\n            var itemHtml = itemHtmlList.join(\"\");\r\n            htmlList.push(itemHtml);\r\n        };\r\n        itemHandler();\r\n\r\n        // wapped tree level container\r\n        var levelHandler = function() {\r\n            while (rowLevel > 0) {\r\n                htmlList.unshift('<div class=\"tg-tree-level\">');\r\n                htmlList.push('</div>');\r\n                rowLevel -= 1;\r\n            }\r\n        };\r\n        levelHandler();\r\n\r\n        // wapped tree container\r\n        var treeHandler = function() {\r\n            if (paddingLeft < 0) {\r\n                paddingLeft = 0;\r\n            }\r\n            htmlList.unshift('<div class=\"tg-tree\" style=\"padding-left:' + paddingLeft + 'px;\">');\r\n            htmlList.push('</div>');\r\n        };\r\n        treeHandler();\r\n\r\n        // add row number container finaly\r\n        var rowNumberHandler = function() {\r\n\r\n            if (!showRowNumber || isGroup) {\r\n                return;\r\n            }\r\n\r\n            //has space between with name\r\n            var rw = indentWidth - spaceWidth;\r\n            // tree icon arrow center fixing\r\n            if (isTree) {\r\n                // do NOT overflow hidden here\r\n                rw -= arrowWidth * 0.5;\r\n                // min width is 12px, because collapse icon is 15px\r\n                //rw = Math.max(rw, 12);\r\n            }\r\n\r\n            var rowNumberElem = '<div class=\"tg-tree-row-number\" style=\"width:' + rw + 'px;\">';\r\n            rowNumberElem += \"{rowNumber}\";\r\n            rowNumberElem += '</div>';\r\n            htmlList.unshift(rowNumberElem);\r\n        };\r\n        rowNumberHandler();\r\n\r\n        var template = htmlList.join(\"\");\r\n\r\n        return template;\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = ModelFormatter;","var ModelProxy = {\r\n\r\n    //loading\r\n\r\n    showLoading: function() {\r\n        return this.gridView.showLoading.apply(this.gridView, arguments);\r\n    },\r\n    hideLoading: function() {\r\n        return this.gridView.hideLoading.apply(this.gridView, arguments);\r\n    },\r\n\r\n    //scroll\r\n\r\n    setScroll: function() {\r\n        return this.gridView.setScroll.apply(this.gridView, arguments);\r\n    },\r\n    setScrollTop: function() {\r\n        return this.gridView.setScrollTop.apply(this.gridView, arguments);\r\n    },\r\n    setScrollLeft: function() {\r\n        return this.gridView.setScrollLeft.apply(this.gridView, arguments);\r\n    },\r\n    getScrollTop: function() {\r\n        return this.gridView.getScrollTop.apply(this.gridView, arguments);\r\n    },\r\n    getScrollLeft: function() {\r\n        return this.gridView.getScrollLeft.apply(this.gridView, arguments);\r\n    },\r\n\r\n\r\n    //property\r\n\r\n    getScrollBarWidth: function() {\r\n        return this.gridView.getScrollBarWidth.apply(this.gridView, arguments);\r\n    },\r\n    getScrollBarHeight: function() {\r\n        return this.gridView.getScrollBarHeight.apply(this.gridView, arguments);\r\n    },\r\n\r\n    getScrollViewWidth: function() {\r\n        return this.gridView.getScrollViewWidth.apply(this.gridView, arguments);\r\n    },\r\n    getScrollViewHeight: function() {\r\n        return this.gridView.getScrollViewHeight.apply(this.gridView, arguments);\r\n    },\r\n\r\n    getScrollPaneWidth: function() {\r\n        return this.gridView.getScrollPaneWidth.apply(this.gridView, arguments);\r\n    },\r\n    getScrollPaneHeight: function() {\r\n        return this.gridView.getScrollPaneHeight.apply(this.gridView, arguments);\r\n    },\r\n\r\n    getVisibleRange: function() {\r\n        return this.gridView.getVisibleRange.apply(this.gridView, arguments);\r\n    },\r\n\r\n\r\n    //invalidate api\r\n\r\n    invalidateRow: function() {\r\n        return this.gridView.invalidateRow.apply(this.gridView, arguments);\r\n    },\r\n    invalidateRows: function() {\r\n        return this.gridView.invalidateRows.apply(this.gridView, arguments);\r\n    },\r\n    invalidateRowsExcept: function() {\r\n        return this.gridView.invalidateRowsExcept.apply(this.gridView, arguments);\r\n    },\r\n    invalidateRowsFrom: function() {\r\n        return this.gridView.invalidateRowsFrom.apply(this.gridView, arguments);\r\n    },\r\n\r\n    invalidateColumn: function() {\r\n        return this.gridView.invalidateColumn.apply(this.gridView, arguments);\r\n    },\r\n    invalidateColumns: function() {\r\n        return this.gridView.invalidateColumns.apply(this.gridView, arguments);\r\n    },\r\n    invalidateColumnsExcept: function() {\r\n        return this.gridView.invalidateColumnsExcept.apply(this.gridView, arguments);\r\n    },\r\n    invalidateColumnsFrom: function() {\r\n        return this.gridView.invalidateColumnsFrom.apply(this.gridView, arguments);\r\n    },\r\n\r\n    invalidateCell: function() {\r\n        return this.gridView.invalidateCell.apply(this.gridView, arguments);\r\n    },\r\n    invalidateCells: function() {\r\n        return this.gridView.invalidateCells.apply(this.gridView, arguments);\r\n    },\r\n    invalidateAll: function() {\r\n        return this.gridView.invalidateAll.apply(this.gridView, arguments);\r\n    },\r\n\r\n    setFocus: function() {\r\n        this.gridView.setFocus();\r\n        return this;\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = ModelProxy;","var $ = require(\"../../core/query.js\");\r\nvar E = require(\"../../core/event-type.js\");\r\nvar Util = require(\"../../core/util.js\");\r\nvar Icon = require(\"../../core/icon.js\");\r\n\r\nvar ModelRowCollapse = {\r\n\r\n    gridInitCollapseHandler: function() {\r\n        var collapseAll = this.option.collapseAll;\r\n        //collapse all tree, only handle true and false\r\n        if (collapseAll === true) {\r\n            this.collapseAllToData();\r\n            return;\r\n        }\r\n        if (collapseAll === false) {\r\n            this.expandAllToData();\r\n            return;\r\n        }\r\n    },\r\n\r\n    //=============================================================================\r\n    //header\r\n\r\n    initCollapseAllHandler: function(e, d) {\r\n\r\n        this.option.collapseAllIconWidth = 0;\r\n\r\n        //only for tree column\r\n        var columnData = this.getColumnItemBy({\r\n            formatter: \"tree\"\r\n        });\r\n\r\n        if (!columnData) {\r\n            return;\r\n        }\r\n        var $node = this.getHeaderNode(columnData);\r\n\r\n        //check and create tree-header first\r\n        $node.find(\".tg-tree-header\").remove();\r\n        var $treeHeader = $(\"<div/>\").addClass(\"tg-tree-header\").appendTo($node);\r\n\r\n        //render tree-header\r\n        this.updateCollapseAllIcon(columnData, $treeHeader);\r\n\r\n        //save icon width\r\n        this.option.collapseAllIconWidth = $treeHeader.width();\r\n\r\n        //update width\r\n        var indentWidth = this.getCurrentIndentWidth();\r\n        $node.find(\".tg-column-name\").css({\r\n            \"margin-left\": indentWidth + \"px\"\r\n        });\r\n        $node.find(\".tg-sort-placeholder\").css({\r\n            \"margin-left\": indentWidth + \"px\"\r\n        });\r\n        $treeHeader.width(indentWidth);\r\n\r\n    },\r\n\r\n    updateCollapseAllIcon: function(columnData, $treeHeader) {\r\n        var isTree = this.option.rowsInfo.isTree;\r\n        var showCollapseAllIcon = this.option.showCollapseAllIcon;\r\n        if (!isTree || !showCollapseAllIcon) {\r\n            return;\r\n        }\r\n\r\n        if (typeof(showCollapseAllIcon) !== \"function\") {\r\n            showCollapseAllIcon = this.showCollapseAllIconHandler;\r\n        }\r\n\r\n        showCollapseAllIcon.call(this, columnData, $treeHeader);\r\n\r\n    },\r\n\r\n    showCollapseAllIconHandler: function(columnData, $treeHeader) {\r\n        var icon = Icon.getIconString(\"tree_icon\", {\r\n            width: 9,\r\n            height: 9\r\n        }, \"tree_icon\");\r\n        var $iconElem = $('<div/>').append(icon).addClass(\"tg-tree-icon tg-tree-icon-all\").appendTo($treeHeader);\r\n        this.setNodeTreeIcon($iconElem, this.option.collapseAll);\r\n    },\r\n\r\n    //========================================================================================\r\n    //tree handler collapsed\r\n\r\n    expandAll: function() {\r\n        this.option.collapseAll = false;\r\n        this.expandAllToData();\r\n        this.collapseAllIconHandler();\r\n        this.gridView.invalidateAll();\r\n        this.renderNow();\r\n    },\r\n\r\n    expandAllToData: function() {\r\n        this.collapseAllToDataHandler(false);\r\n    },\r\n\r\n    collapseAll: function() {\r\n        this.option.collapseAll = true;\r\n        this.collapseAllToData();\r\n        this.collapseAllIconHandler();\r\n        this.gridView.invalidateAll();\r\n        this.renderNow();\r\n    },\r\n\r\n    collapseAllToData: function() {\r\n        this.collapseAllToDataHandler(true);\r\n    },\r\n\r\n    toggleAll: function() {\r\n        if (this.option.collapseAll) {\r\n            this.expandAll();\r\n        } else {\r\n            this.collapseAll();\r\n        }\r\n    },\r\n\r\n    collapseAllToDataHandler: function(collapsed) {\r\n        var rows = this.getRowsData();\r\n        var setAll = function(rows, parent) {\r\n            if (!Util.islist(rows)) {\r\n                return;\r\n            }\r\n            rows.forEach(function(row) {\r\n                if (row.subs) {\r\n                    row.collapsed = collapsed;\r\n                    setAll(row.subs, row);\r\n                }\r\n            });\r\n        };\r\n        setAll(rows);\r\n    },\r\n\r\n    collapseAllIconHandler: function() {\r\n        if (!this.gridView.initialized) {\r\n            return;\r\n        }\r\n        var collapsed = this.option.collapseAll;\r\n        var $node = this.gridView.$headers.find(\".tg-tree-icon-all\");\r\n        this.setNodeTreeIcon($node, collapsed);\r\n    },\r\n\r\n    //========================================================================================\r\n\r\n    expandItem: function(rowIndex) {\r\n        var item = this.getRowItem(rowIndex);\r\n        if (!item) {\r\n            return;\r\n        }\r\n\r\n        // no subs\r\n        if (!item.subs) {\r\n            this.trigger(E.onRowRequestSubs, item);\r\n            return;\r\n        }\r\n\r\n        //has subs but length = 0\r\n        if (!Util.islist(item.subs)) {\r\n            return;\r\n        }\r\n\r\n        item.collapsed = false;\r\n        this.setInvalidRow(item);\r\n        this.collapsedItemStyleHandler(item);\r\n        this.renderNow();\r\n    },\r\n\r\n    collapseItem: function(rowIndex) {\r\n        var item = this.getRowItem(rowIndex);\r\n        if (!item) {\r\n            return;\r\n        }\r\n\r\n        //has subs but length = 0\r\n        if (!Util.islist(item.subs)) {\r\n            return;\r\n        }\r\n\r\n        item.collapsed = true;\r\n        this.setInvalidRow(item);\r\n        this.collapsedItemStyleHandler(item);\r\n        this.renderNow();\r\n    },\r\n\r\n    toggleItem: function(rowIndex) {\r\n        var item = this.getRowItem(rowIndex);\r\n        if (!item) {\r\n            return;\r\n        }\r\n        if (item.collapsed) {\r\n            this.expandItem(item.tg_index);\r\n            this.trigger(E.onRowExpand, item);\r\n        } else {\r\n            this.collapseItem(item.tg_index);\r\n            this.trigger(E.onRowCollapse, item);\r\n        }\r\n    },\r\n\r\n    collapsedItemStyleHandler: function(item) {\r\n        if (!this.gridView.initialized) {\r\n            return;\r\n        }\r\n        var rowNodes = this.gridView.getRowNodes(item.tg_index);\r\n        if (!rowNodes) {\r\n            return;\r\n        }\r\n        var collapsed = item.collapsed;\r\n        //class handler\r\n        if (collapsed) {\r\n            rowNodes.removeClass(\"tg-expanded\").addClass(\"tg-collapsed\");\r\n        } else {\r\n            rowNodes.removeClass(\"tg-collapsed\").addClass(\"tg-expanded\");\r\n        }\r\n        //icon handler\r\n        var $node = rowNodes.find(\".tg-tree-icon\");\r\n        this.setNodeTreeIcon($node, collapsed);\r\n    },\r\n\r\n    //========================================================================================\r\n\r\n    collapseParentSubs: function(rowIndex) {\r\n        var subs = this.getRowParentSubs(rowIndex);\r\n        if (!subs) {\r\n            return;\r\n        }\r\n        this.collapseList(subs);\r\n    },\r\n\r\n    collapseList: function(list) {\r\n        if (!Util.islist(list)) {\r\n            return;\r\n        }\r\n        var self = this;\r\n        var invalidItem = null;\r\n        list.forEach(function(item) {\r\n            if (item.collapsed || !Util.islist(item.subs)) {\r\n                return;\r\n            }\r\n            item.collapsed = true;\r\n            self.collapsedItemStyleHandler(item);\r\n            if (!invalidItem) {\r\n                invalidItem = item;\r\n            }\r\n        });\r\n        if (invalidItem) {\r\n            this.setInvalidRow(invalidItem);\r\n            this.renderNow();\r\n        }\r\n    },\r\n\r\n    //========================================================================================\r\n\r\n    expandLevel: function(level) {\r\n        level = Util.tonum(level);\r\n        this.expandLevelData(level);\r\n        this.gridView.invalidateAll();\r\n        this.renderNow();\r\n    },\r\n\r\n    expandLevelData: function(level) {\r\n        var rows = this.getRowsData();\r\n        var setAll = function(rows, parent) {\r\n            if (!Util.islist(rows)) {\r\n                return;\r\n            }\r\n            rows.forEach(function(row) {\r\n                if (row.subs) {\r\n                    if (row.tg_level <= level) {\r\n                        row.collapsed = false;\r\n                    } else {\r\n                        row.collapsed = true;\r\n                    }\r\n                    setAll(row.subs, row);\r\n                }\r\n            });\r\n        };\r\n        setAll(rows);\r\n    },\r\n\r\n    //========================================================================================\r\n\r\n    setNodeTreeIcon: function($node, collapsed) {\r\n        if (!$node) {\r\n            return;\r\n        }\r\n        $node.removeClass(\"tg-tree-icon-collapsed tg-tree-icon-expanded\");\r\n        if (collapsed) {\r\n            $node.addClass(\"tg-tree-icon-collapsed\");\r\n        } else {\r\n            $node.addClass(\"tg-tree-icon-expanded\");\r\n        }\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = ModelRowCollapse;","var $ = require(\"../../core/query.js\");\r\nvar E = require(\"../../core/event-type.js\");\r\nvar Util = require(\"../../core/util.js\");\r\n\r\nvar ModelRowDragdrop = {\r\n\r\n    //row drag handler\r\n    rowDragStartHandler: function(e, d) {\r\n\r\n        //console.log(e.type, d);\r\n        var dragRow = d.dragRow;\r\n        //console.log(row);\r\n        if (!dragRow) {\r\n            return;\r\n        }\r\n\r\n        var rowTop = this.gridView.getRowTop(dragRow.tg_index);\r\n        d.dragStartTop = rowTop;\r\n        d.dragRowHeight = this.option.rowHeight;\r\n        //half row height if no offsetY\r\n        d.dragOffsetY = d.e.offsetY || d.dragRowHeight * 0.5;\r\n\r\n        var dragNodes = this.gridView.getRowNodes(dragRow.tg_index);\r\n        if (!dragNodes) {\r\n            return;\r\n        }\r\n        d.dragNodes = dragNodes;\r\n\r\n        var dragCloneNodes = this.getRowDragCloneNodes(dragNodes);\r\n        d.dragCloneNodes = dragCloneNodes;\r\n\r\n        var dropPlaceholder = this.getRowDropPlaceholder(dragNodes);\r\n        d.dropPlaceholder = dropPlaceholder;\r\n\r\n        this.rowDragPositionHandler(d);\r\n\r\n        this.rowDragCollapseHandler(dragRow);\r\n\r\n        this.addRowStatus(dragRow, \"dragging\");\r\n\r\n        this.rowDragDropListHandler(d);\r\n\r\n    },\r\n\r\n    rowDragUpdateHandler: function(e, d) {\r\n        //console.log(e.type, d);\r\n        this.rowDragPositionHandler(d);\r\n\r\n        this.rowDragPlaceholderHandler(d);\r\n\r\n        //TODO\r\n        this.rowDragAutoScrollHandler(d);\r\n\r\n    },\r\n\r\n    rowDragCompleteHandler: function(e, d) {\r\n\r\n        if (!d.valid) {\r\n            return;\r\n        }\r\n\r\n        //console.log(e.type, d);\r\n        this.rowDragCleanHandler(d);\r\n\r\n        //sort\r\n        this.rowDragSortHandler(d);\r\n\r\n        //drag drop\r\n        this.trigger(E.onRowDropped, d);\r\n\r\n    },\r\n\r\n    rowDragCleanHandler: function(d) {\r\n\r\n        if (d.dragRow) {\r\n            this.removeRowStatus(d.dragRow, \"dragging\");\r\n        }\r\n\r\n        if (d.dragCloneNodes) {\r\n            d.dragCloneNodes.remove();\r\n            d.dragCloneNodes = null;\r\n        }\r\n\r\n        if (d.dropPlaceholder) {\r\n            d.dropPlaceholder.remove();\r\n            d.dropPlaceholder = null;\r\n        }\r\n    },\r\n\r\n    rowDragPositionHandler: function(d) {\r\n        var currentTop = d.dragStartTop + d.mouseOffsetY;\r\n        d.dragCurrentTop = currentTop;\r\n        //console.log(d);\r\n        //move\r\n        d.dragCloneNodes.each(function(index, elem) {\r\n            var node = $(elem);\r\n            node.css(\"top\", currentTop);\r\n        });\r\n    },\r\n\r\n    rowDragCollapseHandler: function(item) {\r\n\r\n        //parent subs, include self\r\n        if (!this.option.rowDragDropMultiLevel) {\r\n            this.collapseParentSubs(item);\r\n            return;\r\n        }\r\n\r\n        //always collapse self\r\n        this.collapseItem(item);\r\n\r\n    },\r\n\r\n    rowDragDropListHandler: function(d) {\r\n        var dropList = [];\r\n        var rows = this.getRowDragDropList(d);\r\n        //console.log(rows);\r\n        if (Util.islist(rows)) {\r\n            var self = this;\r\n            rows.forEach(function(row) {\r\n                var top = self.gridView.getRowTop(row.tg_index);\r\n                dropList.push({\r\n                    row: row,\r\n                    top: top\r\n                });\r\n            });\r\n        }\r\n        d.dropList = dropList;\r\n    },\r\n\r\n    getRowDragDropList: function(d) {\r\n        var multiLevel = this.option.rowDragDropMultiLevel;\r\n\r\n        //default only parent subs\r\n        if (!multiLevel) {\r\n            var parentSubs = this.getRowParentSubs(d.dragRow);\r\n            return parentSubs;\r\n        }\r\n\r\n        //custom filter\r\n        if (typeof(multiLevel) === \"function\") {\r\n            var results = multiLevel.call(this, d);\r\n            return results;\r\n        }\r\n\r\n        //all visible rows\r\n        var rows = [];\r\n        var visibleRows = this.gridView.getVisibleRowList();\r\n        var self = this;\r\n        visibleRows.forEach(function(rowIndex) {\r\n            var row = self.getRowItem(rowIndex);\r\n            rows.push(row);\r\n        });\r\n\r\n        return rows;\r\n    },\r\n\r\n    getRowDragCloneNodes: function(dragNodes) {\r\n        var dragCloneNodes = $();\r\n        dragNodes.each(function(index, elem) {\r\n            var node = $(elem);\r\n            var nodeCopy = node.clone();\r\n            nodeCopy.appendTo(node.parent());\r\n            dragCloneNodes = dragCloneNodes.add(nodeCopy);\r\n        });\r\n        dragCloneNodes.removeClass(\"tg-pane-first\").addClass(\"tg-clone\");\r\n        return dragCloneNodes;\r\n    },\r\n\r\n    getRowDropPlaceholder: function(dragNodes) {\r\n        var dropPlaceholder = $();\r\n        dragNodes.each(function(index, elem) {\r\n            var node = $(elem);\r\n            var holder = $(\"<div/>\").addClass(\"tg-row-placeholder\").hide();\r\n            holder.appendTo(node.parent());\r\n            dropPlaceholder = dropPlaceholder.add(holder);\r\n        });\r\n        return dropPlaceholder;\r\n    },\r\n    /* eslint-disable max-statements,complexity*/\r\n    rowDropInfoHandler: function(d) {\r\n\r\n        var dropList = d.dropList;\r\n        if (!Util.islist(dropList)) {\r\n            return;\r\n        }\r\n\r\n        d.dropRow = null;\r\n        d.dropBottom = false;\r\n        d.dropLast = false;\r\n\r\n        /* jshint ignore:start */\r\n\r\n        var dragCurrentTop = d.dragCurrentTop;\r\n        var dragOffsetY = d.dragOffsetY;\r\n        var dragRowHeight = d.dragRowHeight;\r\n\r\n        var pos = dragCurrentTop + dragOffsetY;\r\n\r\n        var i, item;\r\n        var length = dropList.length;\r\n        for (i = 0; i < length; i++) {\r\n            item = dropList[i];\r\n            if (!item.row.draggable) {\r\n                continue;\r\n            }\r\n            if (pos <= item.top + dragRowHeight * 0.5) {\r\n                d.dropRow = item.row;\r\n                break;\r\n            }\r\n            if (pos <= item.top + dragRowHeight) {\r\n                d.dropRow = item.row;\r\n                d.dropBottom = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (!d.dropRow) {\r\n            if (item) {\r\n                d.dropRow = item.row;\r\n            }\r\n            d.dropBottom = true;\r\n            d.dropLast = true;\r\n        }\r\n\r\n        if (i === length - 1) {\r\n            d.dropLast = true;\r\n        }\r\n\r\n        /* jshint ignore:end */\r\n\r\n    },\r\n    /* eslint-enable*/\r\n    rowDragPlaceholderHandler: function(d) {\r\n\r\n        var previousDropRow = null;\r\n        if (d.dropRow) {\r\n            previousDropRow = d.dropRow;\r\n        }\r\n\r\n        this.rowDropInfoHandler(d);\r\n\r\n        var dropRow = d.dropRow;\r\n        if (!dropRow) {\r\n            return;\r\n        }\r\n\r\n        //update placeholder\r\n        var updatePlaceholderTop = function(d, dropRow) {\r\n            var top = this.gridView.getRowTop(dropRow.tg_index);\r\n            if (d.dropBottom) {\r\n                top += d.dragRowHeight;\r\n            }\r\n            if (d.dropLast) {\r\n                top -= 2;\r\n            }\r\n            var dropPlaceholder = d.dropPlaceholder;\r\n            if (dropPlaceholder) {\r\n                dropPlaceholder.css(\"top\", top).show();\r\n            }\r\n        };\r\n        updatePlaceholderTop.call(this, d, dropRow);\r\n\r\n\r\n        //update dropping row\r\n        var updateDroppingRow = function(d, dropRow, previousDropRow) {\r\n            if (dropRow === previousDropRow) {\r\n                return;\r\n            }\r\n            if (previousDropRow) {\r\n                this.removeRowStatus(previousDropRow, \"dropping\");\r\n            }\r\n            this.addRowStatus(dropRow, \"dropping\");\r\n        };\r\n        updateDroppingRow.call(this, d, dropRow, previousDropRow);\r\n\r\n    },\r\n\r\n    rowDragAutoScrollHandler: function(d) {\r\n\r\n        //var dropList = d.dropList;\r\n\r\n\r\n    },\r\n\r\n    rowDragSortHandler: function(d) {\r\n\r\n        var dragRow = d.dragRow;\r\n        var dropRow = d.dropRow;\r\n        //no change\r\n        if (!dropRow || dragRow === dropRow) {\r\n            return;\r\n        }\r\n\r\n        //remove from current list\r\n        var removeFromPreviousList = function(dragRow) {\r\n            var currentList = this.getRowParentSubs(dragRow);\r\n            if (!Util.islist(currentList)) {\r\n                return;\r\n            }\r\n            for (var i = 0, l = currentList.length; i < l; i++) {\r\n                if (dragRow === currentList[i]) {\r\n                    currentList.splice(i, 1);\r\n                    break;\r\n                }\r\n            }\r\n        };\r\n        removeFromPreviousList.call(this, dragRow);\r\n        /* eslint-disable max-statements,complexity*/\r\n        //add to target list\r\n        var addToTargetList = function(dragRow, dropBottom) {\r\n\r\n            //add below group first\r\n            if (dropBottom && dropRow.subs && (!dropRow.collapsed || !dropRow.subs.length)) {\r\n                dropRow.subs.unshift(dragRow);\r\n                return;\r\n            }\r\n\r\n            //insert to parent subs position\r\n            var targetList = this.getRowParentSubs(dropRow);\r\n            if (!Util.islist(targetList)) {\r\n                return;\r\n            }\r\n            var insertToTargetList = function(targetList, dragRow, dropBottom) {\r\n                for (var i = 0, l = targetList.length; i < l; i++) {\r\n                    if (dropRow === targetList[i]) {\r\n                        if (dropBottom) {\r\n                            targetList.splice(i + 1, 0, dragRow);\r\n                        } else {\r\n                            targetList.splice(i, 0, dragRow);\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n            };\r\n            insertToTargetList(targetList, dragRow, dropBottom);\r\n\r\n        };\r\n        /* eslint-enable*/\r\n\r\n        addToTargetList.call(this, dragRow, d.dropBottom);\r\n\r\n\r\n        //invalidate first\r\n        var dragIndex = dragRow.tg_index;\r\n        if (dragRow.tg_parent) {\r\n            dragIndex -= 1;\r\n        }\r\n        var index = Math.min(dragIndex, dropRow.tg_index);\r\n        this.invalidateRowsFrom(index);\r\n\r\n        //fresh data index\r\n        this.removeSortStatus();\r\n        this.initRowsData();\r\n\r\n        this.renderNow();\r\n\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = ModelRowDragdrop;","var Util = require(\"../../core/util.js\");\r\nvar E = require(\"../../core/event-type.js\");\r\n\r\nvar ModelRowFocus = {\r\n\r\n    //focus row\r\n    setFocusedRow: function(rowIndex, e) {\r\n        var item = this.getRowItem(rowIndex);\r\n        if (!item) {\r\n            return;\r\n        }\r\n        if (Util.hasCtrlKey(e)) {\r\n            this.multiFocusHandler(item);\r\n            return;\r\n        }\r\n        this.singleFocusHandler(item);\r\n    },\r\n\r\n    //==============================================================================\r\n\r\n    getFocusedRow: function() {\r\n        var focusedRow = null;\r\n        var focusedRows = this.getFocusedRows();\r\n        if (focusedRows.length) {\r\n            focusedRow = focusedRows[0];\r\n        }\r\n        return focusedRow;\r\n    },\r\n\r\n    getFocusedRows: function() {\r\n        var focusedRows = [];\r\n        this.forEachRow(function(row, i, parent) {\r\n            if (row.focused) {\r\n                focusedRows.push(row);\r\n            }\r\n        });\r\n        if (focusedRows.length > 1) {\r\n            //sort by order\r\n            focusedRows.sort(function(a, b) {\r\n                var av = a.tg_focused_order;\r\n                var bv = b.tg_focused_order;\r\n                if (av > bv) {\r\n                    return 1;\r\n                }\r\n                if (av < bv) {\r\n                    return -1;\r\n                }\r\n                return 0;\r\n            });\r\n        }\r\n        return focusedRows;\r\n    },\r\n\r\n    //==============================================================================\r\n\r\n    unsetFocusedRow: function(rowIndex) {\r\n        //single focused\r\n        if (arguments.length) {\r\n            var item = this.getRowItem(rowIndex);\r\n            if (item) {\r\n                this.removeRowFocused(item);\r\n            }\r\n            return this;\r\n        }\r\n        //focused all rows\r\n        this.unsetAllFocusedRows();\r\n        return this;\r\n    },\r\n\r\n    unsetAllFocusedRows: function() {\r\n        var self = this;\r\n        this.forEachRow(function(row, i, parent) {\r\n            if (row.focused) {\r\n                self.removeRowFocused(row);\r\n            }\r\n        });\r\n        return this;\r\n    },\r\n\r\n    //==============================================================================\r\n\r\n    singleFocusHandler: function(item) {\r\n        this.unsetAllFocusedRows(false);\r\n        this.addRowFocused(item);\r\n        this.updateFocusedStatus();\r\n    },\r\n\r\n    multiFocusHandler: function(item) {\r\n        if (item.focused) {\r\n            this.unsetFocusedRow(item.tg_index);\r\n        } else {\r\n            this.addRowFocused(item);\r\n        }\r\n        this.updateFocusedStatus();\r\n    },\r\n\r\n    updateFocusedStatus: function() {\r\n        //onFocusedChanged\r\n        var focusedRows = this.getFocusedRows();\r\n        var focusedLength = focusedRows.length;\r\n        var focusedRow = focusedRows[0];\r\n\r\n        if (focusedLength === this.previousFocusedLength && focusedRow === this.previousFocusedRow) {\r\n            return;\r\n        }\r\n        this.previousFocusedLength = focusedLength;\r\n        this.previousFocusedRow = focusedRow;\r\n\r\n        var d = {\r\n            focusedLength: focusedLength,\r\n            focusedRow: focusedRow,\r\n            focusedRows: focusedRows\r\n        };\r\n\r\n        this.trigger(E.onFocusedChanged, d);\r\n    },\r\n\r\n    //==============================================================================\r\n\r\n    //init global order for multi sorting\r\n    global_tg_focused_order: 0,\r\n\r\n    //change row focused\r\n    addRowFocused: function(rowItem) {\r\n        if (!rowItem) {\r\n            return this;\r\n        }\r\n        this.addRowStatus(rowItem, \"focused\");\r\n        // add order for multipe items order\r\n        rowItem.tg_focused_order = this.global_tg_focused_order++;\r\n\r\n        return this;\r\n    },\r\n\r\n    removeRowFocused: function(rowItem) {\r\n        if (!rowItem) {\r\n            return this;\r\n        }\r\n        this.removeRowStatus(rowItem, \"focused\");\r\n        return this;\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = ModelRowFocus;","var Util = require(\"../../core/util.js\");\r\n\r\nvar ModelRowNumber = {\r\n\r\n    //row number handler\r\n\r\n    isShowRowNumber: function(rowData) {\r\n        if (rowData.tg_invisible) {\r\n            return false;\r\n        }\r\n        if (rowData.tg_frozen) {\r\n            return false;\r\n        }\r\n        if (rowData.rowType === \"blank\") {\r\n            return false;\r\n        }\r\n        //default is undefined for true\r\n        if (rowData.showRowNumber === false) {\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n\r\n    showRowNumberHandler: function(rowData, listNumber, leafNumber) {\r\n\r\n        if (!this.isShowRowNumber(rowData)) {\r\n            return \"\";\r\n        }\r\n\r\n        // default use leaf number\r\n        if (this.option.rowNumberType === \"list\") {\r\n            return listNumber;\r\n        }\r\n        return leafNumber;\r\n    },\r\n\r\n    gridRowNumberHandler: function() {\r\n\r\n        this.option.rowNumber = \"\";\r\n        this.option.rowNumberWidth = 0;\r\n\r\n        // should be a function\r\n        var showRowNumber = this.option.showRowNumber;\r\n        if (!showRowNumber) {\r\n            return this;\r\n        }\r\n        if (typeof(showRowNumber) !== \"function\") {\r\n            showRowNumber = this.showRowNumberHandler;\r\n        }\r\n\r\n        var rows = this.getRowsData();\r\n\r\n        var rowNumber = \"\";\r\n        var leafNumber = 1;\r\n\r\n        var self = this;\r\n\r\n        var rowAll = function(rows, parent) {\r\n            if (!Util.islist(rows)) {\r\n                return;\r\n            }\r\n\r\n            var listNumber = 1;\r\n            rows.forEach(function(rowData) {\r\n\r\n                if (self.isRowGroup(rowData)) {\r\n\r\n                    rowData.tg_row_number = \"\";\r\n                    rowAll(rowData.subs, rowData);\r\n\r\n                } else {\r\n\r\n                    var number = showRowNumber.call(self, rowData, listNumber, leafNumber);\r\n                    rowData.tg_row_number = number;\r\n\r\n                    // number ++\r\n                    if (number) {\r\n                        // current number for width\r\n                        number += \"\";\r\n                        if (rowNumber.length <= number.length) {\r\n                            rowNumber = number;\r\n                        }\r\n\r\n                        listNumber += 1;\r\n                        leafNumber += 1;\r\n\r\n                    }\r\n                }\r\n\r\n            });\r\n        };\r\n\r\n        rowAll(rows);\r\n\r\n        this.option.rowNumber = rowNumber;\r\n        this.option.rowNumberWidth = this.gridView.getTextWidth(rowNumber);\r\n\r\n        //console.log(\"gridRowNumberHandler\", this.option.rowNumberWidth);\r\n\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = ModelRowNumber;","var $ = require(\"../../core/query.js\");\r\nvar E = require(\"../../core/event-type.js\");\r\nvar Util = require(\"../../core/util.js\");\r\nvar Icon = require(\"../../core/icon.js\");\r\n\r\nvar ModelRowSelect = {\r\n\r\n    gridInitSelectedHandler: function() {\r\n        if (!this.option.multiSelect) {\r\n            return;\r\n        }\r\n        var selectedAll = this.option.selectedAll;\r\n        //specified true\r\n        if (selectedAll === true) {\r\n            this.selectAllToData();\r\n            return;\r\n        }\r\n        //specified false\r\n        if (selectedAll === false) {\r\n            this.unselectAllToData();\r\n            return;\r\n        }\r\n    },\r\n\r\n    //=============================================================================\r\n    //checkbox all handler\r\n\r\n    isShowCheckboxAll: function() {\r\n        var showCheckbox = this.option.showCheckbox;\r\n        var showCheckboxAll = this.option.showCheckboxAll;\r\n        var multiSelect = this.option.multiSelect;\r\n        if (!showCheckbox || !showCheckboxAll || !multiSelect) {\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n\r\n    initCheckboxAllHandler: function(e, d) {\r\n        if (!this.isShowCheckboxAll()) {\r\n            return;\r\n        }\r\n        //only for checkbox column\r\n        var columnData = this.gridPrivateColumns.checkbox;\r\n        var showCheckboxAll = this.option.showCheckboxAll;\r\n        if (typeof(showCheckboxAll) !== \"function\") {\r\n            showCheckboxAll = this.showCheckboxAllHandler;\r\n        }\r\n        var $node = this.getHeaderNode(columnData);\r\n        var $name = $node.find(\".tg-column-name\");\r\n        showCheckboxAll.call(this, columnData, $name);\r\n    },\r\n\r\n    showCheckboxAllHandler: function(columnData, $node) {\r\n        //header size is 12px\r\n        var icon = Icon.getIconString(\"checkbox\", {\r\n            width: 20,\r\n            height: 20\r\n        }, \"checkbox_20_20\");\r\n        var $checkboxAll = $(\"<div/>\").append(icon).addClass(\"tg-checkbox tg-checkbox-all\");\r\n        if (this.option.selectedAll) {\r\n            $checkboxAll.addClass(\"tg-selected\");\r\n        }\r\n        $node.empty().append($checkboxAll);\r\n    },\r\n\r\n    updateCheckboxAll: function(selectedAll) {\r\n        if (!this.isShowCheckboxAll()) {\r\n            return;\r\n        }\r\n        var columnData = this.gridPrivateColumns.checkbox;\r\n        var $node = this.getHeaderNode(columnData);\r\n        var $checkboxAll = $node.find(\".tg-checkbox-all\");\r\n        if (!$checkboxAll.length) {\r\n            return;\r\n        }\r\n        $checkboxAll.removeClass(\"tg-mixed\");\r\n        $checkboxAll.removeClass(\"tg-selected\");\r\n        if (selectedAll === false) {\r\n            return;\r\n        }\r\n        if (selectedAll === true) {\r\n            $checkboxAll.addClass(\"tg-selected\");\r\n            return;\r\n        }\r\n        $checkboxAll.addClass(\"tg-mixed\");\r\n    },\r\n\r\n    updateSelectedAll: function(selectedLength, selectedAll) {\r\n        var selectedChanged = false;\r\n        if (selectedAll !== this.previousSelectedAll) {\r\n            this.previousSelectedAll = selectedAll;\r\n            this.updateCheckboxAll(selectedAll);\r\n            selectedChanged = true;\r\n        }\r\n\r\n        if (selectedLength !== this.previousSelectedLength) {\r\n            this.previousSelectedLength = selectedLength;\r\n            selectedChanged = true;\r\n        }\r\n\r\n        if (!selectedChanged) {\r\n            return this;\r\n        }\r\n\r\n        this.trigger(E.onSelectedChanged, {\r\n            selectedLength: selectedLength,\r\n            totalSelectable: this.totalSelectable,\r\n            selectedAll: selectedAll\r\n        });\r\n\r\n        return this;\r\n    },\r\n\r\n    checkboxAllClickHandler: function(e, d) {\r\n\r\n        //toggle selected status\r\n        var selectedAll = false;\r\n        var $checkboxAll = $(d.node);\r\n        if ($checkboxAll.hasClass(\"tg-selected\") || $checkboxAll.hasClass(\"tg-mixed\")) {\r\n            selectedAll = true;\r\n        }\r\n        selectedAll = !selectedAll;\r\n\r\n        //update new status\r\n        this.option.selectedAll = selectedAll;\r\n\r\n        //update all status\r\n        if (selectedAll) {\r\n            this.selectAll();\r\n        } else {\r\n            this.unselectAll();\r\n        }\r\n    },\r\n\r\n    //=============================================================================\r\n    //select/unselect all\r\n\r\n    selectAll: function() {\r\n        if (!this.option.multiSelect) {\r\n            return;\r\n        }\r\n        this.selectAllToData();\r\n        this.updateVisibleSelectableRowsStatus();\r\n        this.totalSelectable = this.getTotalSelectable();\r\n        this.updateSelectedAll(this.totalSelectable, true);\r\n        return this;\r\n    },\r\n\r\n    selectAllToData: function() {\r\n        //reset global order for selected all\r\n        this.global_tg_selected_order = 0;\r\n        var self = this;\r\n        this.forEachSelectableRows(function(row, i, parent) {\r\n            row.selected = true;\r\n            row.tg_selected_order = self.global_tg_selected_order++;\r\n        });\r\n        return this;\r\n    },\r\n\r\n    unselectAll: function() {\r\n        this.unselectAllToData();\r\n        this.updateVisibleSelectableRowsStatus();\r\n        this.totalSelectable = this.getTotalSelectable();\r\n        this.updateSelectedAll(0, false);\r\n        return this;\r\n    },\r\n\r\n    unselectAllToData: function() {\r\n        this.forEachSelectableRows(function(row, i, parent) {\r\n            row.selected = false;\r\n        });\r\n        return this;\r\n    },\r\n\r\n    updateVisibleSelectableRowsStatus: function() {\r\n        var visibleRange = this.getVisibleRange();\r\n        var rowList = visibleRange.rowList;\r\n        var self = this;\r\n        rowList.forEach(function(rowIndex) {\r\n            var rowItem = self.getRowItem(rowIndex);\r\n            if (self.isRowSelectable(rowItem)) {\r\n                self.updateRowSelected(rowItem);\r\n            }\r\n        });\r\n        return this;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    //init global order for multi selection sorting\r\n    global_tg_selected_order: 0,\r\n\r\n    //change row selected\r\n    addRowSelected: function(rowItem) {\r\n        if (!rowItem) {\r\n            return this;\r\n        }\r\n        this.addRowStatus(rowItem, \"selected\");\r\n        // add order for multipe items order\r\n        rowItem.tg_selected_order = this.global_tg_selected_order++;\r\n\r\n        this.updateRowCheckbox(rowItem);\r\n\r\n        return this;\r\n    },\r\n\r\n    removeRowSelected: function(rowItem) {\r\n        if (!rowItem) {\r\n            return this;\r\n        }\r\n        this.removeRowStatus(rowItem, \"selected\");\r\n        this.updateRowCheckbox(rowItem);\r\n        return this;\r\n    },\r\n\r\n    updateRowSelected: function(rowItem) {\r\n        if (!rowItem) {\r\n            return this;\r\n        }\r\n        this.updateRowStatus(rowItem, \"selected\");\r\n        this.updateRowCheckbox(rowItem);\r\n        return this;\r\n    },\r\n\r\n    updateRowCheckbox: function(rowItem) {\r\n\r\n        var showCheckbox = this.option.showCheckbox;\r\n        if (!showCheckbox) {\r\n            return this;\r\n        }\r\n\r\n        // update row checkbox\r\n        this.updateCell(rowItem.tg_index, this.gridPrivateColumns.checkbox.tg_index);\r\n\r\n        this.updateSelectedStatus();\r\n\r\n    },\r\n\r\n    updateSelectedStatus: function() {\r\n        // async update for checkbox all\r\n        Util.getRhythm(this, \"updateSelectedStatus\").debounce({\r\n            delay: 100,\r\n            callback: this.updateSelectedStatusNow\r\n        });\r\n    },\r\n\r\n    updateSelectedStatusNow: function() {\r\n        this.totalSelectable = this.getTotalSelectable();\r\n        var selectedRows = this.getSelectedRows();\r\n        var selectedLength = selectedRows.length;\r\n        var selectedAll = null;\r\n        if (selectedLength === 0) {\r\n            selectedAll = false;\r\n            //remove shift status for multi selection if noting selected\r\n            this.multiSelectShiftFocus = null;\r\n        } else if (selectedLength === this.totalSelectable) {\r\n            selectedAll = true;\r\n        }\r\n        this.updateSelectedAll(selectedLength, selectedAll);\r\n        return this;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    //set selected row\r\n    setSelectedRow: function(rowIndex, e) {\r\n\r\n        var toBeSelectedRows = this.getToBeSelectedRows(rowIndex, e);\r\n        if (!toBeSelectedRows.length) {\r\n            return this;\r\n        }\r\n\r\n        if (!this.isKeepExistSelections(e)) {\r\n            this.unsetAllSelectedRows();\r\n        }\r\n\r\n        //select or unselect to be selected list\r\n        var rowItem = this.getRowItem(rowIndex);\r\n        var toBeSelected = !rowItem.selected;\r\n        var self = this;\r\n        toBeSelectedRows.forEach(function(item) {\r\n            self.multiSelectShiftFocus = item;\r\n            if (toBeSelected) {\r\n                self.addRowSelected(item);\r\n            } else {\r\n                self.removeRowSelected(item);\r\n            }\r\n        });\r\n        return this;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    getTotalToBeSelected: function(rowIndex, e) {\r\n        var hasSelectedRows = this.getSelectedRows();\r\n        var hasLength = hasSelectedRows.length;\r\n\r\n        var toBeSelectedRows = this.getToBeSelectedRows(rowIndex, e);\r\n        var toBeLength = toBeSelectedRows.length;\r\n        if (!toBeLength) {\r\n            return hasLength;\r\n        }\r\n\r\n        var currentRow = this.getRowItem(rowIndex);\r\n        if (this.isKeepExistSelections(e)) {\r\n\r\n            //repetitive selected fixing\r\n            var repetitive = 0;\r\n            toBeSelectedRows.forEach(function(row) {\r\n                if (row.selected) {\r\n                    repetitive += 1;\r\n                }\r\n            });\r\n            hasLength -= repetitive;\r\n\r\n            if (currentRow.selected) {\r\n                return hasLength;\r\n            }\r\n            return hasLength + toBeLength;\r\n\r\n        }\r\n\r\n        return toBeLength;\r\n\r\n    },\r\n\r\n    getToBeSelectedRows: function(rowIndex, e) {\r\n        var rowItem = this.getRowItem(rowIndex);\r\n        if (!rowItem) {\r\n            return [];\r\n        }\r\n        if (!this.isRowSelectable(rowItem)) {\r\n            return [];\r\n        }\r\n        var toBeList = [rowItem];\r\n        if (this.option.multiSelect) {\r\n            toBeList = this.getMultiToBeSelectedRows(rowItem, e);\r\n        }\r\n        return toBeList;\r\n    },\r\n\r\n    getMultiToBeSelectedRows: function(rowItem, e) {\r\n        var toBeList = [rowItem];\r\n        var multiSelectModel = this.getMultiSelectModel();\r\n        if (multiSelectModel === \"shift\") {\r\n            toBeList = this.getMultiShiftToBeSelectedRows(rowItem, e);\r\n        } else if (multiSelectModel === \"ctrl,shift\") {\r\n            toBeList = this.getMultiCtrlShiftToBeSelectedRows(rowItem, e);\r\n        }\r\n        return toBeList;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    getMultiShiftToBeSelectedRows: function(rowItem, e) {\r\n        var toBeList = [rowItem];\r\n        if (Util.hasShiftKey(e)) {\r\n            var focus = this.multiSelectShiftFocus;\r\n            if (focus) {\r\n                var index1 = focus.tg_index;\r\n                var index2 = rowItem.tg_index;\r\n                if (index1 !== index2) {\r\n                    toBeList = this.generateMultiShiftToBeSelectedRows(index1, index2);\r\n                }\r\n            }\r\n        }\r\n        return toBeList;\r\n    },\r\n\r\n    generateMultiShiftToBeSelectedRows: function(index1, index2) {\r\n        var toBeList = [];\r\n        var self = this;\r\n        var pushItem = function(index) {\r\n            var item = self.getRowItem(index);\r\n            if (item && self.isRowSelectable(item)) {\r\n                toBeList.push(item);\r\n            }\r\n        };\r\n        if (index1 < index2) {\r\n            for (var i = index1; i <= index2; i++) {\r\n                pushItem(i);\r\n            }\r\n        } else {\r\n            for (var j = index1; j >= index2; j--) {\r\n                pushItem(j);\r\n            }\r\n        }\r\n        return toBeList;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    getMultiCtrlShiftToBeSelectedRows: function(rowItem, e) {\r\n        var toBeList = [rowItem];\r\n        if (Util.hasShiftKey(e)) {\r\n            toBeList = this.getMultiShiftToBeSelectedRows(rowItem, e);\r\n        }\r\n        return toBeList;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    /* eslint-disable complexity */\r\n    isKeepExistSelections: function(e) {\r\n        if (this.option.multiSelect) {\r\n            var multiSelectModel = this.getMultiSelectModel();\r\n            if (multiSelectModel === \"\" || multiSelectModel === \"shift\") {\r\n                return true;\r\n            }\r\n            if (multiSelectModel === \"ctrl\" && Util.hasCtrlKey(e)) {\r\n                return true;\r\n            }\r\n            if (multiSelectModel === \"ctrl,shift\" && (Util.hasCtrlKey(e) || Util.hasShiftKey(e))) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n    /* eslint-enable */\r\n\r\n    //=============================================================================\r\n\r\n    //depends on multiSelectKey option\r\n    getMultiSelectModel: function() {\r\n        var model = this.option.multiSelectModel;\r\n        if (typeof(model) === \"string\") {\r\n            return model;\r\n        }\r\n\r\n        var keys = [\"has\"];\r\n        var multiSelectKey = (this.option.multiSelectKey + \"\").toLowerCase();\r\n        if (multiSelectKey.indexOf(\"ctrl\") !== -1) {\r\n            keys.push(\"ctrl\");\r\n        }\r\n        if (multiSelectKey.indexOf(\"shift\") !== -1) {\r\n            keys.push(\"shift\");\r\n        }\r\n\r\n        var key = keys.join(\"_\");\r\n        var models = {\r\n            has_shift: \"shift\",\r\n            has: \"\",\r\n            has_ctrl_shift: \"ctrl,shift\",\r\n            has_ctrl: \"ctrl\"\r\n        };\r\n\r\n        model = models[key];\r\n        this.option.multiSelectModel = model;\r\n\r\n        return model;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    //get single/first selected row\r\n    getSelectedRow: function() {\r\n        var selectedRow = null;\r\n        var selectedRows = this.getSelectedRows();\r\n        if (selectedRows.length) {\r\n            selectedRow = selectedRows[0];\r\n        }\r\n        return selectedRow;\r\n    },\r\n\r\n    //get all selected rows\r\n    getSelectedRows: function() {\r\n        var selectedRows = [];\r\n        this.forEachSelectableRows(function(row, i, parent) {\r\n            if (row.selected) {\r\n                selectedRows.push(row);\r\n            }\r\n        });\r\n        if (selectedRows.length > 1) {\r\n            //sort by order\r\n            selectedRows.sort(function(a, b) {\r\n                var av = a.tg_selected_order;\r\n                var bv = b.tg_selected_order;\r\n                if (av > bv) {\r\n                    return 1;\r\n                }\r\n                if (av < bv) {\r\n                    return -1;\r\n                }\r\n                return 0;\r\n            });\r\n        }\r\n        return selectedRows;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    //unselected\r\n    unsetSelectedRow: function(rowIndex) {\r\n        //single unselected\r\n        if (arguments.length) {\r\n            var item = this.getRowItem(rowIndex);\r\n            if (item) {\r\n                this.removeRowSelected(item);\r\n            }\r\n            return;\r\n        }\r\n        //unselected all rows\r\n        this.unsetAllSelectedRows();\r\n    },\r\n\r\n    unsetAllSelectedRows: function() {\r\n        var self = this;\r\n        this.forEachSelectableRows(function(row, i, parent) {\r\n            if (row.selected) {\r\n                self.removeRowSelected(row);\r\n            }\r\n        });\r\n    },\r\n\r\n    //=============================================================================\r\n    //for each all selectable rows\r\n    //update total selectable number, for checkbox all status\r\n\r\n    forEachSelectableRows: function(callback) {\r\n        if (typeof(callback) !== \"function\") {\r\n            return this;\r\n        }\r\n        var self = this;\r\n        this.forEachRow(function(item, i, parent) {\r\n            if (self.isRowSelectable(item)) {\r\n                callback.call(this, item, i, parent);\r\n            }\r\n        });\r\n        return this;\r\n    },\r\n\r\n    getTotalSelectable: function() {\r\n        var total = 0;\r\n        var self = this;\r\n        this.forEachRow(function(item) {\r\n            if (self.isRowSelectable(item)) {\r\n                total += 1;\r\n            }\r\n        });\r\n        return total;\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = ModelRowSelect;","var E = require(\"../../core/event-type.js\");\r\nvar Util = require(\"../../core/util.js\");\r\nvar ServiceExport = require(\"../service/service-export.js\");\r\n\r\nvar ModelRow = {\r\n\r\n    //=============================================================================\r\n    //rows handler\r\n\r\n    //init data before created, only for first time\r\n    gridInitRowsDataHandler: function() {\r\n        this.gridInitDataTypeHandler();\r\n        this.gridInitSortHandler();\r\n        this.gridInitSelectedHandler();\r\n        this.gridInitCollapseHandler();\r\n        return this;\r\n    },\r\n\r\n    gridInitDataTypeHandler: function() {\r\n\r\n        if (!this.option.convertDataType) {\r\n            return;\r\n        }\r\n\r\n        //for now only convert: dataType === \"number\"\r\n        var idList = [];\r\n        this.gridColumnsData.forEach(function(column) {\r\n            if (column.dataType === \"number\") {\r\n                idList.push(column.id);\r\n            }\r\n        });\r\n\r\n        if (!idList.length) {\r\n            return;\r\n        }\r\n\r\n        this.forEachRow(function(row, i, parent) {\r\n            idList.forEach(function(key) {\r\n                row[key] = Util.convertNum(row[key]);\r\n            });\r\n        });\r\n\r\n    },\r\n\r\n    //========================================================================================\r\n\r\n    gridRowsDataHandler: function() {\r\n\r\n        //row filter\r\n        this.gridRowFilterHandler();\r\n\r\n        //sort\r\n        this.gridSortHandler();\r\n\r\n        //row number\r\n        this.gridRowNumberHandler();\r\n\r\n        this.gridRowsData.length = 0;\r\n\r\n        var self = this;\r\n        var rows = this.getRowsData();\r\n\r\n        var appendRows = function(rows, parent) {\r\n            if (!Util.islist(rows)) {\r\n                return;\r\n            }\r\n            var list_length = rows.length;\r\n            var list_index = 0;\r\n            rows.forEach(function(row) {\r\n\r\n                if (row.tg_invisible) {\r\n                    return;\r\n                }\r\n\r\n                //for last, 0 is first\r\n                row.tg_list_length = list_length;\r\n                //update list index for current subs list after sort\r\n                row.tg_list_index = list_index;\r\n                list_index++;\r\n\r\n                self.gridRowsData.push(row);\r\n\r\n                //collapsed filter\r\n                if (row.tg_group && row.collapsed) {\r\n                    return;\r\n                }\r\n\r\n                appendRows(row.subs, row);\r\n\r\n            });\r\n        };\r\n\r\n        appendRows(rows);\r\n\r\n        //console.log(this.gridRowsData, rows);\r\n\r\n        //update row index\r\n        this.initListData(this.gridRowsData);\r\n\r\n        return this;\r\n    },\r\n\r\n    //=============================================================================\r\n    //filter handler\r\n\r\n    gridRowFilterHandler: function() {\r\n\r\n        var rowFilter = this.option.rowFilter;\r\n        if (typeof(rowFilter) !== \"function\") {\r\n            rowFilter = function(rowItem) {\r\n                return true;\r\n            };\r\n        }\r\n        //return true:visible or false:invisible\r\n\r\n        //set tg_invisible\r\n        this.forEachRow(function(row, i, parent) {\r\n\r\n            var invisible = false;\r\n\r\n            if (typeof(row.invisible) === \"boolean\") {\r\n                invisible = row.invisible;\r\n            } else {\r\n                var visible = rowFilter.call(this, row);\r\n                invisible = !visible;\r\n            }\r\n\r\n            row.tg_invisible = invisible;\r\n\r\n            //parent should be visible if subs is visible\r\n            if (!invisible) {\r\n                var current = row;\r\n                while (current.tg_parent) {\r\n                    current.tg_parent.tg_invisible = false;\r\n                    current = current.tg_parent;\r\n                }\r\n            }\r\n\r\n        });\r\n        return this;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    getCurrentIndentWidth: function() {\r\n        var o = this.option;\r\n        var showRowNumber = o.showRowNumber;\r\n        var isTree = o.rowsInfo.isTree;\r\n\r\n        //1, tree icon width\r\n        var treeIconWidth = 0;\r\n        if (isTree) {\r\n            treeIconWidth = 15;\r\n        }\r\n\r\n        //2, row number width\r\n        var rowNumberWidth = 0;\r\n        if (showRowNumber) {\r\n            rowNumberWidth = o.rowNumberWidth;\r\n        }\r\n\r\n        //3, all icon width\r\n        var collapseAllIconWidth = 0;\r\n        if (isTree) {\r\n            collapseAllIconWidth = o.collapseAllIconWidth;\r\n        }\r\n\r\n        var indentWidth = Math.max(treeIconWidth, rowNumberWidth, collapseAllIconWidth);\r\n\r\n        //4, space width\r\n        var spaceWidth = 5;\r\n        if (indentWidth) {\r\n            indentWidth += spaceWidth;\r\n        }\r\n\r\n        return indentWidth;\r\n    },\r\n\r\n    //=============================================================================\r\n    //add/insert rows\r\n\r\n    initRowInfo: function(rowInfo) {\r\n        if (!rowInfo) {\r\n            return null;\r\n        }\r\n        if (typeof(rowInfo) !== \"object\") {\r\n            rowInfo = {\r\n                name: rowInfo\r\n            };\r\n        }\r\n        return rowInfo;\r\n    },\r\n\r\n    initRowList: function(rowList) {\r\n        var list = [];\r\n        if (!Util.islist(rowList)) {\r\n            return list;\r\n        }\r\n        var self = this;\r\n        rowList.forEach(function(rowInfo) {\r\n            rowInfo = self.initRowInfo(rowInfo);\r\n            if (!rowInfo) {\r\n                return;\r\n            }\r\n            list.push(rowInfo);\r\n        });\r\n        return list;\r\n    },\r\n\r\n    initRowSubs: function(rowIndex) {\r\n        var subs = this.rows;\r\n        if (rowIndex !== null) {\r\n            var rowItem = this.getRowItem(rowIndex);\r\n            if (!rowItem) {\r\n                return null;\r\n            }\r\n            //update row to group\r\n            if (!rowItem.subs) {\r\n                rowItem.subs = [];\r\n                //invalidate to group\r\n                this.invalidateRow(rowItem.tg_index);\r\n            }\r\n            subs = rowItem.subs;\r\n        }\r\n        return subs;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    insertRowBefore: function(rowInfo, rowIndex, scrollTo) {\r\n        return this.insertRowsBefore([rowInfo], rowIndex, scrollTo);\r\n    },\r\n\r\n    insertRowsBefore: function(rowList, rowIndex, scrollTo) {\r\n        return this.insertRowsTo(rowList, rowIndex, scrollTo, 0);\r\n    },\r\n\r\n    insertRowAfter: function(rowInfo, rowIndex, scrollTo) {\r\n        return this.insertRowsAfter([rowInfo], rowIndex, scrollTo);\r\n    },\r\n\r\n    insertRowsAfter: function(rowList, rowIndex, scrollTo) {\r\n        return this.insertRowsTo(rowList, rowIndex, scrollTo, 1);\r\n    },\r\n\r\n    insertRowsTo: function(rowList, rowIndex, scrollTo, offset) {\r\n        var rowItem = this.getRowItem(rowIndex);\r\n        if (!rowItem) {\r\n            return false;\r\n        }\r\n\r\n        var insertList = this.initRowList(rowList);\r\n        if (!insertList.length) {\r\n            return false;\r\n        }\r\n\r\n        var parentSubs = this.getRowParentSubs(rowItem.tg_index);\r\n        var index = rowItem.tg_list_index + offset;\r\n        this.addRowsHandler(insertList, parentSubs, index, scrollTo);\r\n        return true;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    //push to root\r\n    addRow: function(rowItem, scrollTo) {\r\n        return this.addRows([rowItem], scrollTo);\r\n    },\r\n\r\n    addRows: function(rowList, scrollTo) {\r\n        return this.addRowsTo(rowList, null, scrollTo);\r\n    },\r\n\r\n    //add to parent/root\r\n    addRowsTo: function(rowList, rowIndex, scrollTo) {\r\n        var addList = this.initRowList(rowList);\r\n        if (!addList.length) {\r\n            return false;\r\n        }\r\n\r\n        var subs = this.initRowSubs(rowIndex);\r\n        if (!subs) {\r\n            return false;\r\n        }\r\n\r\n        this.addRowsHandler(addList, subs, subs.length, scrollTo);\r\n        return true;\r\n    },\r\n\r\n    //private API\r\n    addRowsHandler: function(rows, list, index, scrollTo) {\r\n        var args = [index, 0].concat(rows);\r\n        list.splice.apply(list, args);\r\n\r\n        var firstRow = rows[0];\r\n        this.setInvalidRow(firstRow);\r\n        //any rows data change should call this again\r\n        //tree, parent, group, level\r\n        this.initRowsData();\r\n\r\n        this.one(E.onRenderUpdate, function(e, d) {\r\n            // fire an event to indicate that the new rows are in the DOM\r\n            this.emit(E.onRowAdded, rows);\r\n\r\n            if (scrollTo) {\r\n                var lastRow = rows[rows.length - 1];\r\n                this.scrollRowIntoView(firstRow);\r\n                if (lastRow !== firstRow) {\r\n                    this.scrollRowIntoView(lastRow);\r\n                }\r\n            }\r\n        });\r\n        this.updateSelectedStatus();\r\n        this.render();\r\n    },\r\n\r\n    //=============================================================================\r\n    //add/delete rows\r\n\r\n    deleteRow: function(rowItem) {\r\n        return this.deleteRows([rowItem]);\r\n    },\r\n\r\n    deleteRows: function(rowList) {\r\n        if (!Util.islist(rowList)) {\r\n            return false;\r\n        }\r\n        var deletedIndexList = [];\r\n        var deletedRowsList = [];\r\n        var self = this;\r\n        rowList.forEach(function(rowIndex) {\r\n            var rowItem = self.getRowItem(rowIndex);\r\n            if (!rowItem) {\r\n                return;\r\n            }\r\n            //keep index for invalidate from\r\n            deletedIndexList.push(rowItem.tg_index);\r\n            // for \"onRowRemoved\" event\r\n            deletedRowsList.push(rowItem);\r\n        });\r\n        if (!deletedIndexList.length) {\r\n            return false;\r\n        }\r\n\r\n        this.removeRows(deletedRowsList);\r\n\r\n        //choose min index to invalidate\r\n        var minIndex = Math.min.apply(null, deletedIndexList);\r\n        //console.log(deletedIndexList, minIndex);\r\n        this.invalidateRowsFrom(minIndex);\r\n\r\n        this.one(E.onRenderUpdate, function(e, d) {\r\n            this.emit(E.onRowRemoved, deletedRowsList);\r\n        });\r\n\r\n        this.updateSelectedStatus();\r\n        this.render();\r\n\r\n        return true;\r\n    },\r\n\r\n    removeRows: function(deletedRowsList) {\r\n\r\n        //remove with high performance, desc index\r\n        var list = [].concat(deletedRowsList);\r\n        list.sort(function(a, b) {\r\n            return b.tg_index - a.tg_index;\r\n        });\r\n\r\n        //console.log(list);\r\n\r\n        var self = this;\r\n        list.forEach(function(row) {\r\n            var parentSubs = self.getRowParentSubs(row.tg_index);\r\n            parentSubs.splice(row.tg_list_index, 1);\r\n        });\r\n\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    getRowNodes: function(rowIndex) {\r\n        var item = this.getRowItem(rowIndex);\r\n        if (!item) {\r\n            return null;\r\n        }\r\n        return this.gridView.getRowNodes(item.tg_index);\r\n    },\r\n\r\n    getCellNodes: function(rowIndex) {\r\n        var item = this.getRowItem(rowIndex);\r\n        if (!item) {\r\n            return null;\r\n        }\r\n        return this.gridView.getCellNodes(item.tg_index);\r\n    },\r\n\r\n    getCellNode: function(rowIndex, columnIndex) {\r\n        var rowItem = this.getRowItem(rowIndex);\r\n        if (!rowItem) {\r\n            return null;\r\n        }\r\n        var columnItem = this.getColumnItem(columnIndex);\r\n        if (!columnItem) {\r\n            return null;\r\n        }\r\n        return this.gridView.getCellNode(rowItem.tg_index, columnItem.tg_index);\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    //row subs\r\n    setRowSubs: function(rowIndex, subs) {\r\n        var item = this.getRowItem(rowIndex);\r\n        if (!item) {\r\n            return this;\r\n        }\r\n        var position = item.tg_index;\r\n        //update data\r\n        if (Util.islist(subs)) {\r\n            //open subs default\r\n            item.collapsed = false;\r\n        }\r\n        item.subs = subs;\r\n        this.getRowsData(true);\r\n        //render\r\n        this.invalidateRowsFrom(position);\r\n        this.updateSelectedStatus();\r\n        this.render();\r\n        return this;\r\n    },\r\n\r\n    //dynamic set new row list\r\n    setRows: function(rows) {\r\n        if (!Util.islist(rows)) {\r\n            rows = [];\r\n        }\r\n        //update data\r\n        this.data.rows = rows;\r\n        this.getRowsData(true);\r\n        //render\r\n        this.invalidateAll();\r\n        this.updateSelectedStatus();\r\n        this.render();\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    //set invalid row before render\r\n    setInvalidRow: function(invalidRow) {\r\n        this.invalidRow = invalidRow;\r\n    },\r\n\r\n    //invalidate row from invalid row after init rows data\r\n    invalidRowHandler: function() {\r\n\r\n        if (!this.invalidRow) {\r\n            return;\r\n        }\r\n\r\n        var invalidIndex = this.invalidRow.tg_index;\r\n        this.invalidateRowsFrom(invalidIndex);\r\n\r\n        //remove every time\r\n        this.invalidRow = null;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    getRowParentSubs: function(rowIndex) {\r\n        var item = this.getRowItem(rowIndex);\r\n        if (!item) {\r\n            return null;\r\n        }\r\n        //root.subs\r\n        var subs = this.rows;\r\n        if (item.tg_parent) {\r\n            subs = item.tg_parent.subs;\r\n        }\r\n        return subs;\r\n    },\r\n\r\n    getRowJSON: function(rowIndex) {\r\n        var item = this.getRowItem(rowIndex);\r\n        if (!item) {\r\n            return null;\r\n        }\r\n        var json = ServiceExport.getItemSnapshot(item);\r\n        return json;\r\n    },\r\n\r\n    setRowData: function(rowIndex, rowData) {\r\n        var rowItem = this.getRowItem(rowIndex);\r\n        if (!rowItem) {\r\n            return;\r\n        }\r\n        if (!rowData || typeof(rowData) !== \"object\") {\r\n            return;\r\n        }\r\n        Object.keys(rowData).forEach(function(k) {\r\n            rowItem[k] = rowData[k];\r\n        });\r\n    },\r\n\r\n    //=============================================================================\r\n    //frozen row\r\n    getFrozenRowByRowTypeList: function(rows, frozenRowTypeList) {\r\n        var frozenRow = -1;\r\n        if (!Util.islist(rows) || !Util.islist(frozenRowTypeList)) {\r\n            return frozenRow;\r\n        }\r\n        for (var i = 0, l = rows.length; i < l; i++) {\r\n            var row = rows[i];\r\n            if (Util.inlist(row.rowType, frozenRowTypeList)) {\r\n                frozenRow += 1;\r\n                continue;\r\n            }\r\n            break;\r\n        }\r\n        return frozenRow;\r\n    },\r\n\r\n    //TODO should be sort by back-end\r\n    sortRowsByRowTypeList: function(rows, rowTypeList) {\r\n        if (!Util.islist(rows) || !Util.islist(rowTypeList)) {\r\n            return;\r\n        }\r\n        var tempList = [];\r\n        rowTypeList.forEach(function(rowType) {\r\n            for (var i = 0, l = rows.length; i < l; i++) {\r\n                var row = rows[i];\r\n                if (row.rowType === rowType) {\r\n                    tempList.unshift(row);\r\n                    rows.splice(i, 1);\r\n                    break;\r\n                }\r\n            }\r\n        });\r\n        if (!tempList.length) {\r\n            return;\r\n        }\r\n        tempList.forEach(function(item) {\r\n            rows.unshift(item);\r\n        });\r\n    },\r\n\r\n    //=============================================================================\r\n    //highlight single row\r\n\r\n    setHighlightRow: function(rowIndex, highlight) {\r\n        var item = this.getRowItem(rowIndex);\r\n        if (!item) {\r\n            return this;\r\n        }\r\n\r\n        //remove highlight row\r\n        if (highlight === false) {\r\n            this.removeRowStatus(item, \"highlight\");\r\n            return;\r\n        }\r\n\r\n        //add highlight row\r\n        if (item.highlight) {\r\n            return this;\r\n        }\r\n        //remove all previous highlight rows\r\n        this.removeAllHighlightRows();\r\n        this.addRowStatus(item, \"highlight\");\r\n        return this;\r\n    },\r\n\r\n    removeAllHighlightRows: function() {\r\n        var self = this;\r\n        this.forEachRow(function(row, i, parent) {\r\n            if (row.highlight) {\r\n                self.removeRowStatus(row, \"highlight\");\r\n            }\r\n        });\r\n        return this;\r\n    },\r\n\r\n    getHighlightRow: function() {\r\n        var rowItem = null;\r\n        this.forEachRow(function(row, i, parent) {\r\n            if (row.highlight) {\r\n                rowItem = row;\r\n                return false;\r\n            }\r\n        });\r\n        return rowItem;\r\n    },\r\n\r\n    //=============================================================================\r\n    //hover single row\r\n\r\n    setHoverRow: function(rowIndex, hover) {\r\n        var item = this.getRowItem(rowIndex);\r\n        if (!item) {\r\n            return this;\r\n        }\r\n        this.gridView.setHoverRow(item, hover);\r\n        return this;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    setLoadingRow: function(rowIndex, loading) {\r\n        var item = this.getRowItem(rowIndex);\r\n        if (!item) {\r\n            return this;\r\n        }\r\n\r\n        if (loading === false) {\r\n            this.removeRowStatus(item, \"waiting\");\r\n            return;\r\n        }\r\n\r\n        this.addRowStatus(item, \"waiting\");\r\n        return this;\r\n    },\r\n\r\n    //=============================================================================\r\n    //change row status, the status will be add/remove as className\r\n    //current support: selected, highlight\r\n\r\n    addRowStatus: function(rowItem, status) {\r\n        if (!rowItem) {\r\n            return;\r\n        }\r\n        rowItem[status] = true;\r\n        this.updateRowStatus(rowItem, status);\r\n    },\r\n\r\n    removeRowStatus: function(rowItem, status) {\r\n        if (!rowItem) {\r\n            return;\r\n        }\r\n        rowItem[status] = false;\r\n        this.updateRowStatus(rowItem, status);\r\n    },\r\n\r\n    updateRowStatus: function(rowItem, status) {\r\n        if (!this.gridView.initialized) {\r\n            return;\r\n        }\r\n        // update row class\r\n        var rowNodes = this.gridView.getRowNodes(rowItem.tg_index);\r\n        if (rowNodes) {\r\n            var hasStatus = rowItem[status];\r\n            var className = \"tg-\" + status;\r\n            if (hasStatus) {\r\n                rowNodes.addClass(className);\r\n            } else {\r\n                rowNodes.removeClass(className);\r\n            }\r\n        }\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = ModelRow;","var ModelScroll = {\r\n\r\n    //=============================================================================\r\n    //scroll to row/column/cell\r\n\r\n    scrollToRow: function(row) {\r\n        var rowItem = this.getRowItem(row);\r\n        this.gridView.scrollToItem(rowItem, null);\r\n        return this;\r\n    },\r\n\r\n    scrollToColumn: function(column) {\r\n        var columnItem = this.getColumnItem(column);\r\n        this.gridView.scrollToItem(null, columnItem);\r\n        return this;\r\n    },\r\n\r\n    scrollToCell: function(row, column) {\r\n        var rowItem = this.getRowItem(row);\r\n        var columnItem = this.getColumnItem(column);\r\n        this.gridView.scrollToItem(rowItem, columnItem);\r\n        return this;\r\n    },\r\n\r\n    //=============================================================================\r\n    //scroll row/column/cell into view\r\n\r\n    scrollRowIntoView: function(row) {\r\n        var rowItem = this.getRowItem(row);\r\n        this.gridView.scrollItemIntoView(rowItem, null);\r\n        return this;\r\n    },\r\n\r\n    scrollColumnIntoView: function(column) {\r\n        var columnItem = this.getColumnItem(column);\r\n        this.gridView.scrollItemIntoView(null, columnItem);\r\n        return this;\r\n    },\r\n\r\n    scrollCellIntoView: function(row, column) {\r\n        var rowItem = this.getRowItem(row);\r\n        var columnItem = this.getColumnItem(column);\r\n        this.gridView.scrollItemIntoView(rowItem, columnItem);\r\n        return this;\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = ModelScroll;","var defaultSortComparers = require(\"../config/default-sort-comparers.js\");\r\nvar ServiceSort = require(\"../service/service-sort.js\");\r\nvar Util = require(\"../../core/util.js\");\r\n\r\nvar ModelSort = {\r\n\r\n    gridInitSortHandler: function() {\r\n        var o = this.option;\r\n\r\n        var optionSortField = o.sortField;\r\n        if (!optionSortField) {\r\n            return this;\r\n        }\r\n\r\n        // if multiple sortFields, get primary sortField\r\n        var primarySortField = optionSortField;\r\n        if (Util.islist(optionSortField)) {\r\n            primarySortField = optionSortField[0];\r\n        }\r\n\r\n        var sortColumn = this.getSortColumn(primarySortField);\r\n        if (!sortColumn) {\r\n            return this;\r\n        }\r\n\r\n        sortColumn.sortAsc = o.sortAsc;\r\n\r\n        //if sort on init\r\n        if (!o.sortOnInit) {\r\n            //just set sort column, do NOT sort data\r\n            this.gridView.setSortColumn(sortColumn);\r\n            return this;\r\n        }\r\n\r\n        //for sort data every time\r\n        this.sortColumn = sortColumn;\r\n\r\n        return this;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    invalidateSortRows: function() {\r\n        if (this.gridView.hasFrozenRows) {\r\n            this.gridView.invalidateRowsFrom(this.option.frozenRows);\r\n        } else {\r\n            this.gridView.invalidateAll();\r\n        }\r\n    },\r\n\r\n    //sort API\r\n    setSortColumn: function(sortColumn) {\r\n        this.sortColumn = sortColumn;\r\n\r\n        if (!this.gridView.initialized) {\r\n            return;\r\n        }\r\n\r\n        this.gridView.setSortColumn(this.sortColumn);\r\n\r\n        var frozenRows = this.option.frozenRows;\r\n        var rowsLength = this.gridView.getRowsLength();\r\n        if (rowsLength - frozenRows < 2) {\r\n            return;\r\n        }\r\n\r\n        this.invalidateSortRows();\r\n\r\n        //do NOT sync if length great than 5w\r\n        if (rowsLength < 50000) {\r\n            this.renderNow();\r\n        } else {\r\n            this.render();\r\n        }\r\n    },\r\n\r\n    getSortColumn: function(id) {\r\n        var sortColumn = Util.getListItem(this.gridColumnsData, {\r\n            id: id\r\n        });\r\n        return sortColumn;\r\n    },\r\n\r\n    getSortComparers: function() {\r\n        var sortComparers = Util.merge(defaultSortComparers, this.option.sortComparers);\r\n        return sortComparers;\r\n    },\r\n\r\n    // for multiple compares\r\n    getMultipleSortFields: function(currentSortField) {\r\n        var multipleSortFields = [];\r\n        var sortField = this.option.sortField;\r\n        if (Util.islist(sortField)) {\r\n            // copy to do not change the option sortFields list\r\n            var optionSortField = sortField.concat([]);\r\n            // remove first primary sortField\r\n            optionSortField.shift();\r\n            var self = this;\r\n            optionSortField.forEach(function(field) {\r\n                // do NOT sort again if use clicked field in multipleSortFields\r\n                if (field === currentSortField) {\r\n                    return;\r\n                }\r\n                var columnData = self.getColumnItemById(field);\r\n                if (columnData) {\r\n                    multipleSortFields.push({\r\n                        sortFieldType: columnData.dataType,\r\n                        sortField: field\r\n                    });\r\n                }\r\n            });\r\n        }\r\n        return multipleSortFields;\r\n    },\r\n\r\n    //remove fast sort status\r\n    removeSortStatus: function() {\r\n        this.sortField = null;\r\n        this.sortAsc = null;\r\n        this.sortComparers = null;\r\n        this.sortColumn = null;\r\n        this.gridView.removeSortColumn();\r\n        return this;\r\n    },\r\n\r\n    //without sort if dynamic data loaded\r\n    setSortDisabled: function() {\r\n        this.sortDisabled = true;\r\n        return this;\r\n    },\r\n\r\n    //=============================================================================\r\n\r\n    gridSortHandler: function() {\r\n\r\n        if (this.sortDisabled) {\r\n            //disabled once\r\n            this.sortDisabled = false;\r\n            return;\r\n        }\r\n\r\n        this.sortRowData();\r\n\r\n        //update sort column status for header\r\n        //TODO check gridView.setSortColumn if multiple call \r\n        this.gridView.setSortColumn(this.sortColumn);\r\n\r\n    },\r\n\r\n    //just deep sort data\r\n    sortRowData: function() {\r\n        var sortColumn = this.sortColumn;\r\n        if (!sortColumn) {\r\n            return;\r\n        }\r\n\r\n        //console.log(\"sortRowData\");\r\n\r\n        // just use dataType, do NOT use formatter, this is only for sorting\r\n        var sortFieldType = this.getColumnType(sortColumn);\r\n        var sortField = sortColumn.id;\r\n        var sortAsc = sortColumn.sortAsc;\r\n        var sortBlankValueBottom = this.option.sortBlankValueBottom;\r\n        var sortComparers = this.getSortComparers();\r\n        var multipleSortFields = this.getMultipleSortFields(sortField);\r\n\r\n        //if support sort fast\r\n        var sortFast = false;\r\n        if (this.option.sortFast) {\r\n            sortFast = this.sortField === sortField ? true : false;\r\n        }\r\n\r\n        var sortOption = {\r\n            ignore: function(item) {\r\n                //frozen always top\r\n                if (item.tg_frozen) {\r\n                    return {\r\n                        item: item,\r\n                        top: true\r\n                    };\r\n                }\r\n                if (item.unsorted) {\r\n                    return {\r\n                        item: item,\r\n                        top: item.unsortedTop\r\n                    };\r\n                }\r\n                return null;\r\n            },\r\n\r\n            sortFieldType: sortFieldType,\r\n            sortField: sortField,\r\n            sortAsc: sortAsc,\r\n            sortBlankValueBottom: sortBlankValueBottom,\r\n            sortComparers: sortComparers,\r\n            multipleSortFields: multipleSortFields,\r\n            sortFast: sortFast,\r\n            sortFastAsc: this.sortAsc\r\n        };\r\n\r\n        //remenber for fast sort\r\n        this.sortField = sortField;\r\n        this.sortAsc = sortAsc;\r\n\r\n        //sort handler\r\n        var hasSorted = false;\r\n        var sortHandler = new ServiceSort(sortOption);\r\n        var sortAll = function(rows, parent) {\r\n            if (!Util.islist(rows)) {\r\n                return;\r\n            }\r\n            if (rows.length > 1) {\r\n                hasSorted = sortHandler.sortList(rows);\r\n            }\r\n            rows.forEach(function(row) {\r\n                if (!row) {\r\n                    return;\r\n                }\r\n                sortAll(row.subs, row);\r\n            });\r\n        };\r\n\r\n        var rows = this.getRowsData();\r\n        sortAll(rows);\r\n\r\n        if (hasSorted) {\r\n            this.invalidateSortRows();\r\n        }\r\n\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = ModelSort;","var Util = require(\"../../core/util.js\");\r\n\r\nvar Export = {\r\n\r\n    getExportData: function(data) {\r\n        var columns = Export.getTreeSnapshot(data.columns);\r\n        var rows = Export.getTreeSnapshot(data.rows);\r\n        var exportData = {\r\n            columns: columns,\r\n            rows: rows\r\n        };\r\n        return exportData;\r\n    },\r\n\r\n    isExportable: function(item) {\r\n        if (!item) {\r\n            return false;\r\n        }\r\n        if (!item.hasOwnProperty(\"exportable\")) {\r\n            return true;\r\n        }\r\n        return item.exportable ? true : false;\r\n    },\r\n\r\n    getTreeSnapshot: function(tree) {\r\n        var list = [];\r\n        var snapshotAll = function(tree, list) {\r\n            if (!Util.islist(tree)) {\r\n                return list;\r\n            }\r\n            tree.forEach(function(item) {\r\n                if (!Export.isExportable(item)) {\r\n                    return;\r\n                }\r\n                var newItem = Export.getItemSnapshot(item);\r\n                if (item.subs) {\r\n                    newItem.subs = [];\r\n                    snapshotAll(item.subs, newItem.subs);\r\n                }\r\n                list.push(newItem);\r\n            });\r\n        };\r\n        snapshotAll(tree, list);\r\n        return list;\r\n    },\r\n\r\n    getItemSnapshot: function(item) {\r\n        var excludeKeys = {\r\n            subs: true\r\n        };\r\n        var newItem = {};\r\n        // remove all private info start with \"tg_\", and no subs\r\n        for (var k in item) {\r\n            if (item.hasOwnProperty(k)) {\r\n                if (excludeKeys[k] || k.indexOf(\"tg_\") === 0) {\r\n                    continue;\r\n                }\r\n                newItem[k] = item[k];\r\n            }\r\n        }\r\n        return newItem;\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = Export;","var Extend = require(\"../../core/extend.js\");\r\nvar Util = require(\"../../core/util.js\");\r\n\r\nvar Sort = Extend.extend({\r\n\r\n    constructor: function(option) {\r\n        this.option = Util.merge(this.defaultOption(), option);\r\n    },\r\n\r\n    defaultOption: function() {\r\n        return {\r\n            sortFieldType: null,\r\n            sortField: \"\",\r\n            sortAsc: true,\r\n            sortBlankValueBottom: true,\r\n            sortComparers: null,\r\n            multipleSortFields: [],\r\n            sortFast: null,\r\n            sortFastAsc: true,\r\n\r\n            ignore: null\r\n        };\r\n    },\r\n\r\n    //=============================================================\r\n\r\n    sortList: function(list) {\r\n        if (!Util.islist(list)) {\r\n            return false;\r\n        }\r\n        this.list = list;\r\n\r\n        var o = this.option;\r\n\r\n        if (!o.sortField) {\r\n            return false;\r\n        }\r\n\r\n        this.sortIndexHandler();\r\n\r\n        var hasSorted = false;\r\n\r\n        this.ignoreExcludeHandler();\r\n\r\n        if (o.sortFast) {\r\n\r\n            if (o.sortFastAsc !== o.sortAsc) {\r\n                this.list.reverse();\r\n                hasSorted = true;\r\n            }\r\n\r\n        } else {\r\n            this.comparerHandler();\r\n            hasSorted = true;\r\n        }\r\n\r\n        this.ignoreIncludeHandler();\r\n\r\n        return hasSorted;\r\n    },\r\n\r\n    //=============================================================\r\n\r\n    getMultipleComparers: function() {\r\n        var multipleComparers = [];\r\n        var multipleSortFields = this.option.multipleSortFields;\r\n        if (Util.islist(multipleSortFields)) {\r\n            var self = this;\r\n            multipleSortFields.forEach(function(sortItem) {\r\n                var comparer = self.getComparer(sortItem.sortFieldType);\r\n                if (comparer) {\r\n                    sortItem.comparer = comparer;\r\n                    multipleComparers.push(sortItem);\r\n                }\r\n            });\r\n        }\r\n        return multipleComparers;\r\n    },\r\n\r\n    comparerHandler: function() {\r\n\r\n        var o = this.option;\r\n        var sortFieldType = o.sortFieldType;\r\n        var comparer = this.getComparer(sortFieldType);\r\n        if (!comparer) {\r\n            return;\r\n        }\r\n\r\n        var sortFactor = o.sortAsc ? -1 : 1;\r\n        var sortBlankFactor = o.sortBlankValueBottom ? 1 : sortFactor;\r\n\r\n        var multipleComparers = this.getMultipleComparers();\r\n        var self = this;\r\n        this.list.sort(function(a, b) {\r\n            //sortField will be changed if multiple comparers\r\n            var option = {\r\n                sortField: o.sortField,\r\n                sortFactor: sortFactor,\r\n                sortBlankFactor: sortBlankFactor\r\n            };\r\n            return comparer.call(self, a, b, option, multipleComparers);\r\n        });\r\n    },\r\n\r\n    getComparer: function(sortFieldType) {\r\n        var sortComparers = this.option.sortComparers;\r\n        var comparer = null;\r\n        if (sortFieldType) {\r\n            comparer = sortComparers[sortFieldType];\r\n        }\r\n        comparer = comparer || sortComparers.string;\r\n\r\n        if (typeof(comparer) !== \"function\") {\r\n            return null;\r\n        }\r\n\r\n        return comparer;\r\n    },\r\n\r\n    //=============================================================\r\n\r\n    sortIndexHandler: function() {\r\n        for (var i = 0, l = this.list.length; i < l; i++) {\r\n            var item = this.list[i];\r\n            item.tg_sort_index = i;\r\n        }\r\n    },\r\n\r\n    ignoreExcludeHandler: function() {\r\n        this.ignoreListTop = [];\r\n        this.ignoreListBottom = [];\r\n        var ignoreHandler = this.option.ignore;\r\n        if (typeof(ignoreHandler) !== \"function\") {\r\n            return;\r\n        }\r\n        for (var i = 0, l = this.list.length; i < l; i++) {\r\n            var item = this.list[i];\r\n            var ignoreItem = ignoreHandler(item);\r\n            if (ignoreItem) {\r\n\r\n                if (ignoreItem.top) {\r\n                    this.ignoreListTop.unshift(ignoreItem);\r\n                } else {\r\n                    this.ignoreListBottom.push(ignoreItem);\r\n                }\r\n\r\n                //remove from old list\r\n                this.list.splice(i, 1);\r\n                i--;\r\n                l--;\r\n            }\r\n        }\r\n    },\r\n\r\n    ignoreIncludeHandler: function(list) {\r\n\r\n        var self = this;\r\n        this.ignoreListTop.forEach(function(ignoreItem) {\r\n            self.list.unshift(ignoreItem.item);\r\n        });\r\n\r\n        this.ignoreListBottom.forEach(function(ignoreItem) {\r\n            self.list.push(ignoreItem.item);\r\n        });\r\n\r\n    }\r\n\r\n});\r\n\r\nmodule.exports = Sort;","var Grid = require('./grid/grid.js');\r\n\r\nvar Util = require(\"./core/util.js\");\r\nvar Icon = require(\"./core/icon.js\");\r\nvar EditorBase = require('./grid/config/editor/editor-base.js');\r\n\r\nvar gridPackage = {\r\n\r\n    VERSION: \"1.41.21\",\r\n\r\n    //new name\r\n    MBG: Grid,\r\n\r\n    //old name\r\n    TreeGrid: Grid,\r\n    EditGrid: Grid,\r\n\r\n    //other\r\n    Util: Util,\r\n    Icon: Icon,\r\n    EditorBase: EditorBase\r\n\r\n};\r\n\r\n\r\nvar getNamespace = function(path) {\r\n    path = path || \"morningstar.components\";\r\n    var item = window || {};\r\n    if (path) {\r\n        (path + \"\").split(\".\").forEach(function(key) {\r\n            item[key] = item[key] || {};\r\n            item = item[key];\r\n        });\r\n    }\r\n    return item;\r\n};\r\n\r\nvar registerComponent = function(name, component, path) {\r\n    if (!name || !component) {\r\n        return;\r\n    }\r\n    var namespace = getNamespace(path);\r\n    if (namespace[name]) {\r\n        console.warn(\"[Overwrite Warning] Duplicated \" + name + \" loaded: v\" + namespace[name].VERSION + \" => v\" + component.VERSION + \" \");\r\n        namespace[\"_\" + name] = namespace[name];\r\n    }\r\n    namespace[name] = component;\r\n};\r\n\r\nregisterComponent(\"mbg\", gridPackage);\r\n\r\nmodule.exports = gridPackage;"],"sourceRoot":""}